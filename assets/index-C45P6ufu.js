(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lg={exports:{}},Tl={},cg={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),xw=Symbol.for("react.portal"),yw=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),bw=Symbol.for("react.context"),Nw=Symbol.for("react.forward_ref"),jw=Symbol.for("react.suspense"),Sw=Symbol.for("react.memo"),kw=Symbol.for("react.lazy"),Ef=Symbol.iterator;function Cw(t){return t===null||typeof t!="object"?null:(t=Ef&&t[Ef]||t["@@iterator"],typeof t=="function"?t:null)}var ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dg=Object.assign,hg={};function Mr(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||ug}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fg(){}fg.prototype=Mr.prototype;function Nd(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||ug}var jd=Nd.prototype=new fg;jd.constructor=Nd;dg(jd,Mr.prototype);jd.isPureReactComponent=!0;var If=Array.isArray,mg=Object.prototype.hasOwnProperty,Sd={current:null},pg={key:!0,ref:!0,__self:!0,__source:!0};function gg(t,e,n){var s,r={},o=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)mg.call(e,s)&&!pg.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:yo,type:t,key:o,ref:a,props:r,_owner:Sd.current}}function Ew(t,e){return{$$typeof:yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kd(t){return typeof t=="object"&&t!==null&&t.$$typeof===yo}function Iw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tf=/\/+/g;function pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Iw(""+t.key):e.toString(36)}function ha(t,e,n,s,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yo:case xw:a=!0}}if(a)return a=t,r=r(a),t=s===""?"."+pc(a,0):s,If(r)?(n="",t!=null&&(n=t.replace(Tf,"$&/")+"/"),ha(r,e,n,"",function(u){return u})):r!=null&&(kd(r)&&(r=Ew(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Tf,"$&/")+"/")+t)),e.push(r)),1;if(a=0,s=s===""?".":s+":",If(t))for(var l=0;l<t.length;l++){o=t[l];var c=s+pc(o,l);a+=ha(o,e,n,c,r)}else if(c=Cw(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=s+pc(o,l++),a+=ha(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $o(t,e,n){if(t==null)return t;var s=[],r=0;return ha(t,s,"","",function(o){return e.call(n,o,r++)}),s}function Tw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},fa={transition:null},Pw={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:fa,ReactCurrentOwner:Sd};function xg(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:$o,forEach:function(t,e,n){$o(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $o(t,function(){e++}),e},toArray:function(t){return $o(t,function(e){return e})||[]},only:function(t){if(!kd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=Mr;J.Fragment=yw;J.Profiler=ww;J.PureComponent=Nd;J.StrictMode=vw;J.Suspense=jw;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pw;J.act=xg;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=dg({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Sd.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)mg.call(e,c)&&!pg.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:yo,type:t.type,key:r,ref:o,props:s,_owner:a}};J.createContext=function(t){return t={$$typeof:bw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_w,_context:t},t.Consumer=t};J.createElement=gg;J.createFactory=function(t){var e=gg.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:Nw,render:t}};J.isValidElement=kd;J.lazy=function(t){return{$$typeof:kw,_payload:{_status:-1,_result:t},_init:Tw}};J.memo=function(t,e){return{$$typeof:Sw,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=fa.transition;fa.transition={};try{t()}finally{fa.transition=e}};J.unstable_act=xg;J.useCallback=function(t,e){return Xe.current.useCallback(t,e)};J.useContext=function(t){return Xe.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};J.useEffect=function(t,e){return Xe.current.useEffect(t,e)};J.useId=function(){return Xe.current.useId()};J.useImperativeHandle=function(t,e,n){return Xe.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Xe.current.useMemo(t,e)};J.useReducer=function(t,e,n){return Xe.current.useReducer(t,e,n)};J.useRef=function(t){return Xe.current.useRef(t)};J.useState=function(t){return Xe.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return Xe.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Xe.current.useTransition()};J.version="18.3.1";cg.exports=J;var w=cg.exports;const Rw=gw(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=w,Lw=Symbol.for("react.element"),Dw=Symbol.for("react.fragment"),Ow=Object.prototype.hasOwnProperty,Mw=Aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fw={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var s,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Ow.call(e,s)&&!Fw.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Lw,type:t,key:o,ref:a,props:r,_owner:Mw.current}}Tl.Fragment=Dw;Tl.jsx=yg;Tl.jsxs=yg;lg.exports=Tl;var i=lg.exports,vg={exports:{}},wt={},wg={exports:{}},_g={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,G){var q=F.length;F.push(G);e:for(;0<q;){var p=q-1>>>1,R=F[p];if(0<r(R,G))F[p]=G,F[q]=R,q=p;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var G=F[0],q=F.pop();if(q!==G){F[0]=q;e:for(var p=0,R=F.length,te=R>>>1;p<te;){var se=2*(p+1)-1,we=F[se],B=se+1,Te=F[B];if(0>r(we,q))B<R&&0>r(Te,we)?(F[p]=Te,F[B]=q,p=B):(F[p]=we,F[se]=q,p=se);else if(B<R&&0>r(Te,q))F[p]=Te,F[B]=q,p=B;else break e}}return G}function r(F,G){var q=F.sortIndex-G.sortIndex;return q!==0?q:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,d=3,v=!1,m=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var G=n(u);G!==null;){if(G.callback===null)s(u);else if(G.startTime<=F)s(u),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(u)}}function b(F){if(x=!1,_(F),!m)if(n(c)!==null)m=!0,ht(N);else{var G=n(u);G!==null&&Se(b,G.startTime-F)}}function N(F,G){m=!1,x&&(x=!1,y(T),T=-1),v=!0;var q=d;try{for(_(G),f=n(c);f!==null&&(!(f.expirationTime>G)||F&&!S());){var p=f.callback;if(typeof p=="function"){f.callback=null,d=f.priorityLevel;var R=p(f.expirationTime<=G);G=t.unstable_now(),typeof R=="function"?f.callback=R:f===n(c)&&s(c),_(G)}else s(c);f=n(c)}if(f!==null)var te=!0;else{var se=n(u);se!==null&&Se(b,se.startTime-G),te=!1}return te}finally{f=null,d=q,v=!1}}var j=!1,k=null,T=-1,E=5,I=-1;function S(){return!(t.unstable_now()-I<E)}function M(){if(k!==null){var F=t.unstable_now();I=F;var G=!0;try{G=k(!0,F)}finally{G?W():(j=!1,k=null)}}else j=!1}var W;if(typeof g=="function")W=function(){g(M)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,oe=z.port2;z.port1.onmessage=M,W=function(){oe.postMessage(null)}}else W=function(){C(M,0)};function ht(F){k=F,j||(j=!0,W())}function Se(F,G){T=C(function(){F(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||v||(m=!0,ht(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var q=d;d=G;try{return F()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=d;d=F;try{return G()}finally{d=q}},t.unstable_scheduleCallback=function(F,G,q){var p=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?p+q:p):q=p,F){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=q+R,F={id:h++,callback:G,priorityLevel:F,startTime:q,expirationTime:R,sortIndex:-1},q>p?(F.sortIndex=q,e(u,F),n(c)===null&&F===n(u)&&(x?(y(T),T=-1):x=!0,Se(b,q-p))):(F.sortIndex=R,e(c,F),m||v||(m=!0,ht(N))),F},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(F){var G=d;return function(){var q=d;d=G;try{return F.apply(this,arguments)}finally{d=q}}}})(_g);wg.exports=_g;var Uw=wg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=w,vt=Uw;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bg=new Set,Ui={};function Qs(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(Ui[t]=e,t=0;t<e.length;t++)bg.add(e[t])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=Object.prototype.hasOwnProperty,zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pf={},Rf={};function Bw(t){return ou.call(Rf,t)?!0:ou.call(Pf,t)?!1:zw.test(t)?Rf[t]=!0:(Pf[t]=!0,!1)}function Ww(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hw(t,e,n,s){if(e===null||typeof e>"u"||Ww(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ze(t,e,n,s,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new Ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new Ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new Ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new Ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new Ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new Ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new Ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new Ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new Ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cd=/[\-:]([a-z])/g;function Ed(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cd,Ed);$e[e]=new Ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cd,Ed);$e[e]=new Ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cd,Ed);$e[e]=new Ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new Ze(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new Ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,n,s){var r=$e.hasOwnProperty(e)?$e[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hw(e,n,r,s)&&(n=null),s||r===null?Bw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var In=$w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zo=Symbol.for("react.element"),tr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),au=Symbol.for("react.profiler"),Ng=Symbol.for("react.provider"),jg=Symbol.for("react.context"),Pd=Symbol.for("react.forward_ref"),lu=Symbol.for("react.suspense"),cu=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),Sg=Symbol.for("react.offscreen"),Af=Symbol.iterator;function ei(t){return t===null||typeof t!="object"?null:(t=Af&&t[Af]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,gc;function fi(t){if(gc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gc=e&&e[1]||""}return`
`+gc+t}var xc=!1;function yc(t,e){if(!t||xc)return"";xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=s.stack.split(`
`),a=r.length-1,l=o.length-1;1<=a&&0<=l&&r[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==o[l]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fi(t):""}function Vw(t){switch(t.tag){case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function uu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nr:return"Fragment";case tr:return"Portal";case au:return"Profiler";case Td:return"StrictMode";case lu:return"Suspense";case cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jg:return(t.displayName||"Context")+".Consumer";case Ng:return(t._context.displayName||"Context")+".Provider";case Pd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rd:return e=t.displayName||null,e!==null?e:uu(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return uu(t(e))}catch{}}return null}function Gw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uu(e);case 8:return e===Td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qw(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=qw(t))}function Cg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=kg(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function du(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lf(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Eg(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function hu(t,e){Eg(t,e);var n=ls(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&fu(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Df(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fu(t,e,n){(e!=="number"||Ra(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mi=Array.isArray;function gr(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function mu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Of(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(mi(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function Ig(t,e){var n=ls(e.value),s=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Mf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,Pg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kw=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(t){Kw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vi[e]=vi[t]})});function Rg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vi.hasOwnProperty(t)&&vi[t]?(""+e).trim():e+"px"}function Ag(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Rg(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var Qw=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(t,e){if(e){if(Qw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function xu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=null;function Ad(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vu=null,xr=null,yr=null;function Ff(t){if(t=_o(t)){if(typeof vu!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Dl(e),vu(t.stateNode,t.type,e))}}function Lg(t){xr?yr?yr.push(t):yr=[t]:xr=t}function Dg(){if(xr){var t=xr,e=yr;if(yr=xr=null,Ff(t),e)for(t=0;t<e.length;t++)Ff(e[t])}}function Og(t,e){return t(e)}function Mg(){}var vc=!1;function Fg(t,e,n){if(vc)return t(e,n);vc=!0;try{return Og(t,e,n)}finally{vc=!1,(xr!==null||yr!==null)&&(Mg(),Dg())}}function zi(t,e){var n=t.stateNode;if(n===null)return null;var s=Dl(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var wu=!1;if(vn)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){wu=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{wu=!1}function Yw(t,e,n,s,r,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var wi=!1,Aa=null,La=!1,_u=null,Jw={onError:function(t){wi=!0,Aa=t}};function Xw(t,e,n,s,r,o,a,l,c){wi=!1,Aa=null,Yw.apply(Jw,arguments)}function Zw(t,e,n,s,r,o,a,l,c){if(Xw.apply(this,arguments),wi){if(wi){var u=Aa;wi=!1,Aa=null}else throw Error(P(198));La||(La=!0,_u=u)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ug(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uf(t){if(Ys(t)!==t)throw Error(P(188))}function e_(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Uf(r),t;if(o===s)return Uf(r),e;o=o.sibling}throw Error(P(188))}if(n.return!==s.return)n=r,s=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=o;break}if(l===s){a=!0,s=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,s=r;break}if(l===s){a=!0,s=o,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==s)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function $g(t){return t=e_(t),t!==null?zg(t):null}function zg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zg(t);if(e!==null)return e;t=t.sibling}return null}var Bg=vt.unstable_scheduleCallback,$f=vt.unstable_cancelCallback,t_=vt.unstable_shouldYield,n_=vt.unstable_requestPaint,Ne=vt.unstable_now,s_=vt.unstable_getCurrentPriorityLevel,Ld=vt.unstable_ImmediatePriority,Wg=vt.unstable_UserBlockingPriority,Da=vt.unstable_NormalPriority,r_=vt.unstable_LowPriority,Hg=vt.unstable_IdlePriority,Pl=null,Xt=null;function i_(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Pl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:l_,o_=Math.log,a_=Math.LN2;function l_(t){return t>>>=0,t===0?32:31-(o_(t)/a_|0)|0}var Ho=64,Vo=4194304;function pi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=pi(l):(o&=a,o!==0&&(s=pi(o)))}else a=n&~r,a!==0?s=pi(a):o!==0&&(s=pi(o));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ut(e),r=1<<n,s|=t[n],e&=~r;return s}function c_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u_(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ut(o),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=c_(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function bu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vg(){var t=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),t}function wc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function d_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ut(n),o=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~o}}function Dd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ut(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ne=0;function Gg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qg,Od,Kg,Qg,Yg,Nu=!1,Go=[],qn=null,Kn=null,Qn=null,Bi=new Map,Wi=new Map,Un=[],h_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Bi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wi.delete(e.pointerId)}}function ni(t,e,n,s,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},e!==null&&(e=_o(e),e!==null&&Od(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function f_(t,e,n,s,r){switch(e){case"focusin":return qn=ni(qn,t,e,n,s,r),!0;case"dragenter":return Kn=ni(Kn,t,e,n,s,r),!0;case"mouseover":return Qn=ni(Qn,t,e,n,s,r),!0;case"pointerover":var o=r.pointerId;return Bi.set(o,ni(Bi.get(o)||null,t,e,n,s,r)),!0;case"gotpointercapture":return o=r.pointerId,Wi.set(o,ni(Wi.get(o)||null,t,e,n,s,r)),!0}return!1}function Jg(t){var e=ks(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Ug(n),e!==null){t.blockedOn=e,Yg(t.priority,function(){Kg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);yu=s,n.target.dispatchEvent(s),yu=null}else return e=_o(n),e!==null&&Od(e),t.blockedOn=n,!1;e.shift()}return!0}function Bf(t,e,n){ma(t)&&n.delete(e)}function m_(){Nu=!1,qn!==null&&ma(qn)&&(qn=null),Kn!==null&&ma(Kn)&&(Kn=null),Qn!==null&&ma(Qn)&&(Qn=null),Bi.forEach(Bf),Wi.forEach(Bf)}function si(t,e){t.blockedOn===e&&(t.blockedOn=null,Nu||(Nu=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,m_)))}function Hi(t){function e(r){return si(r,t)}if(0<Go.length){si(Go[0],t);for(var n=1;n<Go.length;n++){var s=Go[n];s.blockedOn===t&&(s.blockedOn=null)}}for(qn!==null&&si(qn,t),Kn!==null&&si(Kn,t),Qn!==null&&si(Qn,t),Bi.forEach(e),Wi.forEach(e),n=0;n<Un.length;n++)s=Un[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Jg(n),n.blockedOn===null&&Un.shift()}var vr=In.ReactCurrentBatchConfig,Ma=!0;function p_(t,e,n,s){var r=ne,o=vr.transition;vr.transition=null;try{ne=1,Md(t,e,n,s)}finally{ne=r,vr.transition=o}}function g_(t,e,n,s){var r=ne,o=vr.transition;vr.transition=null;try{ne=4,Md(t,e,n,s)}finally{ne=r,vr.transition=o}}function Md(t,e,n,s){if(Ma){var r=ju(t,e,n,s);if(r===null)Tc(t,e,s,Fa,n),zf(t,s);else if(f_(r,t,e,n,s))s.stopPropagation();else if(zf(t,s),e&4&&-1<h_.indexOf(t)){for(;r!==null;){var o=_o(r);if(o!==null&&qg(o),o=ju(t,e,n,s),o===null&&Tc(t,e,s,Fa,n),o===r)break;r=o}r!==null&&s.stopPropagation()}else Tc(t,e,s,null,n)}}var Fa=null;function ju(t,e,n,s){if(Fa=null,t=Ad(s),t=ks(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ug(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fa=t,null}function Xg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s_()){case Ld:return 1;case Wg:return 4;case Da:case r_:return 16;case Hg:return 536870912;default:return 16}default:return 16}}var Vn=null,Fd=null,pa=null;function Zg(){if(pa)return pa;var t,e=Fd,n=e.length,s,r="value"in Vn?Vn.value:Vn.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[o-s];s++);return pa=r.slice(t,1<s?1-s:void 0)}function ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function Wf(){return!1}function _t(t){function e(n,s,r,o,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qo:Wf,this.isPropagationStopped=Wf,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=_t(Fr),wo=ve({},Fr,{view:0,detail:0}),x_=_t(wo),_c,bc,ri,Rl=ve({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(_c=t.screenX-ri.screenX,bc=t.screenY-ri.screenY):bc=_c=0,ri=t),_c)},movementY:function(t){return"movementY"in t?t.movementY:bc}}),Hf=_t(Rl),y_=ve({},Rl,{dataTransfer:0}),v_=_t(y_),w_=ve({},wo,{relatedTarget:0}),Nc=_t(w_),__=ve({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),b_=_t(__),N_=ve({},Fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j_=_t(N_),S_=ve({},Fr,{data:0}),Vf=_t(S_),k_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E_[t])?!!e[t]:!1}function $d(){return I_}var T_=ve({},wo,{key:function(t){if(t.key){var e=k_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(t){return t.type==="keypress"?ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P_=_t(T_),R_=ve({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gf=_t(R_),A_=ve({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),L_=_t(A_),D_=ve({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),O_=_t(D_),M_=ve({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F_=_t(M_),U_=[9,13,27,32],zd=vn&&"CompositionEvent"in window,_i=null;vn&&"documentMode"in document&&(_i=document.documentMode);var $_=vn&&"TextEvent"in window&&!_i,ex=vn&&(!zd||_i&&8<_i&&11>=_i),qf=" ",Kf=!1;function tx(t,e){switch(t){case"keyup":return U_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sr=!1;function z_(t,e){switch(t){case"compositionend":return nx(e);case"keypress":return e.which!==32?null:(Kf=!0,qf);case"textInput":return t=e.data,t===qf&&Kf?null:t;default:return null}}function B_(t,e){if(sr)return t==="compositionend"||!zd&&tx(t,e)?(t=Zg(),pa=Fd=Vn=null,sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ex&&e.locale!=="ko"?null:e.data;default:return null}}var W_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W_[t.type]:e==="textarea"}function sx(t,e,n,s){Lg(s),e=Ua(e,"onChange"),0<e.length&&(n=new Ud("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var bi=null,Vi=null;function H_(t){mx(t,0)}function Al(t){var e=or(t);if(Cg(e))return t}function V_(t,e){if(t==="change")return e}var rx=!1;if(vn){var jc;if(vn){var Sc="oninput"in document;if(!Sc){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),Sc=typeof Yf.oninput=="function"}jc=Sc}else jc=!1;rx=jc&&(!document.documentMode||9<document.documentMode)}function Jf(){bi&&(bi.detachEvent("onpropertychange",ix),Vi=bi=null)}function ix(t){if(t.propertyName==="value"&&Al(Vi)){var e=[];sx(e,Vi,t,Ad(t)),Fg(H_,e)}}function G_(t,e,n){t==="focusin"?(Jf(),bi=e,Vi=n,bi.attachEvent("onpropertychange",ix)):t==="focusout"&&Jf()}function q_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(Vi)}function K_(t,e){if(t==="click")return Al(e)}function Q_(t,e){if(t==="input"||t==="change")return Al(e)}function Y_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:Y_;function Gi(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!ou.call(e,r)||!Wt(t[r],e[r]))return!1}return!0}function Xf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zf(t,e){var n=Xf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xf(n)}}function ox(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ox(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ax(){for(var t=window,e=Ra();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ra(t.document)}return e}function Bd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J_(t){var e=ax(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ox(n.ownerDocument.documentElement,n)){if(s!==null&&Bd(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(s.start,r);s=s.end===void 0?o:Math.min(s.end,r),!t.extend&&o>s&&(r=s,s=o,o=r),r=Zf(n,o);var a=Zf(n,s);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X_=vn&&"documentMode"in document&&11>=document.documentMode,rr=null,Su=null,Ni=null,ku=!1;function em(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ku||rr==null||rr!==Ra(s)||(s=rr,"selectionStart"in s&&Bd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ni&&Gi(Ni,s)||(Ni=s,s=Ua(Su,"onSelect"),0<s.length&&(e=new Ud("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=rr)))}function Ko(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ir={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},kc={},lx={};vn&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function Ll(t){if(kc[t])return kc[t];if(!ir[t])return t;var e=ir[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lx)return kc[t]=e[n];return t}var cx=Ll("animationend"),ux=Ll("animationiteration"),dx=Ll("animationstart"),hx=Ll("transitionend"),fx=new Map,tm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){fx.set(t,e),Qs(e,[t])}for(var Cc=0;Cc<tm.length;Cc++){var Ec=tm[Cc],Z_=Ec.toLowerCase(),e1=Ec[0].toUpperCase()+Ec.slice(1);ps(Z_,"on"+e1)}ps(cx,"onAnimationEnd");ps(ux,"onAnimationIteration");ps(dx,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(hx,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t1=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function nm(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Zw(s,e,void 0,t),t.currentTarget=null}function mx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&r.isPropagationStopped())break e;nm(r,l,u),o=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&r.isPropagationStopped())break e;nm(r,l,u),o=c}}}if(La)throw t=_u,La=!1,_u=null,t}function ue(t,e){var n=e[Pu];n===void 0&&(n=e[Pu]=new Set);var s=t+"__bubble";n.has(s)||(px(e,t,2,!1),n.add(s))}function Ic(t,e,n){var s=0;e&&(s|=4),px(n,t,s,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function qi(t){if(!t[Qo]){t[Qo]=!0,bg.forEach(function(n){n!=="selectionchange"&&(t1.has(n)||Ic(n,!1,t),Ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,Ic("selectionchange",!1,e))}}function px(t,e,n,s){switch(Xg(e)){case 1:var r=p_;break;case 4:r=g_;break;default:r=Md}n=r.bind(null,e,n,t),r=void 0,!wu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Tc(t,e,n,s,r){var o=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=ks(l),a===null)return;if(c=a.tag,c===5||c===6){s=o=a;continue e}l=l.parentNode}}s=s.return}Fg(function(){var u=o,h=Ad(n),f=[];e:{var d=fx.get(t);if(d!==void 0){var v=Ud,m=t;switch(t){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":v=P_;break;case"focusin":m="focus",v=Nc;break;case"focusout":m="blur",v=Nc;break;case"beforeblur":case"afterblur":v=Nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=v_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=L_;break;case cx:case ux:case dx:v=b_;break;case hx:v=O_;break;case"scroll":v=x_;break;case"wheel":v=F_;break;case"copy":case"cut":case"paste":v=j_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Gf}var x=(e&4)!==0,C=!x&&t==="scroll",y=x?d!==null?d+"Capture":null:d;x=[];for(var g=u,_;g!==null;){_=g;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=zi(g,y),b!=null&&x.push(Ki(g,b,_)))),C)break;g=g.return}0<x.length&&(d=new v(d,m,null,n,h),f.push({event:d,listeners:x}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",d&&n!==yu&&(m=n.relatedTarget||n.fromElement)&&(ks(m)||m[wn]))break e;if((v||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,v?(m=n.relatedTarget||n.toElement,v=u,m=m?ks(m):null,m!==null&&(C=Ys(m),m!==C||m.tag!==5&&m.tag!==6)&&(m=null)):(v=null,m=u),v!==m)){if(x=Hf,b="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=Gf,b="onPointerLeave",y="onPointerEnter",g="pointer"),C=v==null?d:or(v),_=m==null?d:or(m),d=new x(b,g+"leave",v,n,h),d.target=C,d.relatedTarget=_,b=null,ks(h)===u&&(x=new x(y,g+"enter",m,n,h),x.target=_,x.relatedTarget=C,b=x),C=b,v&&m)t:{for(x=v,y=m,g=0,_=x;_;_=Zs(_))g++;for(_=0,b=y;b;b=Zs(b))_++;for(;0<g-_;)x=Zs(x),g--;for(;0<_-g;)y=Zs(y),_--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=Zs(x),y=Zs(y)}x=null}else x=null;v!==null&&sm(f,d,v,x,!1),m!==null&&C!==null&&sm(f,C,m,x,!0)}}e:{if(d=u?or(u):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var N=V_;else if(Qf(d))if(rx)N=Q_;else{N=q_;var j=G_}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=K_);if(N&&(N=N(t,u))){sx(f,N,n,h);break e}j&&j(t,d,u),t==="focusout"&&(j=d._wrapperState)&&j.controlled&&d.type==="number"&&fu(d,"number",d.value)}switch(j=u?or(u):window,t){case"focusin":(Qf(j)||j.contentEditable==="true")&&(rr=j,Su=u,Ni=null);break;case"focusout":Ni=Su=rr=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,em(f,n,h);break;case"selectionchange":if(X_)break;case"keydown":case"keyup":em(f,n,h)}var k;if(zd)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else sr?tx(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(ex&&n.locale!=="ko"&&(sr||T!=="onCompositionStart"?T==="onCompositionEnd"&&sr&&(k=Zg()):(Vn=h,Fd="value"in Vn?Vn.value:Vn.textContent,sr=!0)),j=Ua(u,T),0<j.length&&(T=new Vf(T,t,null,n,h),f.push({event:T,listeners:j}),k?T.data=k:(k=nx(n),k!==null&&(T.data=k)))),(k=$_?z_(t,n):B_(t,n))&&(u=Ua(u,"onBeforeInput"),0<u.length&&(h=new Vf("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=k))}mx(f,e)})}function Ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ua(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=zi(t,n),o!=null&&s.unshift(Ki(t,o,r)),o=zi(t,e),o!=null&&s.push(Ki(t,o,r))),t=t.return}return s}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sm(t,e,n,s,r){for(var o=e._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=zi(n,o),c!=null&&a.unshift(Ki(n,c,l))):r||(c=zi(n,o),c!=null&&a.push(Ki(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var n1=/\r\n?/g,s1=/\u0000|\uFFFD/g;function rm(t){return(typeof t=="string"?t:""+t).replace(n1,`
`).replace(s1,"")}function Yo(t,e,n){if(e=rm(e),rm(t)!==e&&n)throw Error(P(425))}function $a(){}var Cu=null,Eu=null;function Iu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tu=typeof setTimeout=="function"?setTimeout:void 0,r1=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(t){return im.resolve(null).then(t).catch(o1)}:Tu;function o1(t){setTimeout(function(){throw t})}function Pc(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Hi(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Hi(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ur,Qi="__reactProps$"+Ur,wn="__reactContainer$"+Ur,Pu="__reactEvents$"+Ur,a1="__reactListeners$"+Ur,l1="__reactHandles$"+Ur;function ks(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=om(t);t!==null;){if(n=t[Yt])return n;t=om(t)}return e}t=n,n=t.parentNode}return null}function _o(t){return t=t[Yt]||t[wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function or(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Dl(t){return t[Qi]||null}var Ru=[],ar=-1;function gs(t){return{current:t}}function he(t){0>ar||(t.current=Ru[ar],Ru[ar]=null,ar--)}function ce(t,e){ar++,Ru[ar]=t.current,t.current=e}var cs={},Ge=gs(cs),it=gs(!1),Os=cs;function Cr(t,e){var n=t.type.contextTypes;if(!n)return cs;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ot(t){return t=t.childContextTypes,t!=null}function za(){he(it),he(Ge)}function am(t,e,n){if(Ge.current!==cs)throw Error(P(168));ce(Ge,e),ce(it,n)}function gx(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(P(108,Gw(t)||"Unknown",r));return ve({},n,s)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,Os=Ge.current,ce(Ge,t),ce(it,it.current),!0}function lm(t,e,n){var s=t.stateNode;if(!s)throw Error(P(169));n?(t=gx(t,e,Os),s.__reactInternalMemoizedMergedChildContext=t,he(it),he(Ge),ce(Ge,t)):he(it),ce(it,n)}var an=null,Ol=!1,Rc=!1;function xx(t){an===null?an=[t]:an.push(t)}function c1(t){Ol=!0,xx(t)}function xs(){if(!Rc&&an!==null){Rc=!0;var t=0,e=ne;try{var n=an;for(ne=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}an=null,Ol=!1}catch(r){throw an!==null&&(an=an.slice(t+1)),Bg(Ld,xs),r}finally{ne=e,Rc=!1}}return null}var lr=[],cr=0,Wa=null,Ha=0,bt=[],Nt=0,Ms=null,cn=1,un="";function ws(t,e){lr[cr++]=Ha,lr[cr++]=Wa,Wa=t,Ha=e}function yx(t,e,n){bt[Nt++]=cn,bt[Nt++]=un,bt[Nt++]=Ms,Ms=t;var s=cn;t=un;var r=32-Ut(s)-1;s&=~(1<<r),n+=1;var o=32-Ut(e)+r;if(30<o){var a=r-r%5;o=(s&(1<<a)-1).toString(32),s>>=a,r-=a,cn=1<<32-Ut(e)+r|n<<r|s,un=o+t}else cn=1<<o|n<<r|s,un=t}function Wd(t){t.return!==null&&(ws(t,1),yx(t,1,0))}function Hd(t){for(;t===Wa;)Wa=lr[--cr],lr[cr]=null,Ha=lr[--cr],lr[cr]=null;for(;t===Ms;)Ms=bt[--Nt],bt[Nt]=null,un=bt[--Nt],bt[Nt]=null,cn=bt[--Nt],bt[Nt]=null}var xt=null,pt=null,me=!1,Lt=null;function vx(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,pt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:cn,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,pt=null,!0):!1;default:return!1}}function Au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lu(t){if(me){var e=pt;if(e){var n=e;if(!cm(t,e)){if(Au(t))throw Error(P(418));e=Yn(n.nextSibling);var s=xt;e&&cm(t,e)?vx(s,n):(t.flags=t.flags&-4097|2,me=!1,xt=t)}}else{if(Au(t))throw Error(P(418));t.flags=t.flags&-4097|2,me=!1,xt=t}}}function um(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function Jo(t){if(t!==xt)return!1;if(!me)return um(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Iu(t.type,t.memoizedProps)),e&&(e=pt)){if(Au(t))throw wx(),Error(P(418));for(;e;)vx(t,e),e=Yn(e.nextSibling)}if(um(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=xt?Yn(t.stateNode.nextSibling):null;return!0}function wx(){for(var t=pt;t;)t=Yn(t.nextSibling)}function Er(){pt=xt=null,me=!1}function Vd(t){Lt===null?Lt=[t]:Lt.push(t)}var u1=In.ReactCurrentBatchConfig;function ii(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var s=n.stateNode}if(!s)throw Error(P(147,t));var r=s,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=r.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dm(t){var e=t._init;return e(t._payload)}function _x(t){function e(y,g){if(t){var _=y.deletions;_===null?(y.deletions=[g],y.flags|=16):_.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function s(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function r(y,g){return y=es(y,g),y.index=0,y.sibling=null,y}function o(y,g,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<g?(y.flags|=2,g):_):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,_,b){return g===null||g.tag!==6?(g=Uc(_,y.mode,b),g.return=y,g):(g=r(g,_),g.return=y,g)}function c(y,g,_,b){var N=_.type;return N===nr?h(y,g,_.props.children,b,_.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mn&&dm(N)===g.type)?(b=r(g,_.props),b.ref=ii(y,g,_),b.return=y,b):(b=Na(_.type,_.key,_.props,null,y.mode,b),b.ref=ii(y,g,_),b.return=y,b)}function u(y,g,_,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=$c(_,y.mode,b),g.return=y,g):(g=r(g,_.children||[]),g.return=y,g)}function h(y,g,_,b,N){return g===null||g.tag!==7?(g=Ls(_,y.mode,b,N),g.return=y,g):(g=r(g,_),g.return=y,g)}function f(y,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Uc(""+g,y.mode,_),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zo:return _=Na(g.type,g.key,g.props,null,y.mode,_),_.ref=ii(y,null,g),_.return=y,_;case tr:return g=$c(g,y.mode,_),g.return=y,g;case Mn:var b=g._init;return f(y,b(g._payload),_)}if(mi(g)||ei(g))return g=Ls(g,y.mode,_,null),g.return=y,g;Xo(y,g)}return null}function d(y,g,_,b){var N=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return N!==null?null:l(y,g,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zo:return _.key===N?c(y,g,_,b):null;case tr:return _.key===N?u(y,g,_,b):null;case Mn:return N=_._init,d(y,g,N(_._payload),b)}if(mi(_)||ei(_))return N!==null?null:h(y,g,_,b,null);Xo(y,_)}return null}function v(y,g,_,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,l(g,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zo:return y=y.get(b.key===null?_:b.key)||null,c(g,y,b,N);case tr:return y=y.get(b.key===null?_:b.key)||null,u(g,y,b,N);case Mn:var j=b._init;return v(y,g,_,j(b._payload),N)}if(mi(b)||ei(b))return y=y.get(_)||null,h(g,y,b,N,null);Xo(g,b)}return null}function m(y,g,_,b){for(var N=null,j=null,k=g,T=g=0,E=null;k!==null&&T<_.length;T++){k.index>T?(E=k,k=null):E=k.sibling;var I=d(y,k,_[T],b);if(I===null){k===null&&(k=E);break}t&&k&&I.alternate===null&&e(y,k),g=o(I,g,T),j===null?N=I:j.sibling=I,j=I,k=E}if(T===_.length)return n(y,k),me&&ws(y,T),N;if(k===null){for(;T<_.length;T++)k=f(y,_[T],b),k!==null&&(g=o(k,g,T),j===null?N=k:j.sibling=k,j=k);return me&&ws(y,T),N}for(k=s(y,k);T<_.length;T++)E=v(k,y,T,_[T],b),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?T:E.key),g=o(E,g,T),j===null?N=E:j.sibling=E,j=E);return t&&k.forEach(function(S){return e(y,S)}),me&&ws(y,T),N}function x(y,g,_,b){var N=ei(_);if(typeof N!="function")throw Error(P(150));if(_=N.call(_),_==null)throw Error(P(151));for(var j=N=null,k=g,T=g=0,E=null,I=_.next();k!==null&&!I.done;T++,I=_.next()){k.index>T?(E=k,k=null):E=k.sibling;var S=d(y,k,I.value,b);if(S===null){k===null&&(k=E);break}t&&k&&S.alternate===null&&e(y,k),g=o(S,g,T),j===null?N=S:j.sibling=S,j=S,k=E}if(I.done)return n(y,k),me&&ws(y,T),N;if(k===null){for(;!I.done;T++,I=_.next())I=f(y,I.value,b),I!==null&&(g=o(I,g,T),j===null?N=I:j.sibling=I,j=I);return me&&ws(y,T),N}for(k=s(y,k);!I.done;T++,I=_.next())I=v(k,y,T,I.value,b),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?T:I.key),g=o(I,g,T),j===null?N=I:j.sibling=I,j=I);return t&&k.forEach(function(M){return e(y,M)}),me&&ws(y,T),N}function C(y,g,_,b){if(typeof _=="object"&&_!==null&&_.type===nr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zo:e:{for(var N=_.key,j=g;j!==null;){if(j.key===N){if(N=_.type,N===nr){if(j.tag===7){n(y,j.sibling),g=r(j,_.props.children),g.return=y,y=g;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mn&&dm(N)===j.type){n(y,j.sibling),g=r(j,_.props),g.ref=ii(y,j,_),g.return=y,y=g;break e}n(y,j);break}else e(y,j);j=j.sibling}_.type===nr?(g=Ls(_.props.children,y.mode,b,_.key),g.return=y,y=g):(b=Na(_.type,_.key,_.props,null,y.mode,b),b.ref=ii(y,g,_),b.return=y,y=b)}return a(y);case tr:e:{for(j=_.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(y,g.sibling),g=r(g,_.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=$c(_,y.mode,b),g.return=y,y=g}return a(y);case Mn:return j=_._init,C(y,g,j(_._payload),b)}if(mi(_))return m(y,g,_,b);if(ei(_))return x(y,g,_,b);Xo(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(y,g.sibling),g=r(g,_),g.return=y,y=g):(n(y,g),g=Uc(_,y.mode,b),g.return=y,y=g),a(y)):n(y,g)}return C}var Ir=_x(!0),bx=_x(!1),Va=gs(null),Ga=null,ur=null,Gd=null;function qd(){Gd=ur=Ga=null}function Kd(t){var e=Va.current;he(Va),t._currentValue=e}function Du(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function wr(t,e){Ga=t,Gd=ur=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(st=!0),t.firstContext=null)}function kt(t){var e=t._currentValue;if(Gd!==t)if(t={context:t,memoizedValue:e,next:null},ur===null){if(Ga===null)throw Error(P(308));ur=t,Ga.dependencies={lanes:0,firstContext:t}}else ur=ur.next=t;return e}var Cs=null;function Qd(t){Cs===null?Cs=[t]:Cs.push(t)}function Nx(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Qd(e)):(n.next=r.next,r.next=n),e.interleaved=n,_n(t,s)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function Yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,X&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,_n(t,n)}return r=s.interleaved,r===null?(e.next=e,Qd(s)):(e.next=r.next,r.next=e),s.interleaved=e,_n(t,n)}function xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dd(t,n)}}function hm(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qa(t,e,n,s){var r=t.updateQueue;Fn=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var f=r.baseState;a=0,h=u=c=null,l=o;do{var d=l.lane,v=l.eventTime;if((s&d)===d){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,x=l;switch(d=e,v=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){f=m.call(v,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,d=typeof m=="function"?m.call(v,f,d):m,d==null)break e;f=ve({},f,d);break e;case 2:Fn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[l]:d.push(l))}else v={eventTime:v,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,c=f):h=h.next=v,a|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Us|=a,t.lanes=a,t.memoizedState=f}}function fm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(P(191,r));r.call(s)}}}var bo={},Zt=gs(bo),Yi=gs(bo),Ji=gs(bo);function Es(t){if(t===bo)throw Error(P(174));return t}function Jd(t,e){switch(ce(Ji,e),ce(Yi,t),ce(Zt,bo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pu(e,t)}he(Zt),ce(Zt,e)}function Tr(){he(Zt),he(Yi),he(Ji)}function Sx(t){Es(Ji.current);var e=Es(Zt.current),n=pu(e,t.type);e!==n&&(ce(Yi,t),ce(Zt,n))}function Xd(t){Yi.current===t&&(he(Zt),he(Yi))}var ge=gs(0);function Ka(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ac=[];function Zd(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var ya=In.ReactCurrentDispatcher,Lc=In.ReactCurrentBatchConfig,Fs=0,ye=null,ke=null,Re=null,Qa=!1,ji=!1,Xi=0,d1=0;function Be(){throw Error(P(321))}function eh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function th(t,e,n,s,r,o){if(Fs=o,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ya.current=t===null||t.memoizedState===null?p1:g1,t=n(s,r),ji){o=0;do{if(ji=!1,Xi=0,25<=o)throw Error(P(301));o+=1,Re=ke=null,e.updateQueue=null,ya.current=x1,t=n(s,r)}while(ji)}if(ya.current=Ya,e=ke!==null&&ke.next!==null,Fs=0,Re=ke=ye=null,Qa=!1,e)throw Error(P(300));return t}function nh(){var t=Xi!==0;return Xi=0,t}function Kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ye.memoizedState=Re=t:Re=Re.next=t,Re}function Ct(){if(ke===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Re===null?ye.memoizedState:Re.next;if(e!==null)Re=e,ke=t;else{if(t===null)throw Error(P(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Re===null?ye.memoizedState=Re=t:Re=Re.next=t}return Re}function Zi(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=Ct(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var s=ke,r=s.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}s.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,s=s.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((Fs&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=s):c=c.next=f,ye.lanes|=h,Us|=h}u=u.next}while(u!==null&&u!==o);c===null?a=s:c.next=l,Wt(s,e.memoizedState)||(st=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ye.lanes|=o,Us|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oc(t){var e=Ct(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Wt(o,e.memoizedState)||(st=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,s]}function kx(){}function Cx(t,e){var n=ye,s=Ct(),r=e(),o=!Wt(s.memoizedState,r);if(o&&(s.memoizedState=r,st=!0),s=s.queue,sh(Tx.bind(null,n,s,t),[t]),s.getSnapshot!==e||o||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,eo(9,Ix.bind(null,n,s,r,e),void 0,null),De===null)throw Error(P(349));Fs&30||Ex(n,e,r)}return r}function Ex(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ix(t,e,n,s){e.value=n,e.getSnapshot=s,Px(e)&&Rx(t)}function Tx(t,e,n){return n(function(){Px(e)&&Rx(t)})}function Px(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function Rx(t){var e=_n(t,1);e!==null&&$t(e,t,1,-1)}function mm(t){var e=Kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:t},e.queue=t,t=t.dispatch=m1.bind(null,ye,t),[e.memoizedState,t]}function eo(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Ax(){return Ct().memoizedState}function va(t,e,n,s){var r=Kt();ye.flags|=t,r.memoizedState=eo(1|e,n,void 0,s===void 0?null:s)}function Ml(t,e,n,s){var r=Ct();s=s===void 0?null:s;var o=void 0;if(ke!==null){var a=ke.memoizedState;if(o=a.destroy,s!==null&&eh(s,a.deps)){r.memoizedState=eo(e,n,o,s);return}}ye.flags|=t,r.memoizedState=eo(1|e,n,o,s)}function pm(t,e){return va(8390656,8,t,e)}function sh(t,e){return Ml(2048,8,t,e)}function Lx(t,e){return Ml(4,2,t,e)}function Dx(t,e){return Ml(4,4,t,e)}function Ox(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mx(t,e,n){return n=n!=null?n.concat([t]):null,Ml(4,4,Ox.bind(null,e,t),n)}function rh(){}function Fx(t,e){var n=Ct();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&eh(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Ux(t,e){var n=Ct();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&eh(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function $x(t,e,n){return Fs&21?(Wt(n,e)||(n=Vg(),ye.lanes|=n,Us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,st=!0),t.memoizedState=n)}function h1(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var s=Lc.transition;Lc.transition={};try{t(!1),e()}finally{ne=n,Lc.transition=s}}function zx(){return Ct().memoizedState}function f1(t,e,n){var s=Zn(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Bx(t))Wx(e,n);else if(n=Nx(t,e,n,s),n!==null){var r=Ye();$t(n,t,s,r),Hx(n,e,s)}}function m1(t,e,n){var s=Zn(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bx(t))Wx(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(r.hasEagerState=!0,r.eagerState=l,Wt(l,a)){var c=e.interleaved;c===null?(r.next=r,Qd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Nx(t,e,r,s),n!==null&&(r=Ye(),$t(n,t,s,r),Hx(n,e,s))}}function Bx(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function Wx(t,e){ji=Qa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hx(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dd(t,n)}}var Ya={readContext:kt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},p1={readContext:kt,useCallback:function(t,e){return Kt().memoizedState=[t,e===void 0?null:e],t},useContext:kt,useEffect:pm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,va(4194308,4,Ox.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4194308,4,t,e)},useInsertionEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=Kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Kt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=f1.bind(null,ye,t),[s.memoizedState,t]},useRef:function(t){var e=Kt();return t={current:t},e.memoizedState=t},useState:mm,useDebugValue:rh,useDeferredValue:function(t){return Kt().memoizedState=t},useTransition:function(){var t=mm(!1),e=t[0];return t=h1.bind(null,t[1]),Kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ye,r=Kt();if(me){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),De===null)throw Error(P(349));Fs&30||Ex(s,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,pm(Tx.bind(null,s,o,t),[t]),s.flags|=2048,eo(9,Ix.bind(null,s,o,n,e),void 0,null),n},useId:function(){var t=Kt(),e=De.identifierPrefix;if(me){var n=un,s=cn;n=(s&~(1<<32-Ut(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=d1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g1={readContext:kt,useCallback:Fx,useContext:kt,useEffect:sh,useImperativeHandle:Mx,useInsertionEffect:Lx,useLayoutEffect:Dx,useMemo:Ux,useReducer:Dc,useRef:Ax,useState:function(){return Dc(Zi)},useDebugValue:rh,useDeferredValue:function(t){var e=Ct();return $x(e,ke.memoizedState,t)},useTransition:function(){var t=Dc(Zi)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:kx,useSyncExternalStore:Cx,useId:zx,unstable_isNewReconciler:!1},x1={readContext:kt,useCallback:Fx,useContext:kt,useEffect:sh,useImperativeHandle:Mx,useInsertionEffect:Lx,useLayoutEffect:Dx,useMemo:Ux,useReducer:Oc,useRef:Ax,useState:function(){return Oc(Zi)},useDebugValue:rh,useDeferredValue:function(t){var e=Ct();return ke===null?e.memoizedState=t:$x(e,ke.memoizedState,t)},useTransition:function(){var t=Oc(Zi)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:kx,useSyncExternalStore:Cx,useId:zx,unstable_isNewReconciler:!1};function Rt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ou(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fl={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ye(),r=Zn(t),o=mn(s,r);o.payload=e,n!=null&&(o.callback=n),e=Jn(t,o,r),e!==null&&($t(e,t,r,s),xa(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ye(),r=Zn(t),o=mn(s,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Jn(t,o,r),e!==null&&($t(e,t,r,s),xa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ye(),s=Zn(t),r=mn(n,s);r.tag=2,e!=null&&(r.callback=e),e=Jn(t,r,s),e!==null&&($t(e,t,s,n),xa(e,t,s))}};function gm(t,e,n,s,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,a):e.prototype&&e.prototype.isPureReactComponent?!Gi(n,s)||!Gi(r,o):!0}function Vx(t,e,n){var s=!1,r=cs,o=e.contextType;return typeof o=="object"&&o!==null?o=kt(o):(r=ot(e)?Os:Ge.current,s=e.contextTypes,o=(s=s!=null)?Cr(t,r):cs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function xm(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Fl.enqueueReplaceState(e,e.state,null)}function Mu(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Yd(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=kt(o):(o=ot(e)?Os:Ge.current,r.context=Cr(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ou(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Fl.enqueueReplaceState(r,r.state,null),qa(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Pr(t,e){try{var n="",s=e;do n+=Vw(s),s=s.return;while(s);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var y1=typeof WeakMap=="function"?WeakMap:Map;function Gx(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Xa||(Xa=!0,Ku=s),Fu(t,e)},n}function qx(t,e,n){n=mn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Fu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Fu(t,e),typeof s!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ym(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new y1;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=R1.bind(null,t,e,n),e.then(t,t))}function vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wm(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var v1=In.ReactCurrentOwner,st=!1;function qe(t,e,n,s){e.child=t===null?bx(e,null,n,s):Ir(e,t.child,n,s)}function _m(t,e,n,s,r){n=n.render;var o=e.ref;return wr(e,r),s=th(t,e,n,s,o,r),n=nh(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bn(t,e,r)):(me&&n&&Wd(e),e.flags|=1,qe(t,e,s,r),e.child)}function bm(t,e,n,s,r){if(t===null){var o=n.type;return typeof o=="function"&&!hh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kx(t,e,o,s,r)):(t=Na(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Gi,n(a,s)&&t.ref===e.ref)return bn(t,e,r)}return e.flags|=1,t=es(o,s),t.ref=e.ref,t.return=e,e.child=t}function Kx(t,e,n,s,r){if(t!==null){var o=t.memoizedProps;if(Gi(o,s)&&t.ref===e.ref)if(st=!1,e.pendingProps=s=o,(t.lanes&r)!==0)t.flags&131072&&(st=!0);else return e.lanes=t.lanes,bn(t,e,r)}return Uu(t,e,n,s,r)}function Qx(t,e,n){var s=e.pendingProps,r=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(hr,ft),ft|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(hr,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,ce(hr,ft),ft|=s}else o!==null?(s=o.baseLanes|n,e.memoizedState=null):s=n,ce(hr,ft),ft|=s;return qe(t,e,r,n),e.child}function Yx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uu(t,e,n,s,r){var o=ot(n)?Os:Ge.current;return o=Cr(e,o),wr(e,r),n=th(t,e,n,s,o,r),s=nh(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bn(t,e,r)):(me&&s&&Wd(e),e.flags|=1,qe(t,e,n,r),e.child)}function Nm(t,e,n,s,r){if(ot(n)){var o=!0;Ba(e)}else o=!1;if(wr(e,r),e.stateNode===null)wa(t,e),Vx(e,n,s),Mu(e,n,s,r),s=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=ot(n)?Os:Ge.current,u=Cr(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&xm(e,a,s,u),Fn=!1;var d=e.memoizedState;a.state=d,qa(e,s,a,r),c=e.memoizedState,l!==s||d!==c||it.current||Fn?(typeof h=="function"&&(Ou(e,n,h,s),c=e.memoizedState),(l=Fn||gm(e,n,l,s,d,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,jx(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Rt(e.type,l),a.props=u,f=e.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kt(c):(c=ot(n)?Os:Ge.current,c=Cr(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||d!==c)&&xm(e,a,s,c),Fn=!1,d=e.memoizedState,a.state=d,qa(e,s,a,r);var m=e.memoizedState;l!==f||d!==m||it.current||Fn?(typeof v=="function"&&(Ou(e,n,v,s),m=e.memoizedState),(u=Fn||gm(e,n,u,s,d,m,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),a.props=s,a.state=m,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return $u(t,e,n,s,o,r)}function $u(t,e,n,s,r,o){Yx(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&lm(e,n,!1),bn(t,e,o);s=e.stateNode,v1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=Ir(e,t.child,null,o),e.child=Ir(e,null,l,o)):qe(t,e,l,o),e.memoizedState=s.state,r&&lm(e,n,!0),e.child}function Jx(t){var e=t.stateNode;e.pendingContext?am(t,e.pendingContext,e.pendingContext!==e.context):e.context&&am(t,e.context,!1),Jd(t,e.containerInfo)}function jm(t,e,n,s,r){return Er(),Vd(r),e.flags|=256,qe(t,e,n,s),e.child}var zu={dehydrated:null,treeContext:null,retryLane:0};function Bu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xx(t,e,n){var s=e.pendingProps,r=ge.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ce(ge,r&1),t===null)return Lu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,t=s.fallback,o?(s=e.mode,o=e.child,a={mode:"hidden",children:a},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=zl(a,s,0,null),t=Ls(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Bu(n),e.memoizedState=zu,t):ih(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return w1(t,e,a,s,l,r,n);if(o){o=s.fallback,a=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=es(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=es(l,o):(o=Ls(o,a,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,a=t.child.memoizedState,a=a===null?Bu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=zu,s}return o=t.child,t=o.sibling,s=es(o,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function ih(t,e){return e=zl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zo(t,e,n,s){return s!==null&&Vd(s),Ir(e,t.child,null,n),t=ih(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w1(t,e,n,s,r,o,a){if(n)return e.flags&256?(e.flags&=-257,s=Mc(Error(P(422))),Zo(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=s.fallback,r=e.mode,s=zl({mode:"visible",children:s.children},r,0,null),o=Ls(o,r,a,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,e.mode&1&&Ir(e,t.child,null,a),e.child.memoizedState=Bu(a),e.memoizedState=zu,o);if(!(e.mode&1))return Zo(t,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(P(419)),s=Mc(o,s,void 0),Zo(t,e,a,s)}if(l=(a&t.childLanes)!==0,st||l){if(s=De,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,_n(t,r),$t(s,t,r,-1))}return dh(),s=Mc(Error(P(421))),Zo(t,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=A1.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,pt=Yn(r.nextSibling),xt=e,me=!0,Lt=null,t!==null&&(bt[Nt++]=cn,bt[Nt++]=un,bt[Nt++]=Ms,cn=t.id,un=t.overflow,Ms=e),e=ih(e,s.children),e.flags|=4096,e)}function Sm(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Du(t.return,e,n)}function Fc(t,e,n,s,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=r)}function Zx(t,e,n){var s=e.pendingProps,r=s.revealOrder,o=s.tail;if(qe(t,e,s.children,n),s=ge.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sm(t,n,e);else if(t.tag===19)Sm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ce(ge,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ka(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Fc(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ka(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Fc(e,!0,n,null,o);break;case"together":Fc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _1(t,e,n){switch(e.tag){case 3:Jx(e),Er();break;case 5:Sx(e);break;case 1:ot(e.type)&&Ba(e);break;case 4:Jd(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ce(Va,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ce(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Xx(t,e,n):(ce(ge,ge.current&1),t=bn(t,e,n),t!==null?t.sibling:null);ce(ge,ge.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Zx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ce(ge,ge.current),s)break;return null;case 22:case 23:return e.lanes=0,Qx(t,e,n)}return bn(t,e,n)}var ey,Wu,ty,ny;ey=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wu=function(){};ty=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Es(Zt.current);var o=null;switch(n){case"input":r=du(t,r),s=du(t,s),o=[];break;case"select":r=ve({},r,{value:void 0}),s=ve({},s,{value:void 0}),o=[];break;case"textarea":r=mu(t,r),s=mu(t,s),o=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=$a)}gu(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ui.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ui.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};ny=function(t,e,n,s){n!==s&&(e.flags|=4)};function oi(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function b1(t,e,n){var s=e.pendingProps;switch(Hd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return ot(e.type)&&za(),We(e),null;case 3:return s=e.stateNode,Tr(),he(it),he(Ge),Zd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lt!==null&&(Ju(Lt),Lt=null))),Wu(t,e),We(e),null;case 5:Xd(e);var r=Es(Ji.current);if(n=e.type,t!==null&&e.stateNode!=null)ty(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(P(166));return We(e),null}if(t=Es(Zt.current),Jo(e)){s=e.stateNode,n=e.type;var o=e.memoizedProps;switch(s[Yt]=e,s[Qi]=o,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",s),ue("close",s);break;case"iframe":case"object":case"embed":ue("load",s);break;case"video":case"audio":for(r=0;r<gi.length;r++)ue(gi[r],s);break;case"source":ue("error",s);break;case"img":case"image":case"link":ue("error",s),ue("load",s);break;case"details":ue("toggle",s);break;case"input":Lf(s,o),ue("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},ue("invalid",s);break;case"textarea":Of(s,o),ue("invalid",s)}gu(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&Yo(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Yo(s.textContent,l,t),r=["children",""+l]):Ui.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ue("scroll",s)}switch(n){case"input":Bo(s),Df(s,o,!0);break;case"textarea":Bo(s),Mf(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=$a)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(n,{is:s.is}):(t=a.createElement(n),n==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,n),t[Yt]=e,t[Qi]=s,ey(t,e,!1,!1),e.stateNode=t;e:{switch(a=xu(n,s),n){case"dialog":ue("cancel",t),ue("close",t),r=s;break;case"iframe":case"object":case"embed":ue("load",t),r=s;break;case"video":case"audio":for(r=0;r<gi.length;r++)ue(gi[r],t);r=s;break;case"source":ue("error",t),r=s;break;case"img":case"image":case"link":ue("error",t),ue("load",t),r=s;break;case"details":ue("toggle",t),r=s;break;case"input":Lf(t,s),r=du(t,s),ue("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=ve({},s,{value:void 0}),ue("invalid",t);break;case"textarea":Of(t,s),r=mu(t,s),ue("invalid",t);break;default:r=s}gu(n,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Ag(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pg(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$i(t,c):typeof c=="number"&&$i(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ui.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ue("scroll",t):c!=null&&Id(t,o,c,a))}switch(n){case"input":Bo(t),Df(t,s,!1);break;case"textarea":Bo(t),Mf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ls(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?gr(t,!!s.multiple,o,!1):s.defaultValue!=null&&gr(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=$a)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)ny(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(P(166));if(n=Es(Ji.current),Es(Zt.current),Jo(e)){if(s=e.stateNode,n=e.memoizedProps,s[Yt]=e,(o=s.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:Yo(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yo(s.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Yt]=e,e.stateNode=s}return We(e),null;case 13:if(he(ge),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&pt!==null&&e.mode&1&&!(e.flags&128))wx(),Er(),e.flags|=98560,o=!1;else if(o=Jo(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(P(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(P(317));o[Yt]=e}else Er(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),o=!1}else Lt!==null&&(Ju(Lt),Lt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Ie===0&&(Ie=3):dh())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return Tr(),Wu(t,e),t===null&&qi(e.stateNode.containerInfo),We(e),null;case 10:return Kd(e.type._context),We(e),null;case 17:return ot(e.type)&&za(),We(e),null;case 19:if(he(ge),o=e.memoizedState,o===null)return We(e),null;if(s=(e.flags&128)!==0,a=o.rendering,a===null)if(s)oi(o,!1);else{if(Ie!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ka(t),a!==null){for(e.flags|=128,oi(o,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)o=n,t=s,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(ge,ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ne()>Rr&&(e.flags|=128,s=!0,oi(o,!1),e.lanes=4194304)}else{if(!s)if(t=Ka(a),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!me)return We(e),null}else 2*Ne()-o.renderingStartTime>Rr&&n!==1073741824&&(e.flags|=128,s=!0,oi(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ne(),e.sibling=null,n=ge.current,ce(ge,s?n&1|2:n&1),e):(We(e),null);case 22:case 23:return uh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ft&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function N1(t,e){switch(Hd(e),e.tag){case 1:return ot(e.type)&&za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tr(),he(it),he(Ge),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xd(e),null;case 13:if(he(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Er()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ge),null;case 4:return Tr(),null;case 10:return Kd(e.type._context),null;case 22:case 23:return uh(),null;case 24:return null;default:return null}}var ea=!1,He=!1,j1=typeof WeakSet=="function"?WeakSet:Set,U=null;function dr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){_e(t,e,s)}else n.current=null}function Hu(t,e,n){try{n()}catch(s){_e(t,e,s)}}var km=!1;function S1(t,e){if(Cu=Ma,t=ax(),Bd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=t,d=null;t:for(;;){for(var v;f!==n||r!==0&&f.nodeType!==3||(l=a+r),f!==o||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)d=f,f=v;for(;;){if(f===t)break t;if(d===n&&++u===r&&(l=a),d===o&&++h===s&&(c=a),(v=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Eu={focusedElem:t,selectionRange:n},Ma=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,C=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Rt(e.type,x),C);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(b){_e(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return m=km,km=!1,m}function Si(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Hu(e,n,o)}r=r.next}while(r!==s)}}function Ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Vu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sy(t){var e=t.alternate;e!==null&&(t.alternate=null,sy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Qi],delete e[Pu],delete e[a1],delete e[l1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ry(t){return t.tag===5||t.tag===3||t.tag===4}function Cm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$a));else if(s!==4&&(t=t.child,t!==null))for(Gu(t,e,n),t=t.sibling;t!==null;)Gu(t,e,n),t=t.sibling}function qu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(qu(t,e,n),t=t.sibling;t!==null;)qu(t,e,n),t=t.sibling}var Fe=null,At=!1;function Dn(t,e,n){for(n=n.child;n!==null;)iy(t,e,n),n=n.sibling}function iy(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:He||dr(n,e);case 6:var s=Fe,r=At;Fe=null,Dn(t,e,n),Fe=s,At=r,Fe!==null&&(At?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(At?(t=Fe,n=n.stateNode,t.nodeType===8?Pc(t.parentNode,n):t.nodeType===1&&Pc(t,n),Hi(t)):Pc(Fe,n.stateNode));break;case 4:s=Fe,r=At,Fe=n.stateNode.containerInfo,At=!0,Dn(t,e,n),Fe=s,At=r;break;case 0:case 11:case 14:case 15:if(!He&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Hu(n,e,a),r=r.next}while(r!==s)}Dn(t,e,n);break;case 1:if(!He&&(dr(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){_e(n,e,l)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(He=(s=He)||n.memoizedState!==null,Dn(t,e,n),He=s):Dn(t,e,n);break;default:Dn(t,e,n)}}function Em(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new j1),e.forEach(function(s){var r=L1.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Tt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,At=!1;break e;case 3:Fe=l.stateNode.containerInfo,At=!0;break e;case 4:Fe=l.stateNode.containerInfo,At=!0;break e}l=l.return}if(Fe===null)throw Error(P(160));iy(o,a,r),Fe=null,At=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){_e(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oy(e,t),e=e.sibling}function oy(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tt(e,t),qt(t),s&4){try{Si(3,t,t.return),Ul(3,t)}catch(x){_e(t,t.return,x)}try{Si(5,t,t.return)}catch(x){_e(t,t.return,x)}}break;case 1:Tt(e,t),qt(t),s&512&&n!==null&&dr(n,n.return);break;case 5:if(Tt(e,t),qt(t),s&512&&n!==null&&dr(n,n.return),t.flags&32){var r=t.stateNode;try{$i(r,"")}catch(x){_e(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Eg(r,o),xu(l,a);var u=xu(l,o);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?Ag(r,f):h==="dangerouslySetInnerHTML"?Pg(r,f):h==="children"?$i(r,f):Id(r,h,f,u)}switch(l){case"input":hu(r,o);break;case"textarea":Ig(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?gr(r,!!o.multiple,v,!1):d!==!!o.multiple&&(o.defaultValue!=null?gr(r,!!o.multiple,o.defaultValue,!0):gr(r,!!o.multiple,o.multiple?[]:"",!1))}r[Qi]=o}catch(x){_e(t,t.return,x)}}break;case 6:if(Tt(e,t),qt(t),s&4){if(t.stateNode===null)throw Error(P(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(x){_e(t,t.return,x)}}break;case 3:if(Tt(e,t),qt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Hi(e.containerInfo)}catch(x){_e(t,t.return,x)}break;case 4:Tt(e,t),qt(t);break;case 13:Tt(e,t),qt(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(lh=Ne())),s&4&&Em(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(He=(u=He)||h,Tt(e,t),He=u):Tt(e,t),qt(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(U=t,h=t.child;h!==null;){for(f=U=h;U!==null;){switch(d=U,v=d.child,d.tag){case 0:case 11:case 14:case 15:Si(4,d,d.return);break;case 1:dr(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){s=d,n=d.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){_e(s,n,x)}}break;case 5:dr(d,d.return);break;case 22:if(d.memoizedState!==null){Tm(f);continue}}v!==null?(v.return=d,U=v):Tm(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Rg("display",a))}catch(x){_e(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){_e(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tt(e,t),qt(t),s&4&&Em(t);break;case 21:break;default:Tt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ry(n)){var s=n;break e}n=n.return}throw Error(P(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($i(r,""),s.flags&=-33);var o=Cm(t);qu(t,o,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=Cm(t);Gu(t,l,a);break;default:throw Error(P(161))}}catch(c){_e(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k1(t,e,n){U=t,ay(t)}function ay(t,e,n){for(var s=(t.mode&1)!==0;U!==null;){var r=U,o=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||ea;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||He;l=ea;var u=He;if(ea=a,(He=c)&&!u)for(U=r;U!==null;)a=U,c=a.child,a.tag===22&&a.memoizedState!==null?Pm(r):c!==null?(c.return=a,U=c):Pm(r);for(;o!==null;)U=o,ay(o),o=o.sibling;U=r,ea=l,He=u}Im(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,U=o):Im(t)}}function Im(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:He||Ul(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!He)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Rt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&fm(e,o,s);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fm(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Hi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}He||e.flags&512&&Vu(e)}catch(d){_e(e,e.return,d)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Tm(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Pm(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ul(4,e)}catch(c){_e(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){_e(e,r,c)}}var o=e.return;try{Vu(e)}catch(c){_e(e,o,c)}break;case 5:var a=e.return;try{Vu(e)}catch(c){_e(e,a,c)}}}catch(c){_e(e,e.return,c)}if(e===t){U=null;break}var l=e.sibling;if(l!==null){l.return=e.return,U=l;break}U=e.return}}var C1=Math.ceil,Ja=In.ReactCurrentDispatcher,oh=In.ReactCurrentOwner,St=In.ReactCurrentBatchConfig,X=0,De=null,je=null,Ue=0,ft=0,hr=gs(0),Ie=0,to=null,Us=0,$l=0,ah=0,ki=null,tt=null,lh=0,Rr=1/0,on=null,Xa=!1,Ku=null,Xn=null,ta=!1,Gn=null,Za=0,Ci=0,Qu=null,_a=-1,ba=0;function Ye(){return X&6?Ne():_a!==-1?_a:_a=Ne()}function Zn(t){return t.mode&1?X&2&&Ue!==0?Ue&-Ue:u1.transition!==null?(ba===0&&(ba=Vg()),ba):(t=ne,t!==0||(t=window.event,t=t===void 0?16:Xg(t.type)),t):1}function $t(t,e,n,s){if(50<Ci)throw Ci=0,Qu=null,Error(P(185));vo(t,n,s),(!(X&2)||t!==De)&&(t===De&&(!(X&2)&&($l|=n),Ie===4&&$n(t,Ue)),at(t,s),n===1&&X===0&&!(e.mode&1)&&(Rr=Ne()+500,Ol&&xs()))}function at(t,e){var n=t.callbackNode;u_(t,e);var s=Oa(t,t===De?Ue:0);if(s===0)n!==null&&$f(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&$f(n),e===1)t.tag===0?c1(Rm.bind(null,t)):xx(Rm.bind(null,t)),i1(function(){!(X&6)&&xs()}),n=null;else{switch(Gg(s)){case 1:n=Ld;break;case 4:n=Wg;break;case 16:n=Da;break;case 536870912:n=Hg;break;default:n=Da}n=py(n,ly.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ly(t,e){if(_a=-1,ba=0,X&6)throw Error(P(327));var n=t.callbackNode;if(_r()&&t.callbackNode!==n)return null;var s=Oa(t,t===De?Ue:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=el(t,s);else{e=s;var r=X;X|=2;var o=uy();(De!==t||Ue!==e)&&(on=null,Rr=Ne()+500,As(t,e));do try{T1();break}catch(l){cy(t,l)}while(!0);qd(),Ja.current=o,X=r,je!==null?e=0:(De=null,Ue=0,e=Ie)}if(e!==0){if(e===2&&(r=bu(t),r!==0&&(s=r,e=Yu(t,r))),e===1)throw n=to,As(t,0),$n(t,s),at(t,Ne()),n;if(e===6)$n(t,s);else{if(r=t.current.alternate,!(s&30)&&!E1(r)&&(e=el(t,s),e===2&&(o=bu(t),o!==0&&(s=o,e=Yu(t,o))),e===1))throw n=to,As(t,0),$n(t,s),at(t,Ne()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(P(345));case 2:_s(t,tt,on);break;case 3:if($n(t,s),(s&130023424)===s&&(e=lh+500-Ne(),10<e)){if(Oa(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Ye(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Tu(_s.bind(null,t,tt,on),e);break}_s(t,tt,on);break;case 4:if($n(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var a=31-Ut(s);o=1<<a,a=e[a],a>r&&(r=a),s&=~o}if(s=r,s=Ne()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*C1(s/1960))-s,10<s){t.timeoutHandle=Tu(_s.bind(null,t,tt,on),s);break}_s(t,tt,on);break;case 5:_s(t,tt,on);break;default:throw Error(P(329))}}}return at(t,Ne()),t.callbackNode===n?ly.bind(null,t):null}function Yu(t,e){var n=ki;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=el(t,e),t!==2&&(e=tt,tt=n,e!==null&&Ju(e)),t}function Ju(t){tt===null?tt=t:tt.push.apply(tt,t)}function E1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],o=r.getSnapshot;r=r.value;try{if(!Wt(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~ah,e&=~$l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),s=1<<n;t[n]=-1,e&=~s}}function Rm(t){if(X&6)throw Error(P(327));_r();var e=Oa(t,0);if(!(e&1))return at(t,Ne()),null;var n=el(t,e);if(t.tag!==0&&n===2){var s=bu(t);s!==0&&(e=s,n=Yu(t,s))}if(n===1)throw n=to,As(t,0),$n(t,e),at(t,Ne()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,tt,on),at(t,Ne()),null}function ch(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(Rr=Ne()+500,Ol&&xs())}}function $s(t){Gn!==null&&Gn.tag===0&&!(X&6)&&_r();var e=X;X|=1;var n=St.transition,s=ne;try{if(St.transition=null,ne=1,t)return t()}finally{ne=s,St.transition=n,X=e,!(X&6)&&xs()}}function uh(){ft=hr.current,he(hr)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r1(n)),je!==null)for(n=je.return;n!==null;){var s=n;switch(Hd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&za();break;case 3:Tr(),he(it),he(Ge),Zd();break;case 5:Xd(s);break;case 4:Tr();break;case 13:he(ge);break;case 19:he(ge);break;case 10:Kd(s.type._context);break;case 22:case 23:uh()}n=n.return}if(De=t,je=t=es(t.current,null),Ue=ft=e,Ie=0,to=null,ah=$l=Us=0,tt=ki=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,s.next=a}n.pending=s}Cs=null}return t}function cy(t,e){do{var n=je;try{if(qd(),ya.current=Ya,Qa){for(var s=ye.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Qa=!1}if(Fs=0,Re=ke=ye=null,ji=!1,Xi=0,oh.current=null,n===null||n.return===null){Ie=1,to=e,je=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=Ue,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=vm(a);if(v!==null){v.flags&=-257,wm(v,a,l,o,e),v.mode&1&&ym(o,u,e),e=v,c=u;var m=e.updateQueue;if(m===null){var x=new Set;x.add(c),e.updateQueue=x}else m.add(c);break e}else{if(!(e&1)){ym(o,u,e),dh();break e}c=Error(P(426))}}else if(me&&l.mode&1){var C=vm(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),wm(C,a,l,o,e),Vd(Pr(c,l));break e}}o=c=Pr(c,l),Ie!==4&&(Ie=2),ki===null?ki=[o]:ki.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=Gx(o,c,e);hm(o,y);break e;case 1:l=c;var g=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xn===null||!Xn.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=qx(o,l,e);hm(o,b);break e}}o=o.return}while(o!==null)}hy(n)}catch(N){e=N,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function uy(){var t=Ja.current;return Ja.current=Ya,t===null?Ya:t}function dh(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),De===null||!(Us&268435455)&&!($l&268435455)||$n(De,Ue)}function el(t,e){var n=X;X|=2;var s=uy();(De!==t||Ue!==e)&&(on=null,As(t,e));do try{I1();break}catch(r){cy(t,r)}while(!0);if(qd(),X=n,Ja.current=s,je!==null)throw Error(P(261));return De=null,Ue=0,Ie}function I1(){for(;je!==null;)dy(je)}function T1(){for(;je!==null&&!t_();)dy(je)}function dy(t){var e=my(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?hy(t):je=e,oh.current=null}function hy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N1(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ie=6,je=null;return}}else if(n=b1(n,e,ft),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ie===0&&(Ie=5)}function _s(t,e,n){var s=ne,r=St.transition;try{St.transition=null,ne=1,P1(t,e,n,s)}finally{St.transition=r,ne=s}return null}function P1(t,e,n,s){do _r();while(Gn!==null);if(X&6)throw Error(P(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(d_(t,o),t===De&&(je=De=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ta||(ta=!0,py(Da,function(){return _r(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=St.transition,St.transition=null;var a=ne;ne=1;var l=X;X|=4,oh.current=null,S1(t,n),oy(n,t),J_(Eu),Ma=!!Cu,Eu=Cu=null,t.current=n,k1(n),n_(),X=l,ne=a,St.transition=o}else t.current=n;if(ta&&(ta=!1,Gn=t,Za=r),o=t.pendingLanes,o===0&&(Xn=null),i_(n.stateNode),at(t,Ne()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Xa)throw Xa=!1,t=Ku,Ku=null,t;return Za&1&&t.tag!==0&&_r(),o=t.pendingLanes,o&1?t===Qu?Ci++:(Ci=0,Qu=t):Ci=0,xs(),null}function _r(){if(Gn!==null){var t=Gg(Za),e=St.transition,n=ne;try{if(St.transition=null,ne=16>t?16:t,Gn===null)var s=!1;else{if(t=Gn,Gn=null,Za=0,X&6)throw Error(P(331));var r=X;for(X|=4,U=t.current;U!==null;){var o=U,a=o.child;if(U.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(U=u;U!==null;){var h=U;switch(h.tag){case 0:case 11:case 15:Si(8,h,o)}var f=h.child;if(f!==null)f.return=h,U=f;else for(;U!==null;){h=U;var d=h.sibling,v=h.return;if(sy(h),h===u){U=null;break}if(d!==null){d.return=v,U=d;break}U=v}}}var m=o.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}U=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,U=a;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Si(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,U=y;break e}U=o.return}}var g=t.current;for(U=g;U!==null;){a=U;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,U=_;else e:for(a=g;U!==null;){if(l=U,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ul(9,l)}}catch(N){_e(l,l.return,N)}if(l===a){U=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,U=b;break e}U=l.return}}if(X=r,xs(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Pl,t)}catch{}s=!0}return s}finally{ne=n,St.transition=e}}return!1}function Am(t,e,n){e=Pr(n,e),e=Gx(t,e,1),t=Jn(t,e,1),e=Ye(),t!==null&&(vo(t,1,e),at(t,e))}function _e(t,e,n){if(t.tag===3)Am(t,t,n);else for(;e!==null;){if(e.tag===3){Am(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Xn===null||!Xn.has(s))){t=Pr(n,t),t=qx(e,t,1),e=Jn(e,t,1),t=Ye(),e!==null&&(vo(e,1,t),at(e,t));break}}e=e.return}}function R1(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Ye(),t.pingedLanes|=t.suspendedLanes&n,De===t&&(Ue&n)===n&&(Ie===4||Ie===3&&(Ue&130023424)===Ue&&500>Ne()-lh?As(t,0):ah|=n),at(t,e)}function fy(t,e){e===0&&(t.mode&1?(e=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):e=1);var n=Ye();t=_n(t,e),t!==null&&(vo(t,e,n),at(t,n))}function A1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fy(t,n)}function L1(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(P(314))}s!==null&&s.delete(e),fy(t,n)}var my;my=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||it.current)st=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return st=!1,_1(t,e,n);st=!!(t.flags&131072)}else st=!1,me&&e.flags&1048576&&yx(e,Ha,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;wa(t,e),t=e.pendingProps;var r=Cr(e,Ge.current);wr(e,n),r=th(null,e,s,t,r,n);var o=nh();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ot(s)?(o=!0,Ba(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yd(e),r.updater=Fl,e.stateNode=r,r._reactInternals=e,Mu(e,s,t,n),e=$u(null,e,s,!0,o,n)):(e.tag=0,me&&o&&Wd(e),qe(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(wa(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=O1(s),t=Rt(s,t),r){case 0:e=Uu(null,e,s,t,n);break e;case 1:e=Nm(null,e,s,t,n);break e;case 11:e=_m(null,e,s,t,n);break e;case 14:e=bm(null,e,s,Rt(s.type,t),n);break e}throw Error(P(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rt(s,r),Uu(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rt(s,r),Nm(t,e,s,r,n);case 3:e:{if(Jx(e),t===null)throw Error(P(387));s=e.pendingProps,o=e.memoizedState,r=o.element,jx(t,e),qa(e,s,null,n);var a=e.memoizedState;if(s=a.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Pr(Error(P(423)),e),e=jm(t,e,s,n,r);break e}else if(s!==r){r=Pr(Error(P(424)),e),e=jm(t,e,s,n,r);break e}else for(pt=Yn(e.stateNode.containerInfo.firstChild),xt=e,me=!0,Lt=null,n=bx(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Er(),s===r){e=bn(t,e,n);break e}qe(t,e,s,n)}e=e.child}return e;case 5:return Sx(e),t===null&&Lu(e),s=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Iu(s,r)?a=null:o!==null&&Iu(s,o)&&(e.flags|=32),Yx(t,e),qe(t,e,a,n),e.child;case 6:return t===null&&Lu(e),null;case 13:return Xx(t,e,n);case 4:return Jd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ir(e,null,s,n):qe(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rt(s,r),_m(t,e,s,r,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,ce(Va,s._currentValue),s._currentValue=a,o!==null)if(Wt(o.value,a)){if(o.children===r.children&&!it.current){e=bn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=mn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Du(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(P(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Du(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}qe(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,wr(e,n),r=kt(r),s=s(r),e.flags|=1,qe(t,e,s,n),e.child;case 14:return s=e.type,r=Rt(s,e.pendingProps),r=Rt(s.type,r),bm(t,e,s,r,n);case 15:return Kx(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rt(s,r),wa(t,e),e.tag=1,ot(s)?(t=!0,Ba(e)):t=!1,wr(e,n),Vx(e,s,r),Mu(e,s,r,n),$u(null,e,s,!0,t,n);case 19:return Zx(t,e,n);case 22:return Qx(t,e,n)}throw Error(P(156,e.tag))};function py(t,e){return Bg(t,e)}function D1(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,s){return new D1(t,e,n,s)}function hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function O1(t){if(typeof t=="function")return hh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pd)return 11;if(t===Rd)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Na(t,e,n,s,r,o){var a=2;if(s=t,typeof t=="function")hh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case nr:return Ls(n.children,r,o,e);case Td:a=8,r|=8;break;case au:return t=jt(12,n,e,r|2),t.elementType=au,t.lanes=o,t;case lu:return t=jt(13,n,e,r),t.elementType=lu,t.lanes=o,t;case cu:return t=jt(19,n,e,r),t.elementType=cu,t.lanes=o,t;case Sg:return zl(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ng:a=10;break e;case jg:a=9;break e;case Pd:a=11;break e;case Rd:a=14;break e;case Mn:a=16,s=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=jt(a,n,e,r),e.elementType=t,e.type=s,e.lanes=o,e}function Ls(t,e,n,s){return t=jt(7,t,s,e),t.lanes=n,t}function zl(t,e,n,s){return t=jt(22,t,s,e),t.elementType=Sg,t.lanes=n,t.stateNode={isHidden:!1},t}function Uc(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function $c(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M1(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fh(t,e,n,s,r,o,a,l,c){return t=new M1(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=jt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yd(o),t}function F1(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function gy(t){if(!t)return cs;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(ot(n))return gx(t,n,e)}return e}function xy(t,e,n,s,r,o,a,l,c){return t=fh(n,s,!0,t,r,o,a,l,c),t.context=gy(null),n=t.current,s=Ye(),r=Zn(n),o=mn(s,r),o.callback=e??null,Jn(n,o,r),t.current.lanes=r,vo(t,r,s),at(t,s),t}function Bl(t,e,n,s){var r=e.current,o=Ye(),a=Zn(r);return n=gy(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(o,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Jn(r,e,a),t!==null&&($t(t,r,a,o),xa(t,r,a)),a}function tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mh(t,e){Lm(t,e),(t=t.alternate)&&Lm(t,e)}function U1(){return null}var yy=typeof reportError=="function"?reportError:function(t){console.error(t)};function ph(t){this._internalRoot=t}Wl.prototype.render=ph.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Bl(t,e,null,null)};Wl.prototype.unmount=ph.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Bl(null,t,null,null)}),e[wn]=null}};function Wl(t){this._internalRoot=t}Wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&Jg(t)}};function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dm(){}function $1(t,e,n,s,r){if(r){if(typeof s=="function"){var o=s;s=function(){var u=tl(a);o.call(u)}}var a=xy(e,s,t,0,null,!1,!1,"",Dm);return t._reactRootContainer=a,t[wn]=a.current,qi(t.nodeType===8?t.parentNode:t),$s(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=tl(c);l.call(u)}}var c=fh(t,0,!1,null,null,!1,!1,"",Dm);return t._reactRootContainer=c,t[wn]=c.current,qi(t.nodeType===8?t.parentNode:t),$s(function(){Bl(e,c,n,s)}),c}function Vl(t,e,n,s,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var l=r;r=function(){var c=tl(a);l.call(c)}}Bl(e,a,t,r)}else a=$1(n,e,t,r,s);return tl(a)}qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pi(e.pendingLanes);n!==0&&(Dd(e,n|1),at(e,Ne()),!(X&6)&&(Rr=Ne()+500,xs()))}break;case 13:$s(function(){var s=_n(t,1);if(s!==null){var r=Ye();$t(s,t,1,r)}}),mh(t,1)}};Od=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=Ye();$t(e,t,134217728,n)}mh(t,134217728)}};Kg=function(t){if(t.tag===13){var e=Zn(t),n=_n(t,e);if(n!==null){var s=Ye();$t(n,t,e,s)}mh(t,e)}};Qg=function(){return ne};Yg=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};vu=function(t,e,n){switch(e){case"input":if(hu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Dl(s);if(!r)throw Error(P(90));Cg(s),hu(s,r)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&gr(t,!!n.multiple,e,!1)}};Og=ch;Mg=$s;var z1={usingClientEntryPoint:!1,Events:[_o,or,Dl,Lg,Dg,ch]},ai={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B1={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$g(t),t===null?null:t.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||U1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{Pl=na.inject(B1),Xt=na}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gh(e))throw Error(P(200));return F1(t,e,null,n)};wt.createRoot=function(t,e){if(!gh(t))throw Error(P(299));var n=!1,s="",r=yy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=fh(t,1,!1,null,null,n,!1,s,r),t[wn]=e.current,qi(t.nodeType===8?t.parentNode:t),new ph(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=$g(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return $s(t)};wt.hydrate=function(t,e,n){if(!Hl(e))throw Error(P(200));return Vl(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!gh(t))throw Error(P(405));var s=n!=null&&n.hydratedSources||null,r=!1,o="",a=yy;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=xy(e,null,t,1,n??null,r,!1,o,a),t[wn]=e.current,qi(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Wl(e)};wt.render=function(t,e,n){if(!Hl(e))throw Error(P(200));return Vl(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!Hl(t))throw Error(P(40));return t._reactRootContainer?($s(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[wn]=null})}),!0):!1};wt.unstable_batchedUpdates=ch;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Hl(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Vl(t,e,n,!1,s)};wt.version="18.3.1-next-f1338f8080-20240426";function vy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vy)}catch(t){console.error(t)}}vy(),vg.exports=wt;var W1=vg.exports,wy,Om=W1;wy=Om.createRoot,Om.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mm="popstate";function H1(t={}){function e(s,r){let{pathname:o,search:a,hash:l}=s.location;return Xu("",{pathname:o,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:no(r)}return G1(e,n,null,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ht(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V1(){return Math.random().toString(36).substring(2,10)}function Fm(t,e){return{usr:t.state,key:t.key,idx:e}}function Xu(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$r(e):e,state:n,key:e&&e.key||s||V1()}}function no({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $r(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function G1(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,a=r.history,l="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function f(){l="POP";let C=h(),y=C==null?null:C-u;u=C,c&&c({action:l,location:x.location,delta:y})}function d(C,y){l="PUSH";let g=Xu(x.location,C,y);u=h()+1;let _=Fm(g,u),b=x.createHref(g);try{a.pushState(_,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(b)}o&&c&&c({action:l,location:x.location,delta:1})}function v(C,y){l="REPLACE";let g=Xu(x.location,C,y);u=h();let _=Fm(g,u),b=x.createHref(g);a.replaceState(_,"",b),o&&c&&c({action:l,location:x.location,delta:0})}function m(C){return q1(C)}let x={get action(){return l},get location(){return t(r,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Mm,f),c=C,()=>{r.removeEventListener(Mm,f),c=null}},createHref(C){return e(r,C)},createURL:m,encodeLocation(C){let y=m(C);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:v,go(C){return a.go(C)}};return x}function q1(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pe(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:no(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function _y(t,e,n="/"){return K1(t,e,n,!1)}function K1(t,e,n,s){let r=typeof e=="string"?$r(e):e,o=Nn(r.pathname||"/",n);if(o==null)return null;let a=by(t);Q1(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=ob(o);l=rb(a[c],u,s)}return l}function by(t,e=[],n=[],s=""){let r=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(pe(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=pn([s,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(pe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),by(o.children,e,h,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:nb(u,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,a);else for(let c of Ny(o.path))r(o,a,c)}),e}function Ny(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let a=Ny(s.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Q1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sb(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Y1=/^:[\w-]+$/,J1=3,X1=2,Z1=1,eb=10,tb=-2,Um=t=>t==="*";function nb(t,e){let n=t.split("/"),s=n.length;return n.some(Um)&&(s+=tb),e&&(s+=X1),n.filter(r=>!Um(r)).reduce((r,o)=>r+(Y1.test(o)?J1:o===""?Z1:eb),s)}function sb(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function rb(t,e,n=!1){let{routesMeta:s}=t,r={},o="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=o==="/"?e:e.slice(o.length)||"/",f=nl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),d=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=nl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:pn([o,f.pathname]),pathnameBase:ub(pn([o,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(o=pn([o,f.pathnameBase]))}return a}function nl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=ib(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:f},d)=>{if(h==="*"){let m=l[d]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const v=l[d];return f&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:t}}function ib(t,e=!1,n=!0){Ht(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function ob(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ht(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Nn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function ab(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?$r(t):t;return{pathname:n?n.startsWith("/")?n:lb(n,e):e,search:db(s),hash:hb(r)}}function lb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function zc(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xh(t){let e=cb(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function yh(t,e,n,s=!1){let r;typeof t=="string"?r=$r(t):(r={...t},pe(!r.pathname||!r.pathname.includes("?"),zc("?","pathname","search",r)),pe(!r.pathname||!r.pathname.includes("#"),zc("#","pathname","hash",r)),pe(!r.search||!r.search.includes("#"),zc("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!s&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;r.pathname=d.join("/")}l=f>=0?e[f]:"/"}let c=ab(r,l),u=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var pn=t=>t.join("/").replace(/\/\/+/g,"/"),ub=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),db=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var jy=["POST","PUT","PATCH","DELETE"];new Set(jy);var mb=["GET",...jy];new Set(mb);var zr=w.createContext(null);zr.displayName="DataRouter";var Gl=w.createContext(null);Gl.displayName="DataRouterState";w.createContext(!1);var Sy=w.createContext({isTransitioning:!1});Sy.displayName="ViewTransition";var pb=w.createContext(new Map);pb.displayName="Fetchers";var gb=w.createContext(null);gb.displayName="Await";var Vt=w.createContext(null);Vt.displayName="Navigation";var No=w.createContext(null);No.displayName="Location";var nn=w.createContext({outlet:null,matches:[],isDataRoute:!1});nn.displayName="Route";var vh=w.createContext(null);vh.displayName="RouteError";function xb(t,{relative:e}={}){pe(Br(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=w.useContext(Vt),{hash:r,pathname:o,search:a}=jo(t,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:pn([n,o])),s.createHref({pathname:l,search:a,hash:r})}function Br(){return w.useContext(No)!=null}function Tn(){return pe(Br(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(No).location}var ky="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cy(t){w.useContext(Vt).static||w.useLayoutEffect(t)}function ql(){let{isDataRoute:t}=w.useContext(nn);return t?Tb():yb()}function yb(){pe(Br(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(zr),{basename:e,navigator:n}=w.useContext(Vt),{matches:s}=w.useContext(nn),{pathname:r}=Tn(),o=JSON.stringify(xh(s)),a=w.useRef(!1);return Cy(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(Ht(a.current,ky),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=yh(c,JSON.parse(o),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:pn([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,r,t])}w.createContext(null);function jo(t,{relative:e}={}){let{matches:n}=w.useContext(nn),{pathname:s}=Tn(),r=JSON.stringify(xh(n));return w.useMemo(()=>yh(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function vb(t,e){return Ey(t,e)}function Ey(t,e,n,s){var y;pe(Br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(Vt),{matches:o}=w.useContext(nn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let g=h&&h.path||"";Iy(c,!h||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let f=Tn(),d;if(e){let g=typeof e=="string"?$r(e):e;pe(u==="/"||((y=g.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${g.pathname}" was given in the \`location\` prop.`),d=g}else d=f;let v=d.pathname||"/",m=v;if(u!=="/"){let g=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=_y(t,{pathname:m});Ht(h||x!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Ht(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=jb(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:pn([u,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:pn([u,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,s);return e&&C?w.createElement(No.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},C):C}function wb(){let t=Ib(),e=fb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:r},n):null,a)}var _b=w.createElement(wb,null),bb=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(nn.Provider,{value:this.props.routeContext},w.createElement(vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nb({routeContext:t,match:e,children:n}){let s=w.useContext(zr);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(nn.Provider,{value:t},n)}function jb(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=n==null?void 0:n.errors;if(o!=null){let c=r.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);pe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=n,d=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||d){a=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,h)=>{let f,d=!1,v=null,m=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||_b,a&&(l<0&&h===0?(Iy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):l===h&&(d=!0,m=u.route.hydrateFallbackElement||null)));let x=e.concat(r.slice(0,h+1)),C=()=>{let y;return f?y=v:d?y=m:u.route.Component?y=w.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=c,w.createElement(Nb,{match:u,routeContext:{outlet:c,matches:x,isDataRoute:n!=null},children:y})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?w.createElement(bb,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:C(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):C()},null)}function wh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sb(t){let e=w.useContext(zr);return pe(e,wh(t)),e}function kb(t){let e=w.useContext(Gl);return pe(e,wh(t)),e}function Cb(t){let e=w.useContext(nn);return pe(e,wh(t)),e}function _h(t){let e=Cb(t),n=e.matches[e.matches.length-1];return pe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Eb(){return _h("useRouteId")}function Ib(){var s;let t=w.useContext(vh),e=kb("useRouteError"),n=_h("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function Tb(){let{router:t}=Sb("useNavigate"),e=_h("useNavigate"),n=w.useRef(!1);return Cy(()=>{n.current=!0}),w.useCallback(async(r,o={})=>{Ht(n.current,ky),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...o}))},[t,e])}var $m={};function Iy(t,e,n){!e&&!$m[t]&&($m[t]=!0,Ht(!1,n))}w.memo(Pb);function Pb({routes:t,future:e,state:n}){return Ey(t,void 0,n,e)}function Zu({to:t,replace:e,state:n,relative:s}){pe(Br(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=w.useContext(Vt);Ht(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(nn),{pathname:a}=Tn(),l=ql(),c=yh(t,xh(o),a,s==="path"),u=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:s})},[l,u,s,e,n]),null}function Pt(t){pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rb({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:o=!1}){pe(!Br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:a,navigator:r,static:o,future:{}}),[a,r,o]);typeof n=="string"&&(n=$r(n));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:d="default"}=n,v=w.useMemo(()=>{let m=Nn(c,a);return m==null?null:{location:{pathname:m,search:u,hash:h,state:f,key:d},navigationType:s}},[a,c,u,h,f,d,s]);return Ht(v!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:w.createElement(Vt.Provider,{value:l},w.createElement(No.Provider,{children:e,value:v}))}function Ab({children:t,location:e}){return vb(ed(t),e)}function ed(t,e=[]){let n=[];return w.Children.forEach(t,(s,r)=>{if(!w.isValidElement(s))return;let o=[...e,r];if(s.type===w.Fragment){n.push.apply(n,ed(s.props.children,o));return}pe(s.type===Pt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=ed(s.props.children,o)),n.push(a)}),n}var ja="get",Sa="application/x-www-form-urlencoded";function Kl(t){return t!=null&&typeof t.tagName=="string"}function Lb(t){return Kl(t)&&t.tagName.toLowerCase()==="button"}function Db(t){return Kl(t)&&t.tagName.toLowerCase()==="form"}function Ob(t){return Kl(t)&&t.tagName.toLowerCase()==="input"}function Mb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fb(t,e){return t.button===0&&(!e||e==="_self")&&!Mb(t)}var sa=null;function Ub(){if(sa===null)try{new FormData(document.createElement("form"),0),sa=!1}catch{sa=!0}return sa}var $b=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bc(t){return t!=null&&!$b.has(t)?(Ht(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sa}"`),null):t}function zb(t,e){let n,s,r,o,a;if(Db(t)){let l=t.getAttribute("action");s=l?Nn(l,e):null,n=t.getAttribute("method")||ja,r=Bc(t.getAttribute("enctype"))||Sa,o=new FormData(t)}else if(Lb(t)||Ob(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Nn(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||ja,r=Bc(t.getAttribute("formenctype"))||Bc(l.getAttribute("enctype"))||Sa,o=new FormData(l,t),!Ub()){let{name:u,type:h,value:f}=t;if(h==="image"){let d=u?`${u}.`:"";o.append(`${d}x`,"0"),o.append(`${d}y`,"0")}else u&&o.append(u,f)}}else{if(Kl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ja,s=null,r=Sa,a=t}return o&&r==="text/plain"&&(a=o,o=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bh(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bb(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Nn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Wb(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hb(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Vb(t,e,n){let s=await Promise.all(t.map(async r=>{let o=e.routes[r.route.id];if(o){let a=await Wb(o,n);return a.links?a.links():[]}return[]}));return Qb(s.flat(1).filter(Hb).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function zm(t,e,n,s,r,o){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var h;return n[u].pathname!==c.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):o==="data"?e.filter((c,u)=>{var f;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let d=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Gb(t,e,{includeHydrateFallback:n}={}){return qb(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function qb(t){return[...new Set(t)]}function Kb(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function Qb(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let o=JSON.stringify(Kb(r));return n.has(o)||(n.add(o),s.push({key:o,link:r})),s},[])}function Ty(){let t=w.useContext(zr);return bh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Yb(){let t=w.useContext(Gl);return bh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Nh=w.createContext(void 0);Nh.displayName="FrameworkContext";function Py(){let t=w.useContext(Nh);return bh(t,"You must render this element inside a <HydratedRouter> element"),t}function Jb(t,e){let n=w.useContext(Nh),[s,r]=w.useState(!1),[o,a]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,d=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let x=y=>{y.forEach(g=>{a(g.isIntersecting)})},C=new IntersectionObserver(x,{threshold:.5});return d.current&&C.observe(d.current),()=>{C.disconnect()}}},[t]),w.useEffect(()=>{if(s){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[s]);let v=()=>{r(!0)},m=()=>{r(!1),a(!1)};return n?t!=="intent"?[o,d,{}]:[o,d,{onFocus:li(l,v),onBlur:li(c,m),onMouseEnter:li(u,v),onMouseLeave:li(h,m),onTouchStart:li(f,v)}]:[!1,d,{}]}function li(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Xb({page:t,...e}){let{router:n}=Ty(),s=w.useMemo(()=>_y(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?w.createElement(eN,{page:t,matches:s,...e}):null}function Zb(t){let{manifest:e,routeModules:n}=Py(),[s,r]=w.useState([]);return w.useEffect(()=>{let o=!1;return Vb(t,e,n).then(a=>{o||r(a)}),()=>{o=!0}},[t,e,n]),s}function eN({page:t,matches:e,...n}){let s=Tn(),{manifest:r,routeModules:o}=Py(),{basename:a}=Ty(),{loaderData:l,matches:c}=Yb(),u=w.useMemo(()=>zm(t,e,c,r,s,"data"),[t,e,c,r,s]),h=w.useMemo(()=>zm(t,e,c,r,s,"assets"),[t,e,c,r,s]),f=w.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let m=new Set,x=!1;if(e.forEach(y=>{var _;let g=r.routes[y.route.id];!g||!g.hasLoader||(!u.some(b=>b.route.id===y.route.id)&&y.route.id in l&&((_=o[y.route.id])!=null&&_.shouldRevalidate)||g.hasClientLoader?x=!0:m.add(y.route.id))}),m.size===0)return[];let C=Bb(t,a,"data");return x&&m.size>0&&C.searchParams.set("_routes",e.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[C.pathname+C.search]},[a,l,s,r,u,e,t,o]),d=w.useMemo(()=>Gb(h,r),[h,r]),v=Zb(h);return w.createElement(w.Fragment,null,f.map(m=>w.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),d.map(m=>w.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),v.map(({key:m,link:x})=>w.createElement("link",{key:m,...x})))}function tN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ry=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ry&&(window.__reactRouterVersion="7.7.0")}catch{}function nN({basename:t,children:e,window:n}){let s=w.useRef();s.current==null&&(s.current=H1({window:n,v5Compat:!0}));let r=s.current,[o,a]=w.useState({action:r.action,location:r.location}),l=w.useCallback(c=>{w.startTransition(()=>a(c))},[a]);return w.useLayoutEffect(()=>r.listen(l),[r,l]),w.createElement(Rb,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r})}var Ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=w.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f,...d},v){let{basename:m}=w.useContext(Vt),x=typeof u=="string"&&Ay.test(u),C,y=!1;if(typeof u=="string"&&x&&(C=u,Ry))try{let E=new URL(window.location.href),I=u.startsWith("//")?new URL(E.protocol+u):new URL(u),S=Nn(I.pathname,m);I.origin===E.origin&&S!=null?u=S+I.search+I.hash:y=!0}catch{Ht(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=xb(u,{relative:r}),[_,b,N]=Jb(s,d),j=oN(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function k(E){e&&e(E),E.defaultPrevented||j(E)}let T=w.createElement("a",{...d,...N,href:C||g,onClick:y||o?e:k,ref:tN(v,b),target:c,"data-discover":!x&&n==="render"?"true":void 0});return _&&!x?w.createElement(w.Fragment,null,T,w.createElement(Xb,{page:g})):T});ae.displayName="Link";var sN=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:o,to:a,viewTransition:l,children:c,...u},h){let f=jo(a,{relative:u.relative}),d=Tn(),v=w.useContext(Gl),{navigator:m,basename:x}=w.useContext(Vt),C=v!=null&&dN(f)&&l===!0,y=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,g=d.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(g=g.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&x&&(_=Nn(_,x)||_);const b=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=g===y||!r&&g.startsWith(y)&&g.charAt(b)==="/",j=_!=null&&(_===y||!r&&_.startsWith(y)&&_.charAt(y.length)==="/"),k={isActive:N,isPending:j,isTransitioning:C},T=N?e:void 0,E;typeof s=="function"?E=s(k):E=[s,N?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(k):o;return w.createElement(ae,{...u,"aria-current":T,className:E,ref:h,style:I,to:a,viewTransition:l},typeof c=="function"?c(k):c)});sN.displayName="NavLink";var rN=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:o,method:a=ja,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:f,...d},v)=>{let m=cN(),x=uN(l,{relative:u}),C=a.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&Ay.test(l),g=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let b=_.nativeEvent.submitter,N=(b==null?void 0:b.getAttribute("formmethod"))||a;m(b||_.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:r,state:o,relative:u,preventScrollReset:h,viewTransition:f})};return w.createElement("form",{ref:v,method:C,action:x,onSubmit:s?c:g,...d,"data-discover":!y&&t==="render"?"true":void 0})});rN.displayName="Form";function iN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ly(t){let e=w.useContext(zr);return pe(e,iN(t)),e}function oN(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:o,viewTransition:a}={}){let l=ql(),c=Tn(),u=jo(t,{relative:o});return w.useCallback(h=>{if(Fb(h,e)){h.preventDefault();let f=n!==void 0?n:no(c)===no(u);l(t,{replace:f,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,n,s,e,t,r,o,a])}var aN=0,lN=()=>`__${String(++aN)}__`;function cN(){let{router:t}=Ly("useSubmit"),{basename:e}=w.useContext(Vt),n=Eb();return w.useCallback(async(s,r={})=>{let{action:o,method:a,encType:l,formData:c,body:u}=zb(s,e);if(r.navigate===!1){let h=r.fetcherKey||lN();await t.fetch(h,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function uN(t,{relative:e}={}){let{basename:n}=w.useContext(Vt),s=w.useContext(nn);pe(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...jo(t||".",{relative:e})},a=Tn();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:pn([n,o.pathname])),no(o)}function dN(t,e={}){let n=w.useContext(Sy);pe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ly("useViewTransitionState"),r=jo(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Nn(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=Nn(n.nextLocation.pathname,s)||n.nextLocation.pathname;return nl(r.pathname,a)!=null||nl(r.pathname,o)!=null}let hN={data:""},fN=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||hN,mN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pN=/\/\*[^]*?\*\/|  +/g,Bm=/\n+/g,zn=(t,e)=>{let n="",s="",r="";for(let o in t){let a=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+a+";":s+=o[1]=="f"?zn(a,o):o+"{"+zn(a,o[1]=="k"?"":e)+"}":typeof a=="object"?s+=zn(a,e?e.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=zn.p?zn.p(o,a):o+":"+a+";")}return n+(e&&r?e+"{"+r+"}":r)+s},rn={},Dy=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Dy(t[n]);return e}return t},gN=(t,e,n,s,r)=>{let o=Dy(t),a=rn[o]||(rn[o]=(c=>{let u=0,h=11;for(;u<c.length;)h=101*h+c.charCodeAt(u++)>>>0;return"go"+h})(o));if(!rn[a]){let c=o!==t?t:(u=>{let h,f,d=[{}];for(;h=mN.exec(u.replace(pN,""));)h[4]?d.shift():h[3]?(f=h[3].replace(Bm," ").trim(),d.unshift(d[0][f]=d[0][f]||{})):d[0][h[1]]=h[2].replace(Bm," ").trim();return d[0]})(t);rn[a]=zn(r?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&rn.g?rn.g:null;return n&&(rn.g=rn[a]),((c,u,h,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=h?c+u.data:u.data+c)})(rn[a],e,s,l),a},xN=(t,e,n)=>t.reduce((s,r,o)=>{let a=e[o];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":zn(l,""):l===!1?"":l}return s+r+(a??"")},"");function Ql(t){let e=this||{},n=t.call?t(e.p):t;return gN(n.unshift?n.raw?xN(n,[].slice.call(arguments,1),e.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):n,fN(e.target),e.g,e.o,e.k)}let Oy,td,nd;Ql.bind({g:1});let jn=Ql.bind({k:1});function yN(t,e,n,s){zn.p=e,Oy=t,td=n,nd=s}function ys(t,e){let n=this||{};return function(){let s=arguments;function r(o,a){let l=Object.assign({},o),c=l.className||r.className;n.p=Object.assign({theme:td&&td()},l),n.o=/ *go\d+/.test(c),l.className=Ql.apply(n,s)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),nd&&u[0]&&nd(l),Oy(u,l)}return r}}var vN=t=>typeof t=="function",sl=(t,e)=>vN(t)?t(e):t,wN=(()=>{let t=0;return()=>(++t).toString()})(),My=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_N=20,Fy=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,_N)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return Fy(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},ka=[],Is={toasts:[],pausedAt:void 0},Js=t=>{Is=Fy(Is,t),ka.forEach(e=>{e(Is)})},bN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},NN=(t={})=>{let[e,n]=w.useState(Is),s=w.useRef(Is);w.useEffect(()=>(s.current!==Is&&n(Is),ka.push(n),()=>{let o=ka.indexOf(n);o>-1&&ka.splice(o,1)}),[]);let r=e.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||bN[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...e,toasts:r}},jN=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||wN()}),So=t=>(e,n)=>{let s=jN(e,t,n);return Js({type:2,toast:s}),s.id},Ke=(t,e)=>So("blank")(t,e);Ke.error=So("error");Ke.success=So("success");Ke.loading=So("loading");Ke.custom=So("custom");Ke.dismiss=t=>{Js({type:3,toastId:t})};Ke.remove=t=>Js({type:4,toastId:t});Ke.promise=(t,e,n)=>{let s=Ke.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let o=e.success?sl(e.success,r):void 0;return o?Ke.success(o,{id:s,...n,...n==null?void 0:n.success}):Ke.dismiss(s),r}).catch(r=>{let o=e.error?sl(e.error,r):void 0;o?Ke.error(o,{id:s,...n,...n==null?void 0:n.error}):Ke.dismiss(s)}),t};var SN=(t,e)=>{Js({type:1,toast:{id:t,height:e}})},kN=()=>{Js({type:5,time:Date.now()})},Ei=new Map,CN=1e3,EN=(t,e=CN)=>{if(Ei.has(t))return;let n=setTimeout(()=>{Ei.delete(t),Js({type:4,toastId:t})},e);Ei.set(t,n)},IN=t=>{let{toasts:e,pausedAt:n}=NN(t);w.useEffect(()=>{if(n)return;let o=Date.now(),a=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(o-l.createdAt);if(c<0){l.visible&&Ke.dismiss(l.id);return}return setTimeout(()=>Ke.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[e,n]);let s=w.useCallback(()=>{n&&Js({type:6,time:Date.now()})},[n]),r=w.useCallback((o,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=a||{},h=e.filter(v=>(v.position||u)===(o.position||u)&&v.height),f=h.findIndex(v=>v.id===o.id),d=h.filter((v,m)=>m<f&&v.visible).length;return h.filter(v=>v.visible).slice(...l?[d+1]:[0,d]).reduce((v,m)=>v+(m.height||0)+c,0)},[e]);return w.useEffect(()=>{e.forEach(o=>{if(o.dismissed)EN(o.id,o.removeDelay);else{let a=Ei.get(o.id);a&&(clearTimeout(a),Ei.delete(o.id))}})},[e]),{toasts:e,handlers:{updateHeight:SN,startPause:kN,endPause:s,calculateOffset:r}}},TN=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PN=jn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RN=jn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AN=ys("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LN=jn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,DN=ys("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${LN} 1s linear infinite;
`,ON=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MN=jn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FN=ys("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ON} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UN=ys("div")`
  position: absolute;
`,$N=ys("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zN=jn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BN=ys("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WN=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?w.createElement(BN,null,e):e:n==="blank"?null:w.createElement($N,null,w.createElement(DN,{...s}),n!=="loading"&&w.createElement(UN,null,n==="error"?w.createElement(AN,{...s}):w.createElement(FN,{...s})))},HN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,VN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GN="0%{opacity:0;} 100%{opacity:1;}",qN="0%{opacity:1;} 100%{opacity:0;}",KN=ys("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,QN=ys("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,YN=(t,e)=>{let n=t.includes("top")?1:-1,[s,r]=My()?[GN,qN]:[HN(n),VN(n)];return{animation:e?`${jn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${jn(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JN=w.memo(({toast:t,position:e,style:n,children:s})=>{let r=t.height?YN(t.position||e||"top-center",t.visible):{opacity:0},o=w.createElement(WN,{toast:t}),a=w.createElement(QN,{...t.ariaProps},sl(t.message,t));return w.createElement(KN,{className:t.className,style:{...r,...n,...t.style}},typeof s=="function"?s({icon:o,message:a}):w.createElement(w.Fragment,null,o,a))});yN(w.createElement);var XN=({id:t,className:e,style:n,onHeightUpdate:s,children:r})=>{let o=w.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return w.createElement("div",{ref:o,className:e,style:n},r)},ZN=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:My()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...r}},ej=Ql`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ra=16,tj=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:r,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=IN(n);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ra,left:ra,right:ra,bottom:ra,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:e}),d=ZN(h,f);return w.createElement(XN,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?ej:"",style:d},u.type==="custom"?sl(u.message,u):r?r(u):w.createElement(JN,{toast:u,position:h}))}))},L=Ke;const nj=()=>{};var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=function(t,e){if(!t)throw Wr(e)},Wr=function(t){return new Error("Firebase Database ("+Uy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},sj=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[s++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},jh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=o>>2,f=(o&3)<<4|l>>4;let d=(l&15)<<2|u>>6,v=u&63;c||(v=64,a||(d=64)),s.push(n[h],n[f],n[d],n[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($y(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||l==null||u==null||f==null)throw new rj;const d=o<<2|l>>4;if(s.push(d),u!==64){const v=l<<4&240|u>>2;if(s.push(v),f!==64){const m=u<<6&192|f;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zy=function(t){const e=$y(t);return jh.encodeByteArray(e,!0)},rl=function(t){return zy(t).replace(/\./g,"")},il=function(t){try{return jh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){return By(void 0,t)}function By(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!oj(n)||(t[n]=By(t[n],e[n]));return t}function oj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=()=>aj().__FIREBASE_DEFAULTS__,cj=()=>{if(typeof process>"u"||typeof Wm>"u")return;const t=Wm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&il(t[1]);return e&&JSON.parse(e)},Sh=()=>{try{return nj()||lj()||cj()||uj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wy=t=>{var e,n;return(n=(e=Sh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dj=t=>{const e=Wy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Hy=()=>{var t;return(t=Sh())==null?void 0:t.config},Vy=t=>{var e;return(e=Sh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rl(JSON.stringify(n)),rl(JSON.stringify(a)),""].join(".")}const Ii={};function fj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ii))Ii[e]?t.emulator.push(e):t.prod.push(e);return t}function mj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Hm=!1;function qy(t,e){if(typeof window>"u"||typeof document>"u"||!Hr(window.location.host)||Ii[t]===e||Ii[t]||Hm)return;Ii[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",o=fj().prod.length>0;function a(){const d=document.getElementById(s);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function c(d,v){d.setAttribute("width","24"),d.setAttribute("id",v),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Hm=!0,a()},d}function h(d,v){d.setAttribute("id",v),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=mj(s),v=n("text"),m=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),C=document.getElementById(x)||document.createElement("a"),y=n("preprendIcon"),g=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const _=d.element;l(_),h(C,x);const b=u();c(g,y),_.append(g,m,C,b),document.body.appendChild(_)}o?(m.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function pj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ky(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xj(){const t=Je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Qy(){return Uy.NODE_ADMIN===!0}function yj(){try{return typeof indexedDB=="object"}catch{return!1}}function vj(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="FirebaseError";class vs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=wj,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?_j(o,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new vs(r,l,s)}}function _j(t,e){return t.replace(bj,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const bj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return JSON.parse(t)}function Ce(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(t){let e={},n={},s={},r="";try{const o=t.split(".");e=so(il(o[0])||""),n=so(il(o[1])||""),r=o[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Nj=function(t){const e=Yy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},jj=function(t){const e=Yy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ar(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function zs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const o=t[r],a=e[r];if(Vm(o)&&Vm(a)){if(!zs(o,a))return!1}else if(o!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Vm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function xi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,o]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function yi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)s[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)s[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const d=s[f-3]^s[f-8]^s[f-14]^s[f-16];s[f]=(d<<1|d>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,h;for(let f=0;f<80;f++){f<40?f<20?(u=l^o&(a^l),h=1518500249):(u=o^a^l,h=1859775393):f<60?(u=o&a|l&(o|a),h=2400959708):(u=o^a^l,h=3395469782);const d=(r<<5|r>>>27)+u+c+h+s[f]&4294967295;c=l,l=a,a=(o<<30|o>>>2)&4294967295,o=r,r=d}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const o=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}else for(;r<n;)if(o[a]=e[r],++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[s]=this.chain_[r]>>o&255,++s;return e}}function kj(t,e){const n=new Cj(t,e);return n.subscribe.bind(n)}class Cj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Ej(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Wc),r.error===void 0&&(r.error=Wc),r.complete===void 0&&(r.complete=Wc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ej(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wc(){}function Ch(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const o=r-55296;s++,A(s<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(s)-56320;r=65536+(o<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Jl=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class Bs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Yl;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rj(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});s.resolve(o)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);s===l&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Pj(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pj(t){return t===bs?void 0:t}function Rj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const Lj={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},Dj=re.INFO,Oj={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},Mj=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Oj[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eh{constructor(e){this.name=e,this._logLevel=Dj,this._logHandler=Mj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const Fj=(t,e)=>e.some(n=>t instanceof n);let Gm,qm;function Uj(){return Gm||(Gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $j(){return qm||(qm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jy=new WeakMap,rd=new WeakMap,Xy=new WeakMap,Hc=new WeakMap,Ih=new WeakMap;function zj(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ts(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Jy.set(n,t)}).catch(()=>{}),Ih.set(e,t),e}function Bj(t){if(rd.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});rd.set(t,e)}let id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wj(t){id=t(id)}function Hj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Vc(this),e,...n);return Xy.set(s,e.sort?e.sort():[e]),ts(s)}:$j().includes(t)?function(...e){return t.apply(Vc(this),e),ts(Jy.get(this))}:function(...e){return ts(t.apply(Vc(this),e))}}function Vj(t){return typeof t=="function"?Hj(t):(t instanceof IDBTransaction&&Bj(t),Fj(t,Uj())?new Proxy(t,id):t)}function ts(t){if(t instanceof IDBRequest)return zj(t);if(Hc.has(t))return Hc.get(t);const e=Vj(t);return e!==t&&(Hc.set(t,e),Ih.set(e,t)),e}const Vc=t=>Ih.get(t);function Gj(t,e,{blocked:n,upgrade:s,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),l=ts(a);return s&&a.addEventListener("upgradeneeded",c=>{s(ts(a.result),c.oldVersion,c.newVersion,ts(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const qj=["get","getKey","getAll","getAllKeys","count"],Kj=["put","add","delete","clear"],Gc=new Map;function Km(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gc.get(e))return Gc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Kj.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||qj.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Gc.set(e,o),o}Wj(t=>({...t,get:(e,n,s)=>Km(e,n)||t.get(e,n,s),has:(e,n)=>!!Km(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yj(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Yj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const od="@firebase/app",Qm="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new Eh("@firebase/app"),Jj="@firebase/app-compat",Xj="@firebase/analytics-compat",Zj="@firebase/analytics",eS="@firebase/app-check-compat",tS="@firebase/app-check",nS="@firebase/auth",sS="@firebase/auth-compat",rS="@firebase/database",iS="@firebase/data-connect",oS="@firebase/database-compat",aS="@firebase/functions",lS="@firebase/functions-compat",cS="@firebase/installations",uS="@firebase/installations-compat",dS="@firebase/messaging",hS="@firebase/messaging-compat",fS="@firebase/performance",mS="@firebase/performance-compat",pS="@firebase/remote-config",gS="@firebase/remote-config-compat",xS="@firebase/storage",yS="@firebase/storage-compat",vS="@firebase/firestore",wS="@firebase/ai",_S="@firebase/firestore-compat",bS="firebase",NS="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="[DEFAULT]",jS={[od]:"fire-core",[Jj]:"fire-core-compat",[Zj]:"fire-analytics",[Xj]:"fire-analytics-compat",[tS]:"fire-app-check",[eS]:"fire-app-check-compat",[nS]:"fire-auth",[sS]:"fire-auth-compat",[rS]:"fire-rtdb",[iS]:"fire-data-connect",[oS]:"fire-rtdb-compat",[aS]:"fire-fn",[lS]:"fire-fn-compat",[cS]:"fire-iid",[uS]:"fire-iid-compat",[dS]:"fire-fcm",[hS]:"fire-fcm-compat",[fS]:"fire-perf",[mS]:"fire-perf-compat",[pS]:"fire-rc",[gS]:"fire-rc-compat",[xS]:"fire-gcs",[yS]:"fire-gcs-compat",[vS]:"fire-fst",[_S]:"fire-fst-compat",[wS]:"fire-vertex","fire-js":"fire-js",[bS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new Map,SS=new Map,ld=new Map;function Ym(t,e){try{t.container.addComponent(e)}catch(n){Sn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lr(t){const e=t.name;if(ld.has(e))return Sn.debug(`There were multiple attempts to register component ${e}.`),!1;ld.set(e,t);for(const n of al.values())Ym(n,t);for(const n of SS.values())Ym(n,t);return!0}function Th(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new ko("app","Firebase",kS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=NS;function Zy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ad,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ns.create("bad-app-name",{appName:String(r)});if(n||(n=Hy()),!n)throw ns.create("no-options");const o=al.get(r);if(o){if(zs(n,o.options)&&zs(s,o.config))return o;throw ns.create("duplicate-app",{appName:r})}const a=new Aj(r);for(const c of ld.values())a.addComponent(c);const l=new CS(n,s,a);return al.set(r,l),l}function e0(t=ad){const e=al.get(t);if(!e&&t===ad&&Hy())return Zy();if(!e)throw ns.create("no-app",{appName:t});return e}function ss(t,e,n){let s=jS[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sn.warn(a.join(" "));return}Lr(new Bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebase-heartbeat-database",IS=1,ro="firebase-heartbeat-store";let qc=null;function t0(){return qc||(qc=Gj(ES,IS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw ns.create("idb-open",{originalErrorMessage:t.message})})),qc}async function TS(t){try{const n=(await t0()).transaction(ro),s=await n.objectStore(ro).get(n0(t));return await n.done,s}catch(e){if(e instanceof vs)Sn.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sn.warn(n.message)}}}async function Jm(t,e){try{const s=(await t0()).transaction(ro,"readwrite");await s.objectStore(ro).put(e,n0(t)),await s.done}catch(n){if(n instanceof vs)Sn.warn(n.message);else{const s=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sn.warn(s.message)}}}function n0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=1024,RS=30;class AS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>RS){const a=OS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Sn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xm(),{heartbeatsToSend:s,unsentEntries:r}=LS(this._heartbeatsCache.heartbeats),o=rl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Sn.warn(n),""}}}function Xm(){return new Date().toISOString().substring(0,10)}function LS(t,e=PS){const n=[];let s=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Zm(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yj()?vj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zm(t){return rl(JSON.stringify({version:2,heartbeats:t})).length}function OS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){Lr(new Bs("platform-logger",e=>new Qj(e),"PRIVATE")),Lr(new Bs("heartbeat",e=>new AS(e),"PRIVATE")),ss(od,Qm,t),ss(od,Qm,"esm2020"),ss("fire-js","")}MS("");function s0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=s0,r0=new ko("auth","Firebase",s0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Eh("@firebase/auth");function US(t,...e){ll.logLevel<=re.WARN&&ll.warn(`Auth (${Gr}): ${t}`,...e)}function Ca(t,...e){ll.logLevel<=re.ERROR&&ll.error(`Auth (${Gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,...e){throw Rh(t,...e)}function zt(t,...e){return Rh(t,...e)}function Ph(t,e,n){const s={...FS(),[e]:n};return new ko("auth","Firebase",s).create(e,{appName:t.name})}function gn(t){return Ph(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $S(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Et(t,"argument-error"),Ph(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rh(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return r0.create(t,...e)}function H(t,e,...n){if(!t)throw Rh(e,...n)}function dn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ca(e),new Error(e)}function kn(t,e){t||dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zS(){return ep()==="http:"||ep()==="https:"}function ep(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zS()||gj()||"connection"in navigator)?navigator.onLine:!0}function WS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.shortDelay=e,this.longDelay=n,kn(n>e,"Short delay should be less than long delay!"),this.isMobile=kh()||Ky()}get(){return BS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e){kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GS=new Co(3e4,6e4);function Pn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rn(t,e,n,s,r={}){return o0(t,r,async()=>{let o={},a={};s&&(e==="GET"?a=s:o={body:JSON.stringify(s)});const l=Vr({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...o};return pj()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(u.credentials="include"),i0.fetch()(await a0(t,t.config.apiHost,n,l),u)})}async function o0(t,e,n){t._canInitEmulator=!1;const s={...HS,...e};try{const r=new KS(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw ia(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ia(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ia(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ia(t,"user-disabled",a);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ph(t,h,u);Et(t,h)}}catch(r){if(r instanceof vs)throw r;Et(t,"network-request-failed",{message:String(r)})}}async function Eo(t,e,n,s,r={}){const o=await Rn(t,e,n,s,r);return"mfaPendingCredential"in o&&Et(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function a0(t,e,n,s){const r=`${e}${n}?${s}`,o=t,a=o.config.emulator?Ah(t.config,r):`${t.config.apiScheme}://${r}`;return VS.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function qS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zt(this.auth,"network-request-failed")),GS.get())})}}function ia(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=zt(t,e,s);return r.customData._tokenResponse=n,r}function tp(t){return t!==void 0&&t.enterprise!==void 0}class QS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YS(t,e){return Rn(t,"GET","/v2/recaptchaConfig",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e){return Rn(t,"POST","/v1/accounts:delete",e)}async function cl(t,e){return Rn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(t,e=!1){const n=ze(t),s=await n.getIdToken(e),r=Lh(s);H(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:Ti(Kc(r.auth_time)),issuedAtTime:Ti(Kc(r.iat)),expirationTime:Ti(Kc(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Kc(t){return Number(t)*1e3}function Lh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ca("JWT malformed, contained fewer than 3 sections"),null;try{const r=il(n);return r?JSON.parse(r):(Ca("Failed to decode base64 JWT payload"),null)}catch(r){return Ca("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function np(t){const e=Lh(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof vs&&ZS(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function ZS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ti(this.lastLoginAt),this.creationTime=Ti(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t){var f;const e=t.auth,n=await t.getIdToken(),s=await io(t,cl(e,{idToken:n}));H(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=(f=r.providerUserInfo)!=null&&f.length?l0(r.providerUserInfo):[],a=nk(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ud(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function tk(t){const e=ze(t);await ul(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function l0(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e){const n=await o0(t,{},async()=>{const s=Vr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await a0(t,r,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(c.credentials="include"),i0.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rk(t,e){return Rn(t,"POST","/v2/accounts:revokeToken",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):np(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=np(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:o}=await sk(e,n);this.updateTokensAndExpiration(s,r,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:o}=n,a=new br;return s&&(H(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(H(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(H(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ot{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ud(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await io(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XS(this,e)}reload(){return tk(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ot({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ul(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mt(this.auth.app))return Promise.reject(gn(this.auth));const e=await this.getIdToken();return await io(this,JS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:d,isAnonymous:v,providerData:m,stsTokenManager:x}=n;H(f&&x,e,"internal-error");const C=br.fromJSON(this.name,x);H(typeof f=="string",e,"internal-error"),On(s,e.name),On(r,e.name),H(typeof d=="boolean",e,"internal-error"),H(typeof v=="boolean",e,"internal-error"),On(o,e.name),On(a,e.name),On(l,e.name),On(c,e.name),On(u,e.name),On(h,e.name);const y=new Ot({uid:f,auth:e,email:r,emailVerified:d,displayName:s,isAnonymous:v,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:C,createdAt:u,lastLoginAt:h});return m&&Array.isArray(m)&&(y.providerData=m.map(g=>({...g}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,s=!1){const r=new br;r.updateFromServerResponse(n);const o=new Ot({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ul(o),o}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];H(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?l0(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),l=new br;l.updateFromIdToken(s);const c=new Ot({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ud(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new Map;function hn(t){kn(t instanceof Function,"Expected a class definition");let e=sp.get(t);return e?(kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c0.type="NONE";const rp=c0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,e,n){return`firebase:${t}:${e}:${n}`}class Nr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:o}=this.auth;this.fullUserKey=Ea(this.userKey,r.apiKey,o),this.fullPersistenceKey=Ea("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cl(this.auth,{idToken:e}).catch(()=>{});return n?Ot._fromGetAccountInfoResponse(this.auth,n,e):null}return Ot._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Nr(hn(rp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=r[0]||hn(rp);const a=Ea(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const d=await cl(e,{idToken:h}).catch(()=>{});if(!d)break;f=await Ot._fromGetAccountInfoResponse(e,d,h)}else f=Ot._fromJSON(e,h);u!==o&&(l=f),o=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Nr(o,e,s):(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new Nr(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p0(e))return"Blackberry";if(g0(e))return"Webos";if(d0(e))return"Safari";if((e.includes("chrome/")||h0(e))&&!e.includes("edge/"))return"Chrome";if(m0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function u0(t=Je()){return/firefox\//i.test(t)}function d0(t=Je()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h0(t=Je()){return/crios\//i.test(t)}function f0(t=Je()){return/iemobile/i.test(t)}function m0(t=Je()){return/android/i.test(t)}function p0(t=Je()){return/blackberry/i.test(t)}function g0(t=Je()){return/webos/i.test(t)}function Dh(t=Je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ik(t=Je()){var e;return Dh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ok(){return xj()&&document.documentMode===10}function x0(t=Je()){return Dh(t)||m0(t)||g0(t)||p0(t)||/windows phone/i.test(t)||f0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e=[]){let n;switch(t){case"Browser":n=ip(Je());break;case"Worker":n=`${ip(Je())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=o=>new Promise((a,l)=>{try{const c=e(o);a(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e={}){return Rn(t,"GET","/v2/passwordPolicy",Pn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=6;class uk{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ck,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new op(this),this.idTokenSubscription=new op(this),this.beforeStateQueue=new ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hn(n)),this._initializationPromise=this.queue(async()=>{var s,r,o;if(!this._deleted&&(this.persistenceManager=await Nr.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cl(this,{idToken:e}),s=await Ot._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(mt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ul(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mt(this.app))return Promise.reject(gn(this));const n=e?ze(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mt(this.app)?Promise.reject(gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mt(this.app)?Promise.reject(gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lk(this),n=new uk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ko("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await rk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Nr.create(this,[hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&US(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function An(t){return ze(t)}class op{constructor(e){this.auth=e,this.observer=null,this.addObserver=kj(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hk(t){Xl=t}function v0(t){return Xl.loadJS(t)}function fk(){return Xl.recaptchaEnterpriseScript}function mk(){return Xl.gapiScript}function pk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gk{constructor(){this.enterprise=new xk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const yk="recaptcha-enterprise",w0="NO_RECAPTCHA";class vk{constructor(e){this.type=yk,this.auth=An(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{YS(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new QS(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function r(o,a,l){const c=window.grecaptcha;tp(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{a(u)}).catch(()=>{a(w0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gk().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{s(this.auth).then(l=>{if(!n&&tp(window.grecaptcha))r(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fk();c.length!==0&&(c+=l),v0(c).then(()=>{r(l,o,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function ap(t,e,n,s=!1,r=!1){const o=new vk(t);let a;if(r)a=w0;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function dl(t,e,n,s,r){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ap(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ap(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e){const n=Th(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(zs(o,e??{}))return r;Et(r,"already-initialized")}return n.initialize({options:e})}function _k(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function bk(t,e,n){const s=An(t);H(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=_0(e),{host:a,port:l}=Nk(e),c=l===null?"":`:${l}`,u={url:`${o}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){H(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),H(zs(u,s.config.emulator)&&zs(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Hr(a)?(Gy(`${o}//${a}${c}`),qy("Auth",!0)):jk()}function _0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nk(t){const e=_0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const o=r[1];return{host:o,port:lp(s.substr(o.length+1))}}else{const[o,a]=s.split(":");return{host:o,port:lp(a)}}}function lp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,n){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function Sk(t,e){return Rn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(t,e){return Eo(t,"POST","/v1/accounts:signInWithPassword",Pn(t,e))}async function Ck(t,e){return Rn(t,"POST","/v1/accounts:sendOobCode",Pn(t,e))}async function Ek(t,e){return Ck(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(t,e){return Eo(t,"POST","/v1/accounts:signInWithEmailLink",Pn(t,e))}async function Tk(t,e){return Eo(t,"POST","/v1/accounts:signInWithEmailLink",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Oh{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new oo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new oo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dl(e,n,"signInWithPassword",kk);case"emailLink":return Ik(e,{email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dl(e,s,"signUpPassword",Sk);case"emailLink":return Tk(e,{idToken:n,email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(t,e){return Eo(t,"POST","/v1/accounts:signInWithIdp",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="http://localhost";class Ws extends Oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Et("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...o}=n;if(!s||!r)return null;const a=new Ws(s,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return jr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,jr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jr(e,n)}buildRequest(){const e={requestUri:Pk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ak(t){const e=xi(yi(t)).link,n=e?xi(yi(e)).deep_link_id:null,s=xi(yi(t)).deep_link_id;return(s?xi(yi(s)).link:null)||s||n||e||t}class Mh{constructor(e){const n=xi(yi(e)),s=n.apiKey??null,r=n.oobCode??null,o=Rk(n.mode??null);H(s&&r&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ak(e);try{return new Mh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.providerId=qr.PROVIDER_ID}static credential(e,n){return oo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Mh.parseLink(n);return H(s,"argument-error"),oo._fromEmailAndCode(e,s.code,s.tenantId)}}qr.PROVIDER_ID="password";qr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Fh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Io{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bn.credential(e.oauthAccessToken)}catch{return null}}}Bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ws._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ln.credential(n,s)}catch{return null}}}ln.GOOGLE_SIGN_IN_METHOD="google.com";ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Io{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.GITHUB_SIGN_IN_METHOD="github.com";Wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Io{constructor(){super("twitter.com")}static credential(e,n){return Ws._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Hn.credential(n,s)}catch{return null}}}Hn.TWITTER_SIGN_IN_METHOD="twitter.com";Hn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){return Eo(t,"POST","/v1/accounts:signUp",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const o=await Ot._fromIdTokenResponse(e,s,r),a=cp(s);return new Hs({user:o,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=cp(s);return new Hs({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function cp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends vs{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,hl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new hl(e,n,s,r)}}function b0(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?hl._fromErrorAndOperation(t,o,e,s):o})}async function Dk(t,e,n=!1){const s=await io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e,n=!1){const{auth:s}=t;if(mt(s.app))return Promise.reject(gn(s));const r="reauthenticate";try{const o=await io(t,b0(s,r,e,t),n);H(o.idToken,s,"internal-error");const a=Lh(o.idToken);H(a,s,"internal-error");const{sub:l}=a;return H(t.uid===l,s,"user-mismatch"),Hs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Et(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0(t,e,n=!1){if(mt(t.app))return Promise.reject(gn(t));const s="signIn",r=await b0(t,s,e),o=await Hs._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(o.user),o}async function Mk(t,e){return N0(An(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(t){const e=An(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Fk(t,e,n){const s=An(t);await dl(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ek)}async function Uk(t,e,n){if(mt(t.app))return Promise.reject(gn(t));const s=An(t),a=await dl(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&j0(t),c}),l=await Hs._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function S0(t,e,n){return mt(t.app)?Promise.reject(gn(t)):Mk(ze(t),qr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&j0(t),s})}function $k(t,e,n,s){return ze(t).onIdTokenChanged(e,n,s)}function zk(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function Bk(t,e,n,s){return ze(t).onAuthStateChanged(e,n,s)}function Wk(t){return ze(t).signOut()}const fl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fl,"1"),this.storage.removeItem(fl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1e3,Vk=10;class C0 extends k0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},o=this.storage.getItem(s);ok()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Vk):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}C0.type="LOCAL";const Gk=C0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends k0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E0.type="SESSION";const I0=E0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Zl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(a).map(async u=>u(n.origin,o)),c=await qk(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=Uh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(d.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}function Qk(t){en().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function Yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Xk(){return T0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firebaseLocalStorageDb",Zk=1,ml="firebaseLocalStorage",R0="fbase_key";class To{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ec(t,e){return t.transaction([ml],e?"readwrite":"readonly").objectStore(ml)}function e2(){const t=indexedDB.deleteDatabase(P0);return new To(t).toPromise()}function dd(){const t=indexedDB.open(P0,Zk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ml,{keyPath:R0})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ml)?e(s):(s.close(),await e2(),e(await dd()))})})}async function up(t,e,n){const s=ec(t,!0).put({[R0]:e,value:n});return new To(s).toPromise()}async function t2(t,e){const n=ec(t,!1).get(e),s=await new To(n).toPromise();return s===void 0?null:s.value}function dp(t,e){const n=ec(t,!0).delete(e);return new To(n).toPromise()}const n2=800,s2=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>s2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zl._getInstance(Xk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Yk(),!this.activeServiceWorker)return;this.sender=new Kk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dd();return await up(e,fl,"1"),await dp(e,fl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>up(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>t2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=ec(r,!1).getAll();return new To(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const r2=A0;new Co(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t,e){return e?hn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Oh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function i2(t){return N0(t.auth,new $h(t),t.bypassAuthState)}function o2(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),Ok(n,new $h(t),t.bypassAuthState)}async function a2(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),Dk(n,new $h(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,s,r,o=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i2;case"linkViaPopup":case"linkViaRedirect":return a2;case"reauthViaPopup":case"reauthViaRedirect":return o2;default:Et(this.auth,"internal-error")}}resolve(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Co(2e3,1e4);async function c2(t,e,n){if(mt(t.app))return Promise.reject(zt(t,"operation-not-supported-in-this-environment"));const s=An(t);$S(t,e,Fh);const r=L0(s,n);return new Ts(s,"signInViaPopup",e,r).executeNotNull()}class Ts extends D0{constructor(e,n,s,r,o){super(e,n,r,o),this.provider=s,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){kn(this.filter.length===1,"Popup operations only handle one event");const e=Uh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l2.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="pendingRedirect",Ia=new Map;class d2 extends D0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ia.get(this.auth._key());if(!e){try{const s=await h2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ia.set(this.auth._key(),e)}return this.bypassAuthState||Ia.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h2(t,e){const n=p2(e),s=m2(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function f2(t,e){Ia.set(t._key(),e)}function m2(t){return hn(t._redirectPersistence)}function p2(t){return Ea(u2,t.config.apiKey,t.name)}async function g2(t,e,n=!1){if(mt(t.app))return Promise.reject(gn(t));const s=An(t),r=L0(s,e),a=await new d2(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=10*60*1e3;class y2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!O0(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(zt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x2&&this.cachedEventUids.clear(),this.cachedEventUids.has(hp(e))}saveEventToCache(e){this.cachedEventUids.add(hp(e)),this.lastProcessedEventTime=Date.now()}}function hp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function O0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(t,e={}){return Rn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b2=/^https?/;async function N2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await w2(t);for(const n of e)try{if(j2(n))return}catch{}Et(t,"unauthorized-domain")}function j2(t){const e=cd(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!b2.test(n))return!1;if(_2.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Co(3e4,6e4);function fp(){const t=en().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k2(t){return new Promise((e,n)=>{var r,o,a;function s(){fp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fp(),n(zt(t,"network-request-failed"))},timeout:S2.get()})}if((o=(r=en().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=en().gapi)!=null&&a.load)s();else{const l=pk("iframefcb");return en()[l]=()=>{gapi.load?s():n(zt(t,"network-request-failed"))},v0(`${mk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ta=null,e})}let Ta=null;function C2(t){return Ta=Ta||k2(t),Ta}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new Co(5e3,15e3),I2="__/auth/iframe",T2="emulator/auth/iframe",P2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A2(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ah(e,T2):`https://${t.config.authDomain}/${I2}`,s={apiKey:e.apiKey,appName:t.name,v:Gr},r=R2.get(t.config.apiHost);r&&(s.eid=r);const o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${Vr(s).slice(1)}`}async function L2(t){const e=await C2(t),n=en().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:A2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P2,dontclear:!0},s=>new Promise(async(r,o)=>{await s.restyle({setHideOnLeave:!1});const a=zt(t,"network-request-failed"),l=en().setTimeout(()=>{o(a)},E2.get());function c(){en().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O2=500,M2=600,F2="_blank",U2="http://localhost";class mp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $2(t,e,n,s=O2,r=M2){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...D2,width:s.toString(),height:r.toString(),top:o,left:a},u=Je().toLowerCase();n&&(l=h0(u)?F2:n),u0(u)&&(e=e||U2,c.scrollbars="yes");const h=Object.entries(c).reduce((d,[v,m])=>`${d}${v}=${m},`,"");if(ik(u)&&l!=="_self")return z2(e||"",l),new mp(null);const f=window.open(e||"",l,h);H(f,t,"popup-blocked");try{f.focus()}catch{}return new mp(f)}function z2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="__/auth/handler",W2="emulator/auth/handler",H2=encodeURIComponent("fac");async function pp(t,e,n,s,r,o){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Gr,eventId:r};if(e instanceof Fh){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sd(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Io){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${H2}=${encodeURIComponent(c)}`:"";return`${V2(t)}?${Vr(l).slice(1)}${u}`}function V2({config:t}){return t.emulator?Ah(t,W2):`https://${t.authDomain}/${B2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="webStorageSupport";class G2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I0,this._completeRedirectFn=g2,this._overrideRedirectResult=f2}async _openPopup(e,n,s,r){var a;kn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await pp(e,n,s,cd(),r);return $2(e,o,Uh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const o=await pp(e,n,s,cd(),r);return Qk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(kn(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await L2(e),s=new y2(e);return n.register("authEvent",r=>(H(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qc,{type:Qc},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Qc];o!==void 0&&n(!!o),Et(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x0()||d0()||Dh()}}const q2=G2;var gp="@firebase/auth",xp="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y2(t){Lr(new Bs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;H(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y0(t)},u=new dk(s,r,o,c);return _k(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Lr(new Bs("auth-internal",e=>{const n=An(e.getProvider("auth").getImmediate());return(s=>new K2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(gp,xp,Q2(t)),ss(gp,xp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=5*60,X2=Vy("authIdTokenMaxAge")||J2;let yp=null;const Z2=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>X2)return;const r=n==null?void 0:n.token;yp!==r&&(yp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function M0(t=e0()){const e=Th(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wk(t,{popupRedirectResolver:q2,persistence:[r2,Gk,I0]}),s=Vy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const a=Z2(o.toString());zk(n,a,()=>a(n.currentUser)),$k(n,l=>a(l))}}const r=Wy("auth");return r&&bk(n,`http://${r}`),n}function eC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const o=zt("internal-error");o.customData=r,n(o)},s.type="text/javascript",s.charset="UTF-8",eC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y2("Browser");var vp={};const wp="@firebase/database",_p="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0="";function tC(t){F0=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ce(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:so(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nC(e)}}catch{}return new sC},Ps=U0("localStorage"),rC=U0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Eh("@firebase/database"),iC=function(){let t=1;return function(){return t++}}(),$0=function(t){const e=Ij(t),n=new Sj;n.update(e);const s=n.digest();return jh.encodeByteArray(s)},Po=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Po.apply(null,s):typeof s=="object"?e+=Ce(s):e+=s,e+=" "}return e};let Pi=null,bp=!0;const oC=function(t,e){A(!e,"Can't turn on custom loggers persistently."),Sr.logLevel=re.VERBOSE,Pi=Sr.log.bind(Sr)},Ve=function(...t){if(bp===!0&&(bp=!1,Pi===null&&rC.get("logging_enabled")===!0&&oC()),Pi){const e=Po.apply(null,t);Pi(e)}},Ro=function(t){return function(...e){Ve(t,...e)}},hd=function(...t){const e="FIREBASE INTERNAL ERROR: "+Po(...t);Sr.error(e)},Cn=function(...t){const e=`FIREBASE FATAL ERROR: ${Po(...t)}`;throw Sr.error(e),new Error(e)},lt=function(...t){const e="FIREBASE WARNING: "+Po(...t);Sr.warn(e)},aC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},lC=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vs="[MIN_NAME]",us="[MAX_NAME]",Kr=function(t,e){if(t===e)return 0;if(t===Vs||e===us)return-1;if(e===Vs||t===us)return 1;{const n=Np(t),s=Np(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},cC=function(t,e){return t===e?0:t<e?-1:1},ci=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ce(e))},Bh=function(t){if(typeof t!="object"||t===null)return Ce(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ce(e[s]),n+=":",n+=Bh(t[e[s]]);return n+="}",n},z0=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function ut(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const B0=function(t){A(!zh(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,o,a,l,c;t===0?(o=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),s),o=l+s,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(o=0,a=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(c=n;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(r?1:0),u.reverse();const h=u.join("");let f="";for(c=0;c<64;c+=8){let d=parseInt(h.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),f=f+d}return f.toLowerCase()},uC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hC(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const fC=new RegExp("^-?(0*)\\d{1,10}$"),mC=-2147483648,pC=2147483647,Np=function(t){if(fC.test(t)){const e=Number(t);if(e>=mC&&e<=pC)return e}return null},Qr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw lt("Exception was thrown by user callback.",n),e},Math.floor(0))}},gC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ri=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,mt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){lt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lt(e)}}class Pa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Pa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="5",W0="v",H0="s",V0="r",G0="f",q0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K0="ls",Q0="p",fd="ac",Y0="websocket",J0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,s,r,o=!1,a="",l=!1,c=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ps.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ps.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function vC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Z0(t,e,n){A(typeof e=="string","typeof type must == string"),A(typeof n=="object","typeof params must == object");let s;if(e===Y0)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===J0)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);vC(t)&&(n.ns=t.namespace);const r=[];return ut(n,(o,a)=>{r.push(o+"="+a)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.counters_={}}incrementCounter(e,n=1){sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ij(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc={},Jc={};function Hh(t){const e=t.toString();return Yc[e]||(Yc[e]=new wC),Yc[e]}function _C(t,e){const n=t.toString();return Jc[n]||(Jc[n]=e()),Jc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Qr(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="start",NC="close",jC="pLPCommand",SC="pRTLPCB",ev="id",tv="pw",nv="ser",kC="cb",CC="seg",EC="ts",IC="d",TC="dframe",sv=1870,rv=30,PC=sv-rv,RC=25e3,AC=3e4;class fr{constructor(e,n,s,r,o,a,l){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ro(e),this.stats_=Hh(n),this.urlFn=c=>(this.appCheckToken&&(c[fd]=this.appCheckToken),Z0(n,J0,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new bC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(AC)),lC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vh((...o)=>{const[a,l,c,u,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===jp)this.id=l,this.password=c;else if(a===NC)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const s={};s[jp]="t",s[nv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[kC]=this.scriptTagHolder.uniqueCallbackIdentifier),s[W0]=Wh,this.transportSessionId&&(s[H0]=this.transportSessionId),this.lastSessionId&&(s[K0]=this.lastSessionId),this.applicationId&&(s[Q0]=this.applicationId),this.appCheckToken&&(s[fd]=this.appCheckToken),typeof location<"u"&&location.hostname&&q0.test(location.hostname)&&(s[V0]=G0);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fr.forceAllow_=!0}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){return fr.forceAllow_?!0:!fr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!uC()&&!dC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=zy(n),r=z0(s,PC);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[TC]="t",s[ev]=e,s[tv]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ce(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Vh{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iC(),window[jC+this.uniqueCallbackIdentifier]=e,window[SC+this.uniqueCallbackIdentifier]=n,this.myIFrame=Vh.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Ve("frame writing exception"),l.stack&&Ve(l.stack),Ve(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ve("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ev]=this.myID,e[tv]=this.myPW,e[nv]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+rv+s.length<=sv;){const a=this.pendingSegs.shift();s=s+"&"+CC+r+"="+a.seg+"&"+EC+r+"="+a.ts+"&"+IC+r+"="+a.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(RC)),o=()=>{clearTimeout(r),s()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ve("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=16384,DC=45e3;let pl=null;typeof MozWebSocket<"u"?pl=MozWebSocket:typeof WebSocket<"u"&&(pl=WebSocket);class Dt{constructor(e,n,s,r,o,a,l){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ro(this.connId),this.stats_=Hh(n),this.connURL=Dt.connectionURL_(n,a,l,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,o){const a={};return a[W0]=Wh,typeof location<"u"&&location.hostname&&q0.test(location.hostname)&&(a[V0]=G0),n&&(a[H0]=n),s&&(a[K0]=s),r&&(a[fd]=r),o&&(a[Q0]=o),Z0(e,Y0,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ps.set("previous_websocket_failure",!0);try{let s;Qy(),this.mySock=new pl(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Dt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&pl!==null&&!Dt.forceDisallow_}static previouslyFailed(){return Ps.isInMemoryStorage||Ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ps.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=so(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(A(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=z0(n,LC);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(DC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dt.responsesRequiredToBeHealthy=2;Dt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static get ALL_TRANSPORTS(){return[fr,Dt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Dt&&Dt.isAvailable();let s=n&&!Dt.previouslyFailed();if(e.webSocketOnly&&(n||lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Dt];else{const r=this.transports_=[];for(const o of ao.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);ao.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ao.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6e4,MC=5e3,FC=10*1024,UC=100*1024,Xc="t",Sp="d",$C="s",kp="r",zC="e",Cp="o",Ep="a",Ip="n",Tp="p",BC="h";class WC{constructor(e,n,s,r,o,a,l,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ro("c:"+this.id+":"),this.transportManager_=new ao(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ri(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>FC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xc in e){const n=e[Xc];n===Ep?this.upgradeIfSecondaryHealthy_():n===kp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Cp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ci("t",e),s=ci("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Tp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ep,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ip,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ci("t",e),s=ci("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ci(Xc,e);if(Sp in e){const s=e[Sp];if(n===BC){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Ip){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$C?this.onConnectionShutdown_(s):n===kp?this.onReset_(s):n===zC?hd("Server Error: "+s):n===Cp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Wh!==s&&lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Ri(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(OC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ri(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(MC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Tp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!s||s===r[o].context)){r.splice(o,1);return}}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends ov{static getInstance(){return new gl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return A(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=32,Rp=768;class ie{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ee(){return new ie("")}function K(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ds(t){return t.pieces_.length-t.pieceNum_}function le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ie(t.pieces_,e)}function av(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function HC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lv(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cv(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ie(e,0)}function Ee(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof ie)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new ie(n,0)}function Q(t){return t.pieceNum_>=t.pieces_.length}function Qe(t,e){const n=K(t),s=K(e);if(n===null)return e;if(n===s)return Qe(le(t),le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Gh(t,e){if(ds(t)!==ds(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Mt(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ds(t)>ds(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class VC{constructor(e,n){this.errorPrefix_=n,this.parts_=lv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Jl(this.parts_[s]);uv(this)}}function GC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Jl(e),uv(t)}function qC(t){const e=t.parts_.pop();t.byteLength_-=Jl(e),t.parts_.length>0&&(t.byteLength_-=1)}function uv(t){if(t.byteLength_>Rp)throw new Error(t.errorPrefix_+"has a key path longer than "+Rp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Pp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pp+") or object contains a cycle "+Ns(t))}function Ns(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends ov{static getInstance(){return new qh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return A(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=1e3,KC=60*5*1e3,Ap=30*1e3,QC=1.3,YC=3e4,JC="server_kill",Lp=3;class xn extends iv{constructor(e,n,s,r,o,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=xn.nextPersistentConnectionId_++,this.log_=Ro("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ui,this.maxReconnectDelay_=KC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Qy())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&gl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Ce(o)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new Yl,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,s,r){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const o={p:s},a="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,l=>{const c=l.d,u=l.s;xn.warnOnListenWarnings_(c,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&sn(e,"w")){const s=Ar(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||jj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ap)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Nj(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const o=r.s,a=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const o={p:n,d:s};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,o){this.initConnection_();const a={p:n,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ce(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):hd("Unrecognized action received from server: "+Ce(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>YC&&(this.reconnectDelay_=ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*QC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+xn.nextConnectionId_++,o=this.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,s())},u=function(f){A(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Ve("getToken() completed but was canceled"):(Ve("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,l=new WC(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,v=>{lt(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(JC)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&lt(f),c())}}}interrupt(e){Ve("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ve("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sd(this.interruptReasons_)&&(this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(o=>Bh(o)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new ie(e).toString();let r;if(this.listens.has(s)){const o=this.listens.get(s);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Ve("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Lp&&(this.reconnectDelay_=Ap,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ve("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Lp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+F0.replace(/\./g,"-")]=1,kh()?e["framework.cordova"]=1:Ky()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=gl.getInstance().currentlyOnline();return sd(this.interruptReasons_)&&e}}xn.nextPersistentConnectionId_=0;xn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Y(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Y(Vs,e),r=new Y(Vs,n);return this.compare(s,r)!==0}minPost(){return Y.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa;class dv extends tc{static get __EMPTY_NODE(){return oa}static set __EMPTY_NODE(e){oa=e}compare(e,n){return Kr(e.name,n.name)}isDefinedOn(e){throw Wr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Y.MIN}maxPost(){return new Y(us,oa)}makePost(e,n){return A(typeof e=="string","KeyIndex indexValue must always be a string."),new Y(e,oa)}toString(){return".key"}}const Ds=new dv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?s(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ae{constructor(e,n,s,r,o){this.key=e,this.value=n,this.color=s??Ae.RED,this.left=r??rt.EMPTY_NODE,this.right=o??rt.EMPTY_NODE}copy(e,n,s,r,o){return new Ae(e??this.key,n??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const o=s(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return rt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ae.RED=!0;Ae.BLACK=!1;class XC{copy(e,n,s,r,o){return this}insert(e,n,s){return new Ae(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class rt{constructor(e,n=rt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new rt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ae.BLACK,null,null))}remove(e){return new rt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ae.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new aa(this.root_,null,this.comparator_,!0,e)}}rt.EMPTY_NODE=new XC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e){return Kr(t.name,e.name)}function Kh(t,e){return Kr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md;function eE(t){md=t}const hv=function(t){return typeof t=="number"?"number:"+B0(t):"string:"+t},fv=function(t){if(t.isLeafNode()){const e=t.val();A(typeof e=="string"||typeof e=="number"||typeof e=="object"&&sn(e,".sv"),"Priority must be a string or number.")}else A(t===md||t.isEmpty(),"priority of unexpected type.");A(t===md||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp;class Pe{static set __childrenNodeConstructor(e){Dp=e}static get __childrenNodeConstructor(){return Dp}constructor(e,n=Pe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fv(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Q(e)?this:K(e)===".priority"?this.priorityNode_:Pe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=K(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(A(s!==".priority"||ds(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Pe.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hv(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=B0(this.value_):e+=this.value_,this.lazyHash_=$0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pe.__childrenNodeConstructor?-1:(A(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Pe.VALUE_TYPE_ORDER.indexOf(n),o=Pe.VALUE_TYPE_ORDER.indexOf(s);return A(r>=0,"Unknown leaf type: "+n),A(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv,pv;function tE(t){mv=t}function nE(t){pv=t}class sE extends tc{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),o=s.compareTo(r);return o===0?Kr(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(us,new Pe("[PRIORITY-POST]",pv))}makePost(e,n){const s=mv(e);return new Y(n,new Pe("[PRIORITY-POST]",s))}toString(){return".priority"}}const xe=new sE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=Math.log(2);class iE{constructor(e){const n=o=>parseInt(Math.log(o)/rE,10),s=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xl=function(t,e,n,s){t.sort(e);const r=function(c,u){const h=u-c;let f,d;if(h===0)return null;if(h===1)return f=t[c],d=n?n(f):f,new Ae(d,f.node,Ae.BLACK,null,null);{const v=parseInt(h/2,10)+c,m=r(c,v),x=r(v+1,u);return f=t[v],d=n?n(f):f,new Ae(d,f.node,Ae.BLACK,m,x)}},o=function(c){let u=null,h=null,f=t.length;const d=function(m,x){const C=f-m,y=f;f-=m;const g=r(C+1,y),_=t[C],b=n?n(_):_;v(new Ae(b,_.node,x,null,g))},v=function(m){u?(u.left=m,u=m):(h=m,u=m)};for(let m=0;m<c.count;++m){const x=c.nextBitIsOne(),C=Math.pow(2,c.count-(m+1));x?d(C,Ae.BLACK):(d(C,Ae.BLACK),d(C,Ae.RED))}return h},a=new iE(t.length),l=o(a);return new rt(s||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc;const er={};class fn{static get Default(){return A(er&&xe,"ChildrenNode.ts has not been loaded"),Zc=Zc||new fn({".priority":er},{".priority":xe}),Zc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ar(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof rt?n:null}hasIndex(e){return sn(this.indexSet_,e.toString())}addIndex(e,n){A(e!==Ds,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const o=n.getIterator(Y.Wrap);let a=o.getNext();for(;a;)r=r||e.isDefinedOn(a.node),s.push(a),a=o.getNext();let l;r?l=xl(s,e.getCompare()):l=er;const c=e.toString(),u={...this.indexSet_};u[c]=e;const h={...this.indexes_};return h[c]=l,new fn(h,u)}addToIndexes(e,n){const s=ol(this.indexes_,(r,o)=>{const a=Ar(this.indexSet_,o);if(A(a,"Missing index implementation for "+o),r===er)if(a.isDefinedOn(e.node)){const l=[],c=n.getIterator(Y.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),xl(l,a.getCompare())}else return er;else{const l=n.get(e.name);let c=r;return l&&(c=c.remove(new Y(e.name,l))),c.insert(e,e.node)}});return new fn(s,this.indexSet_)}removeFromIndexes(e,n){const s=ol(this.indexes_,r=>{if(r===er)return r;{const o=n.get(e.name);return o?r.remove(new Y(e.name,o)):r}});return new fn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di;class V{static get EMPTY_NODE(){return di||(di=new V(new rt(Kh),null,fn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&fv(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||di}updatePriority(e){return this.children_.isEmpty()?this:new V(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?di:n}}getChild(e){const n=K(e);return n===null?this:this.getImmediateChild(n).getChild(le(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(A(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Y(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(s,this.children_));const a=r.isEmpty()?di:this.priorityNode_;return new V(r,a,o)}}updateChild(e,n){const s=K(e);if(s===null)return n;{A(K(e)!==".priority"||ds(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(le(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,o=!0;if(this.forEachChild(xe,(a,l)=>{n[a]=l.val(e),s++,o&&V.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!e&&o&&r<2*s){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hv(this.getPriority().val())+":"),this.forEachChild(xe,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":$0(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const o=r.getPredecessorKey(new Y(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Y(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Y(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Y.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Y.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ao?-1:0}withIndex(e){if(e===Ds||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new V(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ds||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(xe),r=n.getIterator(xe);let o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Ds?null:this.indexMap_.get(e.toString())}}V.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class oE extends V{constructor(){super(new rt(Kh),V.EMPTY_NODE,fn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}}const Ao=new oE;Object.defineProperties(Y,{MIN:{value:new Y(Vs,V.EMPTY_NODE)},MAX:{value:new Y(us,Ao)}});dv.__EMPTY_NODE=V.EMPTY_NODE;Pe.__childrenNodeConstructor=V;eE(Ao);nE(Ao);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=!0;function Le(t,e=null){if(t===null)return V.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),A(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pe(n,Le(e))}if(!(t instanceof Array)&&aE){const n=[];let s=!1;if(ut(t,(a,l)=>{if(a.substring(0,1)!=="."){const c=Le(l);c.isEmpty()||(s=s||!c.getPriority().isEmpty(),n.push(new Y(a,c)))}}),n.length===0)return V.EMPTY_NODE;const o=xl(n,ZC,a=>a.name,Kh);if(s){const a=xl(n,xe.getCompare());return new V(o,Le(e),new fn({".priority":a},{".priority":xe}))}else return new V(o,Le(e),fn.Default)}else{let n=V.EMPTY_NODE;return ut(t,(s,r)=>{if(sn(t,s)&&s.substring(0,1)!=="."){const o=Le(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(s,o))}}),n.updatePriority(Le(e))}}tE(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends tc{constructor(e){super(),this.indexPath_=e,A(!Q(e)&&K(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),o=s.compareTo(r);return o===0?Kr(e.name,n.name):o}makePost(e,n){const s=Le(e),r=V.EMPTY_NODE.updateChild(this.indexPath_,s);return new Y(n,r)}maxPost(){const e=V.EMPTY_NODE.updateChild(this.indexPath_,Ao);return new Y(us,e)}toString(){return lv(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends tc{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Kr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(e,n){const s=Le(e);return new Y(n,s)}toString(){return".value"}}const gv=new lE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){return{type:"value",snapshotNode:t}}function Dr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function lo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function co(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cE(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.index_=e}updateChild(e,n,s,r,o,a){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(r).equals(s.getChild(r))&&l.isEmpty()===s.isEmpty()||(a!=null&&(s.isEmpty()?e.hasChild(n)?a.trackChildChange(lo(n,l)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(Dr(n,s)):a.trackChildChange(co(n,s,l))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(xe,(r,o)=>{n.hasChild(r)||s.trackChildChange(lo(r,o))}),n.isLeafNode()||n.forEachChild(xe,(r,o)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(o)||s.trackChildChange(co(r,o,a))}else s.trackChildChange(Dr(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.indexedFilter_=new Yh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=uo.getStartPost_(e),this.endPost_=uo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,o,a){return this.matches(new Y(n,s))||(s=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,o,a)}updateFullNode(e,n,s){n.isLeafNode()&&(n=V.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(V.EMPTY_NODE);const o=this;return n.forEachChild(xe,(a,l)=>{o.matches(new Y(a,l))||(r=r.updateImmediateChild(a,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new uo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,o,a){return this.rangedFilter_.matches(new Y(n,s))||(s=V.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,o,a):this.fullLimitUpdateChild_(e,n,s,o,a)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))r=r.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let a=0;for(;o.hasNext();){const l=o.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:r=r.updateImmediateChild(l.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,o){let a;if(this.reverse_){const f=this.index_.getCompare();a=(d,v)=>f(v,d)}else a=this.index_.getCompare();const l=e;A(l.numChildren()===this.limit_,"");const c=new Y(n,s),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(n)){const f=l.getImmediateChild(n);let d=r.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const v=d==null?1:a(d,c);if(h&&!s.isEmpty()&&v>=0)return o!=null&&o.trackChildChange(co(n,s,f)),l.updateImmediateChild(n,s);{o!=null&&o.trackChildChange(lo(n,f));const x=l.updateImmediateChild(n,V.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(o!=null&&o.trackChildChange(Dr(d.name,d.node)),x.updateImmediateChild(d.name,d.node)):x}}else return s.isEmpty()?e:h&&a(u,c)>=0?(o!=null&&(o.trackChildChange(lo(u.name,u.node)),o.trackChildChange(Dr(n,s))),l.updateImmediateChild(n,s).updateImmediateChild(u.name,V.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vs}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xe}copy(){const e=new Jh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dE(t){return t.loadsAllData()?new Yh(t.getIndex()):t.hasLimit()?new uE(t):new uo(t)}function hE(t,e,n){const s=t.copy();return s.startSet_=!0,e===void 0&&(e=null),s.indexStartValue_=e,n!=null?(s.startNameSet_=!0,s.indexStartName_=n):(s.startNameSet_=!1,s.indexStartName_=""),s}function fE(t,e,n){const s=t.copy();return s.endSet_=!0,e===void 0&&(e=null),s.indexEndValue_=e,n!==void 0?(s.endNameSet_=!0,s.indexEndName_=n):(s.endNameSet_=!1,s.indexEndName_=""),s}function mE(t,e){const n=t.copy();return n.index_=e,n}function Op(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xe?n="$priority":t.index_===gv?n="$value":t.index_===Ds?n="$key":(A(t.index_ instanceof Qh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ce(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ce(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ce(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ce(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ce(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Mp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends iv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=Ro("p:rest:"),this.listens_={}}listen(e,n,s,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const a=yl.getListenId_(e,s),l={};this.listens_[a]=l;const c=Op(e._queryParams);this.restRequest_(o+".json",c,(u,h)=>{let f=h;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,s),Ar(this.listens_,a)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",r(d,null)}})}unlisten(e,n){const s=yl.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Op(e._queryParams),s=e._path.toString(),r=new Yl;return this.restRequest_(s+".json",n,(o,a)=>{let l=a;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(s,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vr(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(s&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=so(l.responseText)}catch{lt("Failed to parse JSON response for "+a+": "+l.responseText)}s(null,c)}else l.status!==401&&l.status!==404&&lt("Got unsuccessful REST response for "+a+" Status: "+l.status),s(l.status);s=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(){return{value:null,children:new Map}}function yv(t,e,n){if(Q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=K(e);t.children.has(s)||t.children.set(s,vl());const r=t.children.get(s);e=le(e),yv(r,e,n)}}function pd(t,e,n){t.value!==null?n(e,t.value):gE(t,(s,r)=>{const o=new ie(e.toString()+"/"+s);pd(r,o,n)})}function gE(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&ut(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=10*1e3,yE=30*1e3,vE=5*60*1e3;class wE{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xE(e);const s=Fp+(yE-Fp)*Math.random();Ri(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;ut(e,(r,o)=>{o>0&&sn(this.statsToReport_,r)&&(n[r]=o,s=!0)}),s&&this.server_.reportStats(n),Ri(this.reportStats_.bind(this),Math.floor(Math.random()*2*vE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ft||(Ft={}));function vv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Ft.ACK_USER_WRITE,this.source=vv()}operationForChild(e){if(Q(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ie(e));return new wl(ee(),n,this.revert)}}else return A(K(this.path)===e,"operationForChild called for unrelated child."),new wl(le(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.source=e,this.path=n,this.type=Ft.LISTEN_COMPLETE}operationForChild(e){return Q(this.path)?new ho(this.source,ee()):new ho(this.source,le(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Ft.OVERWRITE}operationForChild(e){return Q(this.path)?new Gs(this.source,ee(),this.snap.getImmediateChild(e)):new Gs(this.source,le(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Ft.MERGE}operationForChild(e){if(Q(this.path)){const n=this.children.subtree(new ie(e));return n.isEmpty()?null:n.value?new Gs(this.source,ee(),n.value):new fo(this.source,ee(),n)}else return A(K(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fo(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Q(e))return this.isFullyInitialized()&&!this.filtered_;const n=K(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bE(t,e,n,s){const r=[],o=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(cE(a.childName,a.snapshotNode))}),hi(t,r,"child_removed",e,s,n),hi(t,r,"child_added",e,s,n),hi(t,r,"child_moved",o,s,n),hi(t,r,"child_changed",e,s,n),hi(t,r,"value",e,s,n),r}function hi(t,e,n,s,r,o){const a=s.filter(l=>l.type===n);a.sort((l,c)=>jE(t,l,c)),a.forEach(l=>{const c=NE(t,l,o);r.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function NE(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function jE(t,e,n){if(e.childName==null||n.childName==null)throw Wr("Should only compare child_ events.");const s=new Y(e.childName,e.snapshotNode),r=new Y(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t,e){return{eventCache:t,serverCache:e}}function Ai(t,e,n,s){return nc(new hs(e,n,s),t.serverCache)}function wv(t,e,n,s){return nc(t.eventCache,new hs(e,n,s))}function _l(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu;const SE=()=>(eu||(eu=new rt(cC)),eu);class de{static fromObject(e){let n=new de(null);return ut(e,(s,r)=>{n=n.set(new ie(s),r)}),n}constructor(e,n=SE()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ee(),value:this.value};if(Q(e))return null;{const s=K(e),r=this.children.get(s);if(r!==null){const o=r.findRootMostMatchingPathAndValue(le(e),n);return o!=null?{path:Ee(new ie(s),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Q(e))return this;{const n=K(e),s=this.children.get(n);return s!==null?s.subtree(le(e)):new de(null)}}set(e,n){if(Q(e))return new de(n,this.children);{const s=K(e),o=(this.children.get(s)||new de(null)).set(le(e),n),a=this.children.insert(s,o);return new de(this.value,a)}}remove(e){if(Q(e))return this.children.isEmpty()?new de(null):new de(null,this.children);{const n=K(e),s=this.children.get(n);if(s){const r=s.remove(le(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new de(null):new de(this.value,o)}else return this}}get(e){if(Q(e))return this.value;{const n=K(e),s=this.children.get(n);return s?s.get(le(e)):null}}setTree(e,n){if(Q(e))return n;{const s=K(e),o=(this.children.get(s)||new de(null)).setTree(le(e),n);let a;return o.isEmpty()?a=this.children.remove(s):a=this.children.insert(s,o),new de(this.value,a)}}fold(e){return this.fold_(ee(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,o)=>{s[r]=o.fold_(Ee(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ee(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Q(e))return null;{const o=K(e),a=this.children.get(o);return a?a.findOnPath_(le(e),Ee(n,o),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ee(),n)}foreachOnPath_(e,n,s){if(Q(e))return this;{this.value&&s(n,this.value);const r=K(e),o=this.children.get(r);return o?o.foreachOnPath_(le(e),Ee(n,r),s):new de(null)}}foreach(e){this.foreach_(ee(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Ee(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.writeTree_=e}static empty(){return new Bt(new de(null))}}function Li(t,e,n){if(Q(e))return new Bt(new de(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let o=s.value;const a=Qe(r,e);return o=o.updateChild(a,n),new Bt(t.writeTree_.set(r,o))}else{const r=new de(n),o=t.writeTree_.setTree(e,r);return new Bt(o)}}}function Up(t,e,n){let s=t;return ut(n,(r,o)=>{s=Li(s,Ee(e,r),o)}),s}function $p(t,e){if(Q(e))return Bt.empty();{const n=t.writeTree_.setTree(e,new de(null));return new Bt(n)}}function gd(t,e){return Xs(t,e)!=null}function Xs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qe(n.path,e)):null}function zp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xe,(s,r)=>{e.push(new Y(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Y(s,r.value))}),e}function rs(t,e){if(Q(e))return t;{const n=Xs(t,e);return n!=null?new Bt(new de(n)):new Bt(t.writeTree_.subtree(e))}}function xd(t){return t.writeTree_.isEmpty()}function Or(t,e){return _v(ee(),t.writeTree_,e)}function _v(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(A(o.value!==null,"Priority writes must always be leaf nodes"),s=o.value):n=_v(Ee(t,r),o,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Ee(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e){return Sv(e,t)}function kE(t,e,n,s,r){A(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=Li(t.visibleWrites,e,n)),t.lastWriteId=s}function CE(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function EE(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,o=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&IE(l,s.path)?r=!1:Mt(s.path,l.path)&&(o=!0)),a--}if(r){if(o)return TE(t),!0;if(s.snap)t.visibleWrites=$p(t.visibleWrites,s.path);else{const l=s.children;ut(l,c=>{t.visibleWrites=$p(t.visibleWrites,Ee(s.path,c))})}return!0}else return!1}function IE(t,e){if(t.snap)return Mt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Mt(Ee(t.path,n),e))return!0;return!1}function TE(t){t.visibleWrites=bv(t.allWrites,PE,ee()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function PE(t){return t.visible}function bv(t,e,n){let s=Bt.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const a=o.path;let l;if(o.snap)Mt(n,a)?(l=Qe(n,a),s=Li(s,l,o.snap)):Mt(a,n)&&(l=Qe(a,n),s=Li(s,ee(),o.snap.getChild(l)));else if(o.children){if(Mt(n,a))l=Qe(n,a),s=Up(s,l,o.children);else if(Mt(a,n))if(l=Qe(a,n),Q(l))s=Up(s,ee(),o.children);else{const c=Ar(o.children,K(l));if(c){const u=c.getChild(le(l));s=Li(s,ee(),u)}}}else throw Wr("WriteRecord should have .snap or .children")}}return s}function Nv(t,e,n,s,r){if(!s&&!r){const o=Xs(t.visibleWrites,e);if(o!=null)return o;{const a=rs(t.visibleWrites,e);if(xd(a))return n;if(n==null&&!gd(a,ee()))return null;{const l=n||V.EMPTY_NODE;return Or(a,l)}}}else{const o=rs(t.visibleWrites,e);if(!r&&xd(o))return n;if(!r&&n==null&&!gd(o,ee()))return null;{const a=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(Mt(u.path,e)||Mt(e,u.path))},l=bv(t.allWrites,a,e),c=n||V.EMPTY_NODE;return Or(l,c)}}}function RE(t,e,n){let s=V.EMPTY_NODE;const r=Xs(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(xe,(o,a)=>{s=s.updateImmediateChild(o,a)}),s;if(n){const o=rs(t.visibleWrites,e);return n.forEachChild(xe,(a,l)=>{const c=Or(rs(o,new ie(a)),l);s=s.updateImmediateChild(a,c)}),zp(o).forEach(a=>{s=s.updateImmediateChild(a.name,a.node)}),s}else{const o=rs(t.visibleWrites,e);return zp(o).forEach(a=>{s=s.updateImmediateChild(a.name,a.node)}),s}}function AE(t,e,n,s,r){A(s||r,"Either existingEventSnap or existingServerSnap must exist");const o=Ee(e,n);if(gd(t.visibleWrites,o))return null;{const a=rs(t.visibleWrites,o);return xd(a)?r.getChild(n):Or(a,r.getChild(n))}}function LE(t,e,n,s){const r=Ee(e,n),o=Xs(t.visibleWrites,r);if(o!=null)return o;if(s.isCompleteForChild(n)){const a=rs(t.visibleWrites,r);return Or(a,s.getNode().getImmediateChild(n))}else return null}function DE(t,e){return Xs(t.visibleWrites,e)}function OE(t,e,n,s,r,o,a){let l;const c=rs(t.visibleWrites,e),u=Xs(c,ee());if(u!=null)l=u;else if(n!=null)l=Or(c,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const h=[],f=a.getCompare(),d=o?l.getReverseIteratorFrom(s,a):l.getIteratorFrom(s,a);let v=d.getNext();for(;v&&h.length<r;)f(v,s)!==0&&h.push(v),v=d.getNext();return h}else return[]}function ME(){return{visibleWrites:Bt.empty(),allWrites:[],lastWriteId:-1}}function bl(t,e,n,s){return Nv(t.writeTree,t.treePath,e,n,s)}function ef(t,e){return RE(t.writeTree,t.treePath,e)}function Bp(t,e,n,s){return AE(t.writeTree,t.treePath,e,n,s)}function Nl(t,e){return DE(t.writeTree,Ee(t.treePath,e))}function FE(t,e,n,s,r,o){return OE(t.writeTree,t.treePath,e,n,s,r,o)}function tf(t,e,n){return LE(t.writeTree,t.treePath,e,n)}function jv(t,e){return Sv(Ee(t.treePath,e),t.writeTree)}function Sv(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;A(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),A(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(s,co(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(s,lo(s,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(s,Dr(s,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(s,co(s,e.snapshotNode,r.oldSnap));else throw Wr("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const kv=new $E;class nf{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new hs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tf(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qs(this.viewCache_),o=FE(this.writes_,r,n,1,s,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){return{filter:t}}function BE(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function WE(t,e,n,s,r){const o=new UE;let a,l;if(n.type===Ft.OVERWRITE){const u=n;u.source.fromUser?a=yd(t,e,u.path,u.snap,s,r,o):(A(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!Q(u.path),a=jl(t,e,u.path,u.snap,s,r,l,o))}else if(n.type===Ft.MERGE){const u=n;u.source.fromUser?a=VE(t,e,u.path,u.children,s,r,o):(A(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=vd(t,e,u.path,u.children,s,r,l,o))}else if(n.type===Ft.ACK_USER_WRITE){const u=n;u.revert?a=KE(t,e,u.path,s,r,o):a=GE(t,e,u.path,u.affectedTree,s,r,o)}else if(n.type===Ft.LISTEN_COMPLETE)a=qE(t,e,n.path,s,o);else throw Wr("Unknown operation type: "+n.type);const c=o.getChanges();return HE(e,a,c),{viewCache:a,changes:c}}function HE(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),o=_l(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(o)||!s.getNode().getPriority().equals(o.getPriority()))&&n.push(xv(_l(e)))}}function Cv(t,e,n,s,r,o){const a=e.eventCache;if(Nl(s,n)!=null)return e;{let l,c;if(Q(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=qs(e),h=u instanceof V?u:V.EMPTY_NODE,f=ef(s,h);l=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const u=bl(s,qs(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=K(n);if(u===".priority"){A(ds(n)===1,"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const f=Bp(s,n,h,c);f!=null?l=t.filter.updatePriority(h,f):l=a.getNode()}else{const h=le(n);let f;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const d=Bp(s,n,a.getNode(),c);d!=null?f=a.getNode().getImmediateChild(u).updateChild(h,d):f=a.getNode().getImmediateChild(u)}else f=tf(s,u,e.serverCache);f!=null?l=t.filter.updateChild(a.getNode(),u,f,h,r,o):l=a.getNode()}}return Ai(e,l,a.isFullyInitialized()||Q(n),t.filter.filtersNodes())}}function jl(t,e,n,s,r,o,a,l){const c=e.serverCache;let u;const h=a?t.filter:t.filter.getIndexedFilter();if(Q(n))u=h.updateFullNode(c.getNode(),s,null);else if(h.filtersNodes()&&!c.isFiltered()){const v=c.getNode().updateChild(n,s);u=h.updateFullNode(c.getNode(),v,null)}else{const v=K(n);if(!c.isCompleteForPath(n)&&ds(n)>1)return e;const m=le(n),C=c.getNode().getImmediateChild(v).updateChild(m,s);v===".priority"?u=h.updatePriority(c.getNode(),C):u=h.updateChild(c.getNode(),v,C,m,kv,null)}const f=wv(e,u,c.isFullyInitialized()||Q(n),h.filtersNodes()),d=new nf(r,f,o);return Cv(t,f,n,r,d,l)}function yd(t,e,n,s,r,o,a){const l=e.eventCache;let c,u;const h=new nf(r,e,o);if(Q(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,a),c=Ai(e,u,!0,t.filter.filtersNodes());else{const f=K(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),c=Ai(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=le(n),v=l.getNode().getImmediateChild(f);let m;if(Q(d))m=s;else{const x=h.getCompleteChild(f);x!=null?av(d)===".priority"&&x.getChild(cv(d)).isEmpty()?m=x:m=x.updateChild(d,s):m=V.EMPTY_NODE}if(v.equals(m))c=e;else{const x=t.filter.updateChild(l.getNode(),f,m,d,h,a);c=Ai(e,x,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Wp(t,e){return t.eventCache.isCompleteForChild(e)}function VE(t,e,n,s,r,o,a){let l=e;return s.foreach((c,u)=>{const h=Ee(n,c);Wp(e,K(h))&&(l=yd(t,l,h,u,r,o,a))}),s.foreach((c,u)=>{const h=Ee(n,c);Wp(e,K(h))||(l=yd(t,l,h,u,r,o,a))}),l}function Hp(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function vd(t,e,n,s,r,o,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Q(n)?u=s:u=new de(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((f,d)=>{if(h.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),m=Hp(t,v,d);c=jl(t,c,new ie(f),m,r,o,a,l)}}),u.children.inorderTraversal((f,d)=>{const v=!e.serverCache.isCompleteForChild(f)&&d.value===null;if(!h.hasChild(f)&&!v){const m=e.serverCache.getNode().getImmediateChild(f),x=Hp(t,m,d);c=jl(t,c,new ie(f),x,r,o,a,l)}}),c}function GE(t,e,n,s,r,o,a){if(Nl(r,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(s.value!=null){if(Q(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return jl(t,e,n,c.getNode().getChild(n),r,o,l,a);if(Q(n)){let u=new de(null);return c.getNode().forEachChild(Ds,(h,f)=>{u=u.set(new ie(h),f)}),vd(t,e,n,u,r,o,l,a)}else return e}else{let u=new de(null);return s.foreach((h,f)=>{const d=Ee(n,h);c.isCompleteForPath(d)&&(u=u.set(h,c.getNode().getChild(d)))}),vd(t,e,n,u,r,o,l,a)}}function qE(t,e,n,s,r){const o=e.serverCache,a=wv(e,o.getNode(),o.isFullyInitialized()||Q(n),o.isFiltered());return Cv(t,a,n,s,kv,r)}function KE(t,e,n,s,r,o){let a;if(Nl(s,n)!=null)return e;{const l=new nf(s,e,r),c=e.eventCache.getNode();let u;if(Q(n)||K(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=bl(s,qs(e));else{const f=e.serverCache.getNode();A(f instanceof V,"serverChildren would be complete if leaf node"),h=ef(s,f)}h=h,u=t.filter.updateFullNode(c,h,o)}else{const h=K(n);let f=tf(s,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=c.getImmediateChild(h)),f!=null?u=t.filter.updateChild(c,h,f,le(n),l,o):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,V.EMPTY_NODE,le(n),l,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=bl(s,qs(e)),a.isLeafNode()&&(u=t.filter.updateFullNode(u,a,o)))}return a=e.serverCache.isFullyInitialized()||Nl(s,ee())!=null,Ai(e,u,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Yh(s.getIndex()),o=dE(s);this.processor_=zE(o);const a=n.serverCache,l=n.eventCache,c=r.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=o.updateFullNode(V.EMPTY_NODE,l.getNode(),null),h=new hs(c,a.isFullyInitialized(),r.filtersNodes()),f=new hs(u,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=nc(f,h),this.eventGenerator_=new _E(this.query_)}get query(){return this.query_}}function YE(t){return t.viewCache_.serverCache.getNode()}function JE(t){return _l(t.viewCache_)}function XE(t,e){const n=qs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Q(e)&&!n.getImmediateChild(K(e)).isEmpty())?n.getChild(e):null}function Vp(t){return t.eventRegistrations_.length===0}function ZE(t,e){t.eventRegistrations_.push(e)}function Gp(t,e,n){const s=[];if(n){A(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(n,r);a&&s.push(a)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const a=t.eventRegistrations_[o];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function qp(t,e,n,s){e.type===Ft.MERGE&&e.source.queryId!==null&&(A(qs(t.viewCache_),"We should always have a full cache before handling merges"),A(_l(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=WE(t.processor_,r,e,n,s);return BE(t.processor_,o.viewCache),A(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Ev(t,o.changes,o.viewCache.eventCache.getNode(),null)}function eI(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xe,(o,a)=>{s.push(Dr(o,a))}),n.isFullyInitialized()&&s.push(xv(n.getNode())),Ev(t,s,n.getNode(),e)}function Ev(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return bE(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;class Iv{constructor(){this.views=new Map}}function tI(t){A(!Sl,"__referenceConstructor has already been defined"),Sl=t}function nI(){return A(Sl,"Reference.ts has not been loaded"),Sl}function sI(t){return t.views.size===0}function sf(t,e,n,s){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return A(o!=null,"SyncTree gave us an op for an invalid query."),qp(o,e,n,s)}else{let o=[];for(const a of t.views.values())o=o.concat(qp(a,e,n,s));return o}}function Tv(t,e,n,s,r){const o=e._queryIdentifier,a=t.views.get(o);if(!a){let l=bl(n,r?s:null),c=!1;l?c=!0:s instanceof V?(l=ef(n,s),c=!1):(l=V.EMPTY_NODE,c=!1);const u=nc(new hs(l,c,!1),new hs(s,r,!1));return new QE(e,u)}return a}function rI(t,e,n,s,r,o){const a=Tv(t,e,s,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),ZE(a,n),eI(a,n)}function iI(t,e,n,s){const r=e._queryIdentifier,o=[];let a=[];const l=fs(t);if(r==="default")for(const[c,u]of t.views.entries())a=a.concat(Gp(u,n,s)),Vp(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{const c=t.views.get(r);c&&(a=a.concat(Gp(c,n,s)),Vp(c)&&(t.views.delete(r),c.query._queryParams.loadsAllData()||o.push(c.query)))}return l&&!fs(t)&&o.push(new(nI())(e._repo,e._path)),{removed:o,events:a}}function Pv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function is(t,e){let n=null;for(const s of t.views.values())n=n||XE(s,e);return n}function Rv(t,e){if(e._queryParams.loadsAllData())return rc(t);{const s=e._queryIdentifier;return t.views.get(s)}}function Av(t,e){return Rv(t,e)!=null}function fs(t){return rc(t)!=null}function rc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl;function oI(t){A(!kl,"__referenceConstructor has already been defined"),kl=t}function aI(){return A(kl,"Reference.ts has not been loaded"),kl}let lI=1;class Kp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new de(null),this.pendingWriteTree_=ME(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lv(t,e,n,s,r){return kE(t.pendingWriteTree_,e,n,s,r),r?Do(t,new Gs(vv(),e,n)):[]}function Rs(t,e,n=!1){const s=CE(t.pendingWriteTree_,e);if(EE(t.pendingWriteTree_,e)){let o=new de(null);return s.snap!=null?o=o.set(ee(),!0):ut(s.children,a=>{o=o.set(new ie(a),!0)}),Do(t,new wl(s.path,o,n))}else return[]}function Lo(t,e,n){return Do(t,new Gs(Xh(),e,n))}function cI(t,e,n){const s=de.fromObject(n);return Do(t,new fo(Xh(),e,s))}function uI(t,e){return Do(t,new ho(Xh(),e))}function dI(t,e,n){const s=of(t,n);if(s){const r=af(s),o=r.path,a=r.queryId,l=Qe(o,e),c=new ho(Zh(a),l);return lf(t,o,c)}else return[]}function Cl(t,e,n,s,r=!1){const o=e._path,a=t.syncPointTree_.get(o);let l=[];if(a&&(e._queryIdentifier==="default"||Av(a,e))){const c=iI(a,e,n,s);sI(a)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const u=c.removed;if(l=c.events,!r){const h=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(o,(d,v)=>fs(v));if(h&&!f){const d=t.syncPointTree_.subtree(o);if(!d.isEmpty()){const v=mI(d);for(let m=0;m<v.length;++m){const x=v[m],C=x.query,y=Fv(t,x);t.listenProvider_.startListening(Di(C),mo(t,C),y.hashFn,y.onComplete)}}}!f&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(Di(e),null):u.forEach(d=>{const v=t.queryToTagMap.get(ic(d));t.listenProvider_.stopListening(Di(d),v)}))}pI(t,u)}return l}function Dv(t,e,n,s){const r=of(t,s);if(r!=null){const o=af(r),a=o.path,l=o.queryId,c=Qe(a,e),u=new Gs(Zh(l),c,n);return lf(t,a,u)}else return[]}function hI(t,e,n,s){const r=of(t,s);if(r){const o=af(r),a=o.path,l=o.queryId,c=Qe(a,e),u=de.fromObject(n),h=new fo(Zh(l),c,u);return lf(t,a,h)}else return[]}function wd(t,e,n,s=!1){const r=e._path;let o=null,a=!1;t.syncPointTree_.foreachOnPath(r,(d,v)=>{const m=Qe(d,r);o=o||is(v,m),a=a||fs(v)});let l=t.syncPointTree_.get(r);l?(a=a||fs(l),o=o||is(l,ee())):(l=new Iv,t.syncPointTree_=t.syncPointTree_.set(r,l));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((v,m)=>{const x=is(m,ee());x&&(o=o.updateImmediateChild(v,x))}));const u=Av(l,e);if(!u&&!e._queryParams.loadsAllData()){const d=ic(e);A(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const v=gI();t.queryToTagMap.set(d,v),t.tagToQueryMap.set(v,d)}const h=sc(t.pendingWriteTree_,r);let f=rI(l,e,n,h,o,c);if(!u&&!a&&!s){const d=Rv(l,e);f=f.concat(xI(t,e,d))}return f}function rf(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(a,l)=>{const c=Qe(a,e),u=is(l,c);if(u)return u});return Nv(r,e,o,n,!0)}function fI(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const f=Qe(u,n);s=s||is(h,f)});let r=t.syncPointTree_.get(n);r?s=s||is(r,ee()):(r=new Iv,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=s!=null,a=o?new hs(s,!0,!1):null,l=sc(t.pendingWriteTree_,e._path),c=Tv(r,e,l,o?a.getNode():V.EMPTY_NODE,o);return JE(c)}function Do(t,e){return Ov(e,t.syncPointTree_,null,sc(t.pendingWriteTree_,ee()))}function Ov(t,e,n,s){if(Q(t.path))return Mv(t,e,n,s);{const r=e.get(ee());n==null&&r!=null&&(n=is(r,ee()));let o=[];const a=K(t.path),l=t.operationForChild(a),c=e.children.get(a);if(c&&l){const u=n?n.getImmediateChild(a):null,h=jv(s,a);o=o.concat(Ov(l,c,u,h))}return r&&(o=o.concat(sf(r,t,s,n))),o}}function Mv(t,e,n,s){const r=e.get(ee());n==null&&r!=null&&(n=is(r,ee()));let o=[];return e.children.inorderTraversal((a,l)=>{const c=n?n.getImmediateChild(a):null,u=jv(s,a),h=t.operationForChild(a);h&&(o=o.concat(Mv(h,l,c,u)))}),r&&(o=o.concat(sf(r,t,s,n))),o}function Fv(t,e){const n=e.query,s=mo(t,n);return{hashFn:()=>(YE(e)||V.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?dI(t,n._path,s):uI(t,n._path);{const o=hC(r,n);return Cl(t,n,null,o)}}}}function mo(t,e){const n=ic(e);return t.queryToTagMap.get(n)}function ic(t){return t._path.toString()+"$"+t._queryIdentifier}function of(t,e){return t.tagToQueryMap.get(e)}function af(t){const e=t.indexOf("$");return A(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ie(t.substr(0,e))}}function lf(t,e,n){const s=t.syncPointTree_.get(e);A(s,"Missing sync point for query tag that we're tracking");const r=sc(t.pendingWriteTree_,e);return sf(s,n,r,null)}function mI(t){return t.fold((e,n,s)=>{if(n&&fs(n))return[rc(n)];{let r=[];return n&&(r=Pv(n)),ut(s,(o,a)=>{r=r.concat(a)}),r}})}function Di(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(aI())(t._repo,t._path):t}function pI(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=ic(s),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function gI(){return lI++}function xI(t,e,n){const s=e._path,r=mo(t,e),o=Fv(t,n),a=t.listenProvider_.startListening(Di(e),r,o.hashFn,o.onComplete),l=t.syncPointTree_.subtree(s);if(r)A(!fs(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,f)=>{if(!Q(u)&&h&&fs(h))return[rc(h).query];{let d=[];return h&&(d=d.concat(Pv(h).map(v=>v.query))),ut(f,(v,m)=>{d=d.concat(m)}),d}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Di(h),mo(t,h))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new cf(n)}node(){return this.node_}}class uf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ee(this.path_,e);return new uf(this.syncTree_,n)}node(){return rf(this.syncTree_,this.path_)}}const yI=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Qp=function(t,e,n){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return vI(t[".sv"],e,n);if(typeof t[".sv"]=="object")return wI(t[".sv"],e);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},vI=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:A(!1,"Unexpected server value: "+t)}},wI=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&A(!1,"Unexpected increment value: "+s);const r=e.node();if(A(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const a=r.getValue();return typeof a!="number"?s:a+s},_I=function(t,e,n,s){return df(e,new uf(n,t),s)},Uv=function(t,e,n){return df(t,new cf(e),n)};function df(t,e,n){const s=t.getPriority().val(),r=Qp(s,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const a=t,l=Qp(a.getValue(),e,n);return l!==a.getValue()||r!==a.getPriority().val()?new Pe(l,Le(r)):t}else{const a=t;return o=a,r!==a.getPriority().val()&&(o=o.updatePriority(new Pe(r))),a.forEachChild(xe,(l,c)=>{const u=df(c,e.getImmediateChild(l),n);u!==c&&(o=o.updateImmediateChild(l,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function ff(t,e){let n=e instanceof ie?e:new ie(e),s=t,r=K(n);for(;r!==null;){const o=Ar(s.node.children,r)||{children:{},childCount:0};s=new hf(r,s,o),n=le(n),r=K(n)}return s}function Yr(t){return t.node.value}function $v(t,e){t.node.value=e,_d(t)}function zv(t){return t.node.childCount>0}function bI(t){return Yr(t)===void 0&&!zv(t)}function oc(t,e){ut(t.node.children,(n,s)=>{e(new hf(n,t,s))})}function Bv(t,e,n,s){n&&!s&&e(t),oc(t,r=>{Bv(r,e,!0,s)}),n&&s&&e(t)}function NI(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Oo(t){return new ie(t.parent===null?t.name:Oo(t.parent)+"/"+t.name)}function _d(t){t.parent!==null&&jI(t.parent,t.name,t)}function jI(t,e,n){const s=bI(n),r=sn(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,_d(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,_d(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=/[\[\].#$\/\u0000-\u001F\u007F]/,kI=/[\[\].#$\u0000-\u001F\u007F]/,tu=10*1024*1024,Wv=function(t){return typeof t=="string"&&t.length!==0&&!SI.test(t)},Hv=function(t){return typeof t=="string"&&t.length!==0&&!kI.test(t)},CI=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Hv(t)},Yp=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!zh(t)||t&&typeof t=="object"&&sn(t,".sv")},Mo=function(t,e,n,s){s&&e===void 0||mf(Ch(t,"value"),e,n)},mf=function(t,e,n){const s=n instanceof ie?new VC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ns(s));if(typeof e=="function")throw new Error(t+"contains a function "+Ns(s)+" with contents = "+e.toString());if(zh(e))throw new Error(t+"contains "+e.toString()+" "+Ns(s));if(typeof e=="string"&&e.length>tu/3&&Jl(e)>tu)throw new Error(t+"contains a string greater than "+tu+" utf8 bytes "+Ns(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(ut(e,(a,l)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!Wv(a)))throw new Error(t+" contains an invalid key ("+a+") "+Ns(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);GC(s,a),mf(t,l,s),qC(s)}),r&&o)throw new Error(t+' contains ".value" child '+Ns(s)+" in addition to actual children.")}},pf=function(t,e,n,s){if(!Hv(n))throw new Error(Ch(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},EI=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pf(t,e,n)},gf=function(t,e){if(K(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},II=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!CI(n))throw new Error(Ch(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xf(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],o=r.getPath();n!==null&&!Gh(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function Vv(t,e,n){xf(t,n),Gv(t,s=>Gh(s,e))}function tn(t,e,n){xf(t,n),Gv(t,s=>Mt(s,e)||Mt(e,s))}function Gv(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const o=r.path;e(o)?(PI(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function PI(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Pi&&Ve("event: "+n.toString()),Qr(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="repo_interrupt",AI=25;class LI{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vl(),this.transactionQueueTree_=new hf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DI(t,e,n){if(t.stats_=Hh(t.repoInfo_),t.forceRestClient_||gC())t.server_=new yl(t.repoInfo_,(s,r,o,a)=>{Jp(t,s,r,o,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Xp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ce(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new xn(t.repoInfo_,e,(s,r,o,a)=>{Jp(t,s,r,o,a)},s=>{Xp(t,s)},s=>{OI(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=_C(t.repoInfo_,()=>new wE(t.stats_,t.server_)),t.infoData_=new pE,t.infoSyncTree_=new Kp({startListening:(s,r,o,a)=>{let l=[];const c=t.infoData_.getNode(s._path);return c.isEmpty()||(l=Lo(t.infoSyncTree_,s._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),vf(t,"connected",!1),t.serverSyncTree_=new Kp({startListening:(s,r,o,a)=>(t.server_.listen(s,o,r,(l,c)=>{const u=a(l,c);tn(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function qv(t){const n=t.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yf(t){return yI({timestamp:qv(t)})}function Jp(t,e,n,s,r){t.dataUpdateCount++;const o=new ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(s){const c=ol(n,u=>Le(u));a=hI(t.serverSyncTree_,o,c,r)}else{const c=Le(n);a=Dv(t.serverSyncTree_,o,c,r)}else if(s){const c=ol(n,u=>Le(u));a=cI(t.serverSyncTree_,o,c)}else{const c=Le(n);a=Lo(t.serverSyncTree_,o,c)}let l=o;a.length>0&&(l=lc(t,o)),tn(t.eventQueue_,l,a)}function Xp(t,e){vf(t,"connected",e),e===!1&&UI(t)}function OI(t,e){ut(e,(n,s)=>{vf(t,n,s)})}function vf(t,e,n){const s=new ie("/.info/"+e),r=Le(n);t.infoData_.updateSnapshot(s,r);const o=Lo(t.infoSyncTree_,s,r);tn(t.eventQueue_,s,o)}function Kv(t){return t.nextWriteId_++}function MI(t,e,n){const s=fI(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const o=Le(r).withIndex(e._queryParams.getIndex());wd(t.serverSyncTree_,e,n,!0);let a;if(e._queryParams.loadsAllData())a=Lo(t.serverSyncTree_,e._path,o);else{const l=mo(t.serverSyncTree_,e);a=Dv(t.serverSyncTree_,e._path,o,l)}return tn(t.eventQueue_,e._path,a),Cl(t.serverSyncTree_,e,n,null,!0),o},r=>(ac(t,"get for query "+Ce(e)+" failed: "+r),Promise.reject(new Error(r))))}function FI(t,e,n,s,r){ac(t,"set",{path:e.toString(),value:n,priority:s});const o=yf(t),a=Le(n,s),l=rf(t.serverSyncTree_,e),c=Uv(a,l,o),u=Kv(t),h=Lv(t.serverSyncTree_,e,c,u,!0);xf(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(d,v)=>{const m=d==="ok";m||lt("set at "+e+" failed: "+d);const x=Rs(t.serverSyncTree_,u,!m);tn(t.eventQueue_,e,x),BI(t,r,d,v)});const f=ew(t,e);lc(t,f),tn(t.eventQueue_,f,[])}function UI(t){ac(t,"onDisconnectEvents");const e=yf(t),n=vl();pd(t.onDisconnect_,ee(),(r,o)=>{const a=_I(r,o,t.serverSyncTree_,e);yv(n,r,a)});let s=[];pd(n,ee(),(r,o)=>{s=s.concat(Lo(t.serverSyncTree_,r,o));const a=ew(t,r);lc(t,a)}),t.onDisconnect_=vl(),tn(t.eventQueue_,ee(),s)}function $I(t,e,n){let s;K(e._path)===".info"?s=wd(t.infoSyncTree_,e,n):s=wd(t.serverSyncTree_,e,n),Vv(t.eventQueue_,e._path,s)}function Qv(t,e,n){let s;K(e._path)===".info"?s=Cl(t.infoSyncTree_,e,n):s=Cl(t.serverSyncTree_,e,n),Vv(t.eventQueue_,e._path,s)}function zI(t){t.persistentConnection_&&t.persistentConnection_.interrupt(RI)}function ac(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ve(n,...e)}function BI(t,e,n,s){e&&Qr(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;s&&(o+=": "+s);const a=new Error(o);a.code=r,e(a)}})}function Yv(t,e,n){return rf(t.serverSyncTree_,e,n)||V.EMPTY_NODE}function wf(t,e=t.transactionQueueTree_){if(e||cc(t,e),Yr(e)){const n=Xv(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&WI(t,Oo(e),n)}else zv(e)&&oc(e,n=>{wf(t,n)})}function WI(t,e,n){const s=n.map(u=>u.currentWriteId),r=Yv(t,e,s);let o=r;const a=r.hash();for(let u=0;u<n.length;u++){const h=n[u];A(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=Qe(e,h.path);o=o.updateChild(f,h.currentOutputSnapshotRaw)}const l=o.val(!0),c=e;t.server_.put(c.toString(),l,u=>{ac(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const f=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Rs(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&f.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();cc(t,ff(t.transactionQueueTree_,e)),wf(t,t.transactionQueueTree_),tn(t.eventQueue_,e,h);for(let d=0;d<f.length;d++)Qr(f[d])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{lt("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}lc(t,e)}},a)}function lc(t,e){const n=Jv(t,e),s=Oo(n),r=Xv(t,n);return HI(t,r,s),s}function HI(t,e,n){if(e.length===0)return;const s=[];let r=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Qe(n,c.path);let h=!1,f;if(A(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,f=c.abortReason,r=r.concat(Rs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=AI)h=!0,f="maxretry",r=r.concat(Rs(t.serverSyncTree_,c.currentWriteId,!0));else{const d=Yv(t,c.path,a);c.currentInputSnapshot=d;const v=e[l].update(d.val());if(v!==void 0){mf("transaction failed: Data returned ",v,c.path);let m=Le(v);typeof v=="object"&&v!=null&&sn(v,".priority")||(m=m.updatePriority(d.getPriority()));const C=c.currentWriteId,y=yf(t),g=Uv(m,d,y);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=g,c.currentWriteId=Kv(t),a.splice(a.indexOf(C),1),r=r.concat(Lv(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),r=r.concat(Rs(t.serverSyncTree_,C,!0))}else h=!0,f="nodata",r=r.concat(Rs(t.serverSyncTree_,c.currentWriteId,!0))}tn(t.eventQueue_,n,r),r=[],h&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(f==="nodata"?s.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):s.push(()=>e[l].onComplete(new Error(f),!1,null))))}cc(t,t.transactionQueueTree_);for(let l=0;l<s.length;l++)Qr(s[l]);wf(t,t.transactionQueueTree_)}function Jv(t,e){let n,s=t.transactionQueueTree_;for(n=K(e);n!==null&&Yr(s)===void 0;)s=ff(s,n),e=le(e),n=K(e);return s}function Xv(t,e){const n=[];return Zv(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Zv(t,e,n){const s=Yr(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);oc(e,r=>{Zv(t,r,n)})}function cc(t,e){const n=Yr(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,$v(e,n.length>0?n:void 0)}oc(e,s=>{cc(t,s)})}function ew(t,e){const n=Oo(Jv(t,e)),s=ff(t.transactionQueueTree_,e);return NI(s,r=>{nu(t,r)}),nu(t,s),Bv(s,r=>{nu(t,r)}),n}function nu(t,e){const n=Yr(e);if(n){const s=[];let r=[],o=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(A(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(A(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(Rs(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&s.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?$v(e,void 0):n.length=o+1,tn(t.eventQueue_,Oo(e),r);for(let a=0;a<s.length;a++)Qr(s[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function GI(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):lt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Zp=function(t,e){const n=qI(t),s=n.namespace;n.domain==="firebase.com"&&Cn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Cn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||aC();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new X0(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new ie(n.pathString)}},qI=function(t){let e="",n="",s="",r="",o="",a=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(r=VI(t.substring(h,f)));const d=GI(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(a=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const m=e.indexOf(".");s=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=s}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:s,secure:a,scheme:l,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KI=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let r;const o=new Array(8);for(r=7;r>=0;r--)o[r]=eg.charAt(n%64),n=Math.floor(n/64);A(n===0,"Cannot push at time == 0");let a=o.join("");if(s){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)a+=eg.charAt(e[r]);return A(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ce(this.snapshot.exportVal())}}class YI{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Q(this._path)?null:av(this._path)}get ref(){return new Ln(this._repo,this._path)}get _queryIdentifier(){const e=Mp(this._queryParams),n=Bh(e);return n==="{}"?"default":n}get _queryObject(){return Mp(this._queryParams)}isEqual(e){if(e=ze(e),!(e instanceof Jr))return!1;const n=this._repo===e._repo,s=Gh(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+HC(this._path)}}function JI(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function _f(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ds){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Vs)throw new Error(s);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==us)throw new Error(s);if(typeof n!="string")throw new Error(r)}}else if(t.getIndex()===xe){if(e!=null&&!Yp(e)||n!=null&&!Yp(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(A(t.getIndex()instanceof Qh||t.getIndex()===gv,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nw(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ln extends Jr{constructor(e,n){super(e,n,new Jh,!1)}get parent(){const e=cv(this._path);return e===null?null:new Ln(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class po{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ie(e),s=go(this.ref,e);return new po(this._node.getChild(n),s,xe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new po(r,go(this.ref,s),xe)))}hasChild(e){const n=new ie(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function D(t,e){return t=ze(t),t._checkNotDeleted("ref"),e!==void 0?go(t._root,e):t._root}function go(t,e){return t=ze(t),K(t._path)===null?EI("child","path",e):pf("child","path",e),new Ln(t._repo,Ee(t._path,e))}function ct(t,e){t=ze(t),gf("push",t._path),Mo("push",e,t._path,!0);const n=qv(t._repo),s=KI(n),r=go(t,s),o=go(t,s);let a;return e!=null?a=fe(o,e).then(()=>o):a=Promise.resolve(o),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function yn(t){return gf("remove",t._path),fe(t,null)}function fe(t,e){t=ze(t),gf("set",t._path),Mo("set",e,t._path,!1);const n=new Yl;return FI(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function bf(t){t=ze(t);const e=new tw(()=>{}),n=new uc(e);return MI(t._repo,t,n).then(s=>new po(s,new Ln(t._repo,t._path),t._queryParams.getIndex()))}class uc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new QI("value",this,new po(e.snapshotNode,new Ln(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new YI(this,e,n):null}matches(e){return e instanceof uc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function XI(t,e,n,s,r){const o=new tw(n,void 0),a=new uc(o);return $I(t._repo,t,a),()=>Qv(t._repo,t,a)}function Z(t,e,n,s){return XI(t,"value",e)}function la(t,e,n){Qv(t._repo,t,null)}class dc{}class ZI extends dc{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Mo("endAt",this._value,e._path,!0);const n=fE(e._queryParams,this._value,this._key);if(nw(n),_f(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jr(e._repo,e._path,n,e._orderByCalled)}}class eT extends dc{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Mo("startAt",this._value,e._path,!0);const n=hE(e._queryParams,this._value,this._key);if(nw(n),_f(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Jr(e._repo,e._path,n,e._orderByCalled)}}class tT extends dc{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){JI(e,"orderByChild");const n=new ie(this._path);if(Q(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new Qh(n),r=mE(e._queryParams,s);return _f(r),new Jr(e._repo,e._path,r,!0)}}function nT(t){return pf("orderByChild","path",t),new tT(t)}class sT extends dc{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Mo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZI(this._value,this._key)._apply(new eT(this._value,this._key)._apply(e))}}function rT(t,e){return new sT(t,e)}function iT(t,...e){let n=ze(t);for(const s of e)n=s._apply(n);return n}tI(Ln);oI(Ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="FIREBASE_DATABASE_EMULATOR_HOST",bd={};let aT=!1;function lT(t,e,n,s){const r=e.lastIndexOf(":"),o=e.substring(0,r),a=Hr(o);t.repoInfo_=new X0(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function cT(t,e,n,s,r){let o=s||t.options.databaseURL;o===void 0&&(t.options.projectId||Cn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ve("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=Zp(o,r),l=a.repoInfo,c;typeof process<"u"&&vp&&(c=vp[oT]),c?(o=`http://${c}?ns=${l.namespace}`,a=Zp(o,r),l=a.repoInfo):a.repoInfo.secure;const u=new yC(t.name,t.options,e);II("Invalid Firebase Database URL",a),Q(a.path)||Cn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=dT(l,t,u,new xC(t,n));return new hT(h,t)}function uT(t,e){const n=bd[e];(!n||n[t.key]!==t)&&Cn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),zI(t),delete n[t.key]}function dT(t,e,n,s){let r=bd[e.name];r||(r={},bd[e.name]=r);let o=r[t.toURLString()];return o&&Cn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new LI(t,aT,n,s),r[t.toURLString()]=o,o}class hT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ln(this._repo,ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Cn("Cannot call "+e+" on a deleted database.")}}function sw(t=e0(),e){const n=Th(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=dj("database");s&&fT(n,...s)}return n}function fT(t,e,n,s={}){t=ze(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&zs(s,o.repoInfo_.emulatorOptions))return;Cn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Cn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Pa(Pa.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:hj(s.mockUserToken,t.app.options.projectId);a=new Pa(l)}Hr(e)&&(Gy(e),qy("Database",!0)),lT(o,r,s,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){tC(Gr),Lr(new Bs("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return cT(s,r,o,n)},"PUBLIC").setMultipleInstances(!0)),ss(wp,_p,t),ss(wp,_p,"esm2020")}xn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};xn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};mT();var pT="firebase",gT="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(pT,gT,"app");const xT={apiKey:"AIzaSyCKi2Irrp1sRKuHFOZDZv27BHsM3Gc3SmE",authDomain:"decor-drapes-instyle.firebaseapp.com",databaseURL:"https://decor-drapes-instyle-default-rtdb.firebaseio.com",projectId:"decor-drapes-instyle",storageBucket:"decor-drapes-instyle.firebasestorage.app",messagingSenderId:"936396093551",appId:"1:936396093551:web:e72e2c2a0aee81fd9e759a"},rw=Zy(xT),ca=M0(rw),O=sw(rw),tg={cloudName:"ds6um53cx",uploadPreset:"images"},El=async t=>{const e=new FormData;e.append("file",t),e.append("upload_preset",tg.uploadPreset);try{return(await(await fetch(`https://api.cloudinary.com/v1_1/${tg.cloudName}/image/upload`,{method:"POST",body:e})).json()).secure_url}catch(n){throw console.error("Error uploading to Cloudinary:",n),n}},iw=w.createContext(void 0),dt=()=>{const t=w.useContext(iw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},yT=({children:t})=>{const[e,n]=w.useState(null),[s,r]=w.useState(!0),o=async(h,f)=>{try{await S0(ca,h,f),L.success("Logged in successfully!")}catch(d){throw L.error(d.message),d}},a=async(h,f,d="customer")=>{try{const v=await Uk(ca,h,f),m={uid:v.user.uid,email:v.user.email,role:d,createdAt:new Date().toISOString()};await fe(D(O,`users/${v.user.uid}`),m),L.success("Account created successfully!")}catch(v){throw L.error(v.message),v}},l=async()=>{try{await Wk(ca),L.success("Logged out successfully!")}catch(h){throw L.error(h.message),h}},c=async(h,f,d)=>{if(!e)throw new Error("No user logged in");try{let v=e.profileImage;f&&(v=await El(f));const m={...e,displayName:h,profileImage:v||"",...d},x=D(O,`users/${e.uid}`);await fe(x,m),n(m),L.success("Profile updated successfully!")}catch(v){throw L.error("Failed to update profile"),v}};w.useEffect(()=>Bk(ca,async f=>{if(f)try{const d=D(O,`users/${f.uid}`),v=await bf(d);if(v.exists())n(v.val());else{const m={uid:f.uid,email:f.email,role:"customer",createdAt:new Date().toISOString()};await fe(d,m),n(m)}}catch(d){console.error("Error fetching user data:",d),n(null)}else n(null);r(!1)}),[]);const u={currentUser:e,loading:s,login:o,signup:a,logout:l,updateProfile:c};return i.jsx(iw.Provider,{value:u,children:t})},ow=w.createContext(void 0),hc=()=>{const t=w.useContext(ow);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},vT=({children:t})=>{const[e,n]=w.useState([]),{currentUser:s}=dt();w.useEffect(()=>{if(!s){n([]);return}const f=D(O,`carts/${s.uid}`),d=Z(f,async v=>{if(v.exists()){const m=v.val(),x=[];for(const C in m){const y=m[C],g=D(O,`products/${y.productId}`),_=await bf(g);_.exists()&&x.push({id:C,...y,product:_.val()})}n(x)}else n([])});return()=>d()},[s]);const r=async(f,d=1)=>{if(!s){L.error("Please login to add items to cart");return}try{const v=D(O,`carts/${s.uid}`),m=e.find(x=>x.productId===f.id);if(m)await a(m.id,m.quantity+d);else{const x=ct(v);await fe(x,{productId:f.id,quantity:d,userId:s.uid,addedAt:new Date().toISOString()})}L.success("Added to cart!")}catch(v){L.error("Failed to add to cart"),console.error("Error adding to cart:",v)}},o=async f=>{if(s)try{const d=D(O,`carts/${s.uid}/${f}`);await yn(d),L.success("Removed from cart")}catch(d){L.error("Failed to remove from cart"),console.error("Error removing from cart:",d)}},a=async(f,d)=>{if(s)try{const v=D(O,`carts/${s.uid}/${f}`);d<=0?await yn(v):await fe(v,{...e.find(m=>m.id===f),quantity:d})}catch(v){L.error("Failed to update quantity"),console.error("Error updating quantity:",v)}},h={cartItems:e,addToCart:r,removeFromCart:o,updateQuantity:a,clearCart:async()=>{if(s)try{const f=D(O,`carts/${s.uid}`);await yn(f),L.success("Cart cleared")}catch(f){L.error("Failed to clear cart"),console.error("Error clearing cart:",f)}},getTotalPrice:()=>e.reduce((f,d)=>f+d.product.price*d.quantity,0),getItemCount:()=>e.reduce((f,d)=>f+d.quantity,0)};return i.jsx(ow.Provider,{value:h,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(t,e)=>{const n=w.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:c,...u},h)=>w.createElement("svg",{ref:h,...wT,width:r,height:r,stroke:s,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${_T(t)}`,l].join(" "),...u},[...e.map(([f,d])=>w.createElement(f,d)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=$("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=$("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=$("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=$("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=$("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=$("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=$("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=$("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=$("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=$("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=$("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=$("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=$("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=$("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=$("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=$("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=$("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=$("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=$("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=$("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=$("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=$("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=$("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=$("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=$("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=$("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=$("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=$("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=$("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=$("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=$("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zT=()=>{const[t,e]=w.useState(!1),[n,s]=w.useState(!1),[r,o]=w.useState([]),{currentUser:a,loading:l,logout:c}=dt(),{getItemCount:u}=hc(),h=ql(),f=w.useRef(null),d=w.useRef(null);w.useEffect(()=>{const _=D(O,"siteSettings"),b=Z(_,N=>{if(N.exists()){const j=N.val();o(Object.keys(j).map(k=>({id:k,...j[k]})))}});return()=>b()},[]),w.useEffect(()=>{function _(b){f.current&&d.current&&!f.current.contains(b.target)&&!d.current.contains(b.target)&&s(!1)}return n&&document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[n]);const m=(_=>{var b;return((b=r.find(N=>N.key===_))==null?void 0:b.value)||""})("store_name")||"Decor Drapes",x=m.charAt(0).toUpperCase(),C=async()=>{await c(),h("/"),s(!1)},y=[{to:"/",label:"Home"},{to:"/catalogue",label:"Catalogue"},{to:"/about",label:"About"},{to:"/contact",label:"Contact"}],g=y;return i.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-14 md:hidden",children:[i.jsxs("button",{onClick:()=>e(_=>!_),"aria-label":"Toggle menu",className:"flex flex-col justify-center space-y-1.5 px-2",children:[i.jsx("span",{className:`block h-0.5 w-6 bg-gray-700 transition-transform origin-left ${t?"rotate-45 translate-y-1.5":""}`}),i.jsx("span",{className:`block h-0.5 w-6 bg-gray-700 transition-transform origin-left ${t?"-rotate-45 -translate-y-1.5":""}`})]}),i.jsx(ae,{to:"/",className:"flex items-center justify-center flex-1",children:i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:!l&&i.jsx("span",{className:"text-white font-bold text-lg",children:x})})}),i.jsx("div",{children:!l&&a?i.jsx("button",{ref:f,onClick:()=>s(_=>!_),className:"focus:outline-none","aria-label":"User menu",children:a.profileImage?i.jsx("img",{src:a.profileImage,alt:"Profile",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200"}):i.jsx(Jt,{className:"w-8 h-8 text-gray-600 bg-gray-200 rounded-full p-1"})}):i.jsx(ae,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded-md text-sm font-semibold transition-transform transform hover:scale-105",children:"Login"})})]}),i.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-300 z-50
            ${t?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex justify-between items-center px-4 h-14 border-b border-gray-200",children:[i.jsx("div",{className:"text-lg font-bold",children:m}),i.jsx("button",{onClick:()=>e(!1),"aria-label":"Close menu",className:"p-2",children:i.jsx(as,{className:"w-6 h-6 text-gray-700"})})]}),i.jsx("nav",{className:"mt-4 flex flex-col space-y-2 px-4",children:g.map(_=>i.jsx(ae,{to:_.to,className:"text-gray-700 hover:text-blue-600 text-lg font-medium",onClick:()=>e(!1),children:_.label},_.to))})]}),i.jsxs("div",{className:"hidden md:flex justify-between items-center h-16",children:[i.jsxs(ae,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:!l&&i.jsx("span",{className:"text-white font-bold text-lg",children:x})}),i.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[m," "]})]}),i.jsx("div",{className:"hidden md:flex items-center space-x-8",children:y.map(_=>i.jsx(ae,{to:_.to,className:"text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:_.label},_.to))}),i.jsxs("div",{className:"flex items-center space-x-4",children:[!l&&a&&i.jsxs(ae,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-blue-600 transition-colors",children:[i.jsx(kf,{className:"w-6 h-6"}),u()>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u()})]}),a?i.jsxs("div",{className:"relative",children:[i.jsxs("button",{ref:f,onClick:()=>s(_=>!_),className:"flex items-center space-x-2 p-2 text-gray-700 hover:text-blue-600 transition-colors","aria-label":"User menu toggle",children:[a.profileImage?i.jsx("img",{src:a.profileImage,alt:"Profile",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200"}):i.jsx(Jt,{className:"w-8 h-8 text-gray-600 bg-gray-200 rounded-full p-1"}),i.jsxs("div",{className:"hidden md:block text-left",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.displayName||a.email.split("@")[0]}),i.jsx("div",{className:"text-xs text-gray-500 capitalize",children:a.role})]})]}),n&&i.jsxs("div",{ref:d,className:"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50",children:[i.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[a.profileImage?i.jsx("img",{src:a.profileImage,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-gray-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:a.displayName||"User"}),i.jsx("div",{className:"text-sm text-gray-500 truncate",children:a.email})]})]})}),i.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:i.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("span",{className:"capitalize",children:a.role})}),i.jsx("div",{className:"flex items-center",children:i.jsxs("span",{children:["Joined ",new Date(a.createdAt).toLocaleDateString()]})})]})}),i.jsxs(ae,{to:"/profile",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>s(!1),children:[i.jsx(Jt,{className:"w-4 h-4 mr-2"})," My Profile"]}),(a.role==="admin"||a.role==="employee")&&i.jsxs(ae,{to:"/admin",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>s(!1),children:[i.jsx(Sf,{className:"w-4 h-4 mr-2"}),a.role==="admin"?"Admin Panel":"Dashboard"]}),i.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:i.jsxs("button",{onClick:C,className:"flex items-center w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[i.jsx(DT,{className:"w-4 h-4 mr-2"})," Logout"]})})]})]}):i.jsx(ae,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Login"})]})]})]})})},BT=()=>{const[t,e]=w.useState([]),n=new Date().getFullYear();w.useEffect(()=>{const r=D(O,"siteSettings"),o=Z(r,a=>{if(a.exists()){const l=a.val(),c=Object.keys(l).map(u=>({id:u,...l[u]}));e(c)}});return()=>o()},[]);const s=r=>{const o=t.find(a=>a.key===r);return(o==null?void 0:o.value)||""};return i.jsxs("footer",{className:"bg-gray-900 text-white",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xl",children:(s("store_name")||"Shop").charAt(0)})}),i.jsx("span",{className:"text-2xl font-bold",children:s("store_name")||"Shop"})]}),i.jsx("p",{className:"text-gray-400 leading-relaxed",children:s("store_tagline")||"Your trusted business partner providing premium products and exceptional service. We deliver quality solutions that drive your success forward."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("a",{href:s("facebook_url")||"#",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors",children:i.jsx(CT,{className:"w-5 h-5"})}),i.jsx("a",{href:s("twitter_url")||"#",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors",children:i.jsx(FT,{className:"w-5 h-5"})}),i.jsx("a",{href:s("instagram_url")||"#",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors",children:i.jsx(PT,{className:"w-5 h-5"})}),i.jsx("a",{href:s("linkedin_url")||"#",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors",children:i.jsx(AT,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsxs(ae,{to:"/",className:"text-gray-400 hover:text-white transition-colors flex items-center group",children:[i.jsx(js,{className:"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition-opacity"}),"Home"]})}),i.jsx("li",{children:i.jsxs(ae,{to:"/catalogue",className:"text-gray-400 hover:text-white transition-colors flex items-center group",children:[i.jsx(js,{className:"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition-opacity"}),"Catalogue"]})}),i.jsx("li",{children:i.jsxs(ae,{to:"/about",className:"text-gray-400 hover:text-white transition-colors flex items-center group",children:[i.jsx(js,{className:"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition-opacity"}),"About Us"]})}),i.jsx("li",{children:i.jsxs(ae,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors flex items-center group",children:[i.jsx(js,{className:"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition-opacity"}),"Contact"]})}),i.jsx("li",{children:i.jsxs(ae,{to:"/estimate",className:"text-gray-400 hover:text-white transition-colors flex items-center group",children:[i.jsx(js,{className:"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition-opacity"}),"Get Estimate"]})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Our Services"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{className:"text-gray-400 flex items-center",children:[i.jsx(mc,{className:"w-4 h-4 mr-3 text-blue-400"}),"Product Sales"]}),i.jsxs("li",{className:"text-gray-400 flex items-center",children:[i.jsx(yt,{className:"w-4 h-4 mr-3 text-green-400"}),"Consultation"]}),i.jsxs("li",{className:"text-gray-400 flex items-center",children:[i.jsx(Fo,{className:"w-4 h-4 mr-3 text-purple-400"}),"Quality Assurance"]}),i.jsxs("li",{className:"text-gray-400 flex items-center",children:[i.jsx(Il,{className:"w-4 h-4 mr-3 text-orange-400"}),"24/7 Support"]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-semibold mb-3 text-gray-300",children:"Legal"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(ae,{to:"/privacy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Privacy Policy"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Terms of Service"})})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Get in Touch"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(jf,{className:"w-5 h-5 text-blue-400 mt-1 flex-shrink-0"}),i.jsx("div",{className:"text-gray-400",children:(s("store_address")||`123 Business Street
City, State 12345
United States`).split(`
`).map((r,o)=>i.jsx("p",{children:r},o))})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ks,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),i.jsxs("div",{className:"text-gray-400",children:[i.jsx("p",{children:s("primary_phone")||"+1 (555) 123-4567"}),i.jsx("p",{children:s("secondary_phone")||"+1 (555) 987-6543"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(xo,{className:"w-5 h-5 text-purple-400 flex-shrink-0"}),i.jsxs("div",{className:"text-gray-400",children:[i.jsx("p",{children:s("primary_email")||"contact@shop.com"}),i.jsx("p",{children:s("support_email")||"support@shop.com"})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-semibold mb-3 text-gray-300",children:"Business Hours"}),i.jsx("div",{className:"text-gray-400 text-sm space-y-1",children:(s("store_hours")||`Mon-Fri: 9AM-6PM
Sat: 10AM-4PM
Sun: Closed`).split(`
`).map((r,o)=>i.jsx("div",{children:r},o))})]})]})]})}),i.jsx("div",{className:"border-t border-gray-800",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[i.jsxs("div",{className:"mb-4 md:mb-0",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Stay Updated"}),i.jsx("p",{className:"text-gray-400",children:"Subscribe to our newsletter for the latest updates and offers."})]}),i.jsxs("div",{className:"w-full md:w-auto flex flex-col sm:flex-row gap-2 sm:gap-0 sm:flex-nowrap",children:[i.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full sm:w-64 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg sm:rounded-l-lg sm:rounded-r-none focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-gray-400"}),i.jsx("button",{className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg sm:rounded-r-lg sm:rounded-l-none font-medium transition-colors",children:"Subscribe"})]})]})})}),i.jsxs("div",{className:"border-t border-gray-800",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[i.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",n," ",s("store_name")||"Shop",". All rights reserved."]}),i.jsxs("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Sitemap"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Accessibility"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookies"})]})]})}),i.jsx("div",{className:"bg-gray-900 text-center py-3",children:i.jsxs("p",{className:"text-gray-500 text-xs",children:["Made with  by"," ",i.jsx("a",{href:"https://pankajshah.netlify.app/",className:"hover:text-white",children:"Pankaj"})]})})]})]})},ru=({children:t,requiredRole:e})=>{const{currentUser:n,loading:s}=dt();return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n?e&&n.role!==e&&n.role!=="admin"?e==="employee"&&(n.role==="editor"||n.role==="employee")?i.jsx(i.Fragment,{children:t}):i.jsx(Zu,{to:"/"}):i.jsx(i.Fragment,{children:t}):i.jsx(Zu,{to:"/login"})};function mw(){const[t,e]=w.useState(null);w.useEffect(()=>{const s=D(O,"siteSettings"),r=Z(s,o=>{const a=o.val()||{},l=Object.values(a).map(c=>({key:c.key,value:c.value}));e(l)});return()=>r()},[]);function n(s){if(!t)return"";const r=t.find(o=>o.key===s);return(r==null?void 0:r.value)||""}return{settings:t,get:n}}const WT=()=>{const{settings:t,get:e}=mw(),[n,s]=w.useState(!1),r=t===null,o=e("site_title")||"",a=e("site_description")||"",l=e("site_logo")||"",c=[{label:"500+ Clients",icon:yt},{label:"1k+ Projects",icon:Nf},{label:"24/7 Support",icon:RT},{label:"5 Rating",icon:os}],u=o.split(" "),h=Math.ceil(u.length/2),f=u.slice(0,h).join(" "),d=u.slice(h).join(" ");return i.jsxs("section",{className:"relative bg-white overflow-hidden",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 lg:px-8 py-20 lg:py-32 flex flex-col lg:flex-row items-center",children:[i.jsx("div",{className:"lg:w-1/2 text-center lg:text-left space-y-6",children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse w-3/4 mx-auto lg:mx-0"}),i.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-1/2 mx-auto lg:mx-0"}),i.jsxs("div",{className:"flex justify-center lg:justify-start space-x-4 mt-6",children:[i.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse w-32"}),i.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse w-32"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-gray-900 leading-tight",children:[f," ",i.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:d})]}),i.jsx("p",{className:"text-lg text-gray-600 max-w-md mx-auto lg:mx-0",children:a}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mt-6",children:[i.jsxs("a",{href:"/estimate",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition",children:["Get Free Estimate",i.jsx(js,{className:"ml-2 w-5 h-5"})]}),i.jsxs("a",{href:"/catalogue",className:"inline-flex items-center px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-100 transition",children:["Browse Catalogue",i.jsx(mc,{className:"ml-2 w-5 h-5"})]})]}),i.jsx("div",{className:"mt-10 flex flex-wrap justify-center lg:justify-start gap-6",children:c.map(({label:v,icon:m})=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(m,{className:"w-6 h-6 text-blue-500"}),i.jsx("span",{className:"text-gray-600 font-medium",children:v})]},v))})]})}),i.jsx("div",{className:"mt-12 lg:mt-0 lg:w-1/2 flex justify-center lg:justify-end",children:i.jsxs("div",{className:"relative w-full max-w-md aspect-square",children:[r||!n?i.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse rounded-xl","aria-hidden":"true"}):null,!r&&i.jsx("img",{src:encodeURI(l),alt:"Hero Illustration",onLoad:()=>s(!0),className:`absolute inset-0 w-full h-full object-cover rounded-xl shadow-lg transition-opacity duration-500
                  ${n?"opacity-100":"opacity-0"}
                `})]})})]}),i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0"})]})},HT=({isOpen:t,onClose:e})=>{const{currentUser:n}=dt(),[s,r]=w.useState(!1),[o,a]=w.useState({title:"",content:"",rating:5}),l=async c=>{if(c.preventDefault(),!n){L.error("Please login to submit a review");return}r(!0);try{const u=D(O,"testimonials");await ct(u,{userId:n.uid,userName:n.displayName||n.email.split("@")[0],userEmail:n.email,userImage:n.profileImage||"",title:o.title,content:o.content,rating:o.rating,isApproved:!1,createdAt:new Date().toISOString()}),L.success("Thank you for your review! It will be published after approval."),a({title:"",content:"",rating:5}),e()}catch(u){L.error("Failed to submit review"),console.error("Error submitting testimonial:",u)}finally{r(!1)}};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Share Your Experience"}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(as,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),i.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(c=>i.jsx("button",{type:"button",onClick:()=>a({...o,rating:c}),className:"p-1 hover:scale-110 transition-transform",children:i.jsx(os,{className:`w-6 h-6 ${c<=o.rating?"text-yellow-400 fill-current":"text-gray-300"}`})},c))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Title"}),i.jsx("input",{type:"text",required:!0,value:o.title,onChange:c=>a({...o,title:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Give your review a title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),i.jsx("textarea",{required:!0,rows:4,value:o.content,onChange:c=>a({...o,content:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about your experience..."})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center",children:s?"Submitting...":i.jsxs(i.Fragment,{children:["Submit Review",i.jsx(fc,{className:"w-4 h-4 ml-2"})]})})]})]})]})}):null},VT=()=>{const[t,e]=w.useState([]),[n,s]=w.useState(!1);dt(),w.useEffect(()=>{const o=D(O,"testimonials"),a=Z(o,l=>{if(l.exists()){const c=l.val(),u=Object.keys(c).map(h=>({id:h,...c[h]})).filter(h=>h.isApproved).sort(()=>Math.random()-.5).slice(0,3);e(u)}});return()=>a()},[]);const r=[{icon:Nf,title:"Premium Quality",description:"Carefully curated selection of high-quality products that meet the highest standards"},{icon:Il,title:"Fast Delivery",description:"Quick and reliable delivery service to get your products when you need them"},{icon:TT,title:"Expert Support",description:"Professional customer support team ready to assist you with any questions"},{icon:Fo,title:"Secure Shopping",description:"Safe and secure payment processing with full customer protection guarantee"}];return i.jsxs("div",{className:"min-h-screen",children:[i.jsx(WT,{}),i.jsx("section",{className:"py-24 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-20",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"Why Choose Us?"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"We combine expertise, quality, and dedication to deliver exceptional results for your business"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((o,a)=>i.jsxs("div",{className:"group text-center p-8 rounded-2xl bg-gray-50 hover:bg-white hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:i.jsx(o.icon,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900",children:o.title}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.description})]},a))})]})}),i.jsxs("section",{className:"py-24 bg-gradient-to-br from-gray-50 to-blue-50",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-20",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"What Our Clients Say"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Don't just take our word for it - hear from our satisfied customers"}),i.jsx("div",{className:"mt-8",children:i.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors inline-flex items-center",children:[i.jsx(os,{className:"w-5 h-5 mr-2"}),"Share Your Experience"]})})]}),t.length>0?i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map(o=>i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300",children:[i.jsx("div",{className:"flex items-center mb-4",children:[...Array(o.rating)].map((a,l)=>i.jsx(os,{className:"w-5 h-5 text-yellow-400 fill-current"},l))}),i.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:o.title}),i.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed italic",children:['"',o.content,'"']}),i.jsxs("div",{className:"flex items-center",children:[o.userImage?i.jsx("img",{src:o.userImage,alt:o.userName,className:"w-12 h-12 rounded-full object-cover mr-4"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mr-4",children:i.jsx(yt,{className:"w-6 h-6 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-gray-900",children:o.userName}),i.jsx("div",{className:"text-gray-500 text-sm",children:"Verified Customer"})]})]})]},o.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to share your experience!"}),i.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors inline-flex items-center",children:[i.jsx(os,{className:"w-5 h-5 mr-2"}),"Write a Review"]})]})]}),i.jsx(HT,{isOpen:n,onClose:()=>s(!1)})]}),i.jsx("section",{className:"py-24 bg-gradient-to-r from-blue-600 to-purple-700 text-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Need Expert Guidance?"}),i.jsx("p",{className:"text-xl mb-8 opacity-90 leading-relaxed",children:"Our professional consultants are ready to help you find the perfect solution for your business needs. Get personalized recommendations and expert advice."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsxs(ae,{to:"/contact",className:"bg-white text-blue-600 px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-100 transition-colors inline-flex items-center justify-center shadow-xl hover:shadow-2xl transform hover:-translate-y-1",children:[i.jsx(Ks,{className:"mr-2 w-5 h-5"}),"Consult a Professional"]}),i.jsxs(ae,{to:"/estimate",className:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-white/10 transition-colors inline-flex items-center justify-center",children:["Get Free Quote",i.jsx(js,{className:"ml-2 w-5 h-5"})]})]})]})})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs(ae,{to:"/estimate",className:"group bg-gradient-to-br from-blue-50 to-blue-100 p-8 rounded-2xl hover:shadow-lg transition-all duration-300 text-center transform hover:-translate-y-1",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:i.jsx(jT,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"Get Estimate"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Request a custom quote for your specific needs"})]}),i.jsxs(ae,{to:"/catalogue",className:"group bg-gradient-to-br from-green-50 to-green-100 p-8 rounded-2xl hover:shadow-lg transition-all duration-300 text-center transform hover:-translate-y-1",children:[i.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:i.jsx(mc,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"Catalogue"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Browse our complete product range"})]}),i.jsxs(ae,{to:"/about",className:"group bg-gradient-to-br from-purple-50 to-purple-100 p-8 rounded-2xl hover:shadow-lg transition-all duration-300 text-center transform hover:-translate-y-1",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:i.jsx(yt,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"About Us"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Learn more about our company and values"})]}),i.jsxs(ae,{to:"/contact",className:"group bg-gradient-to-br from-orange-50 to-orange-100 p-8 rounded-2xl hover:shadow-lg transition-all duration-300 text-center transform hover:-translate-y-1",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:i.jsx(Ks,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"Contact"}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Get in touch with our expert team"})]})]})})})]})},iu=M0(),GT=new ln,qT=()=>{const t=ql(),[e,n]=w.useState(1),[s,r]=w.useState(""),[o,a]=w.useState(""),[l,c]=w.useState(""),[u,h]=w.useState(""),[f,d]=w.useState(!1),[v,m]=w.useState(!1),[x,C]=w.useState(!1),[y,g]=w.useState(""),[_,b]=w.useState(""),[N,j]=w.useState(""),[k,T]=w.useState(!1),E=async()=>{try{await c2(iu,GT),t("/")}catch(z){console.error("Google Sign-in error:",z)}},I=async z=>{const oe=sw(),ht=D(oe,"users"),Se=iT(ht,nT("email"),rT(z.trim().toLowerCase()));return(await bf(Se)).exists()},S=async z=>{z.preventDefault(),c(""),d(!0);try{await I(s)?n(2):c("No account found with this email.")}catch{c("Could not check email. Try again.")}finally{d(!1)}},M=async z=>{z.preventDefault(),h(""),d(!0);try{await S0(iu,s,o),t("/")}catch(oe){h(oe.message||"Login failed")}finally{d(!1)}},W=async z=>{z.preventDefault(),b(""),j(""),T(!0);try{await Fk(iu,y.trim().toLowerCase()),b("Password reset email sent. Please check your inbox.")}catch(oe){j(oe.message||"Failed to send reset email.")}finally{T(!1)}};return i.jsxs("div",{className:"min-h-screen w-full bg-gray-50 flex flex-col items-center justify-center px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"https://res.cloudinary.com/ds6um53cx/image/upload/v1754572073/eold8lngapg8mqff7pti.png",alt:"Decor Drapes Instyle",className:"h-16 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Decor Drapes Instyle"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Elegant Interiors. Effortlessly."})]}),i.jsxs("div",{className:"w-full max-w-md bg-white shadow-xl rounded-2xl p-8 space-y-6",children:[i.jsxs("button",{type:"button",onClick:E,className:"w-full flex justify-center items-center gap-2 border border-gray-300 py-3 rounded-lg hover:bg-gray-50 transition",children:[i.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"h-5 w-5"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Continue with Google"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"flex-grow h-px bg-gray-200"}),i.jsx("span",{className:"text-gray-400 text-sm",children:"or"}),i.jsx("div",{className:"flex-grow h-px bg-gray-200"})]}),e===1&&!x&&i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:z=>r(z.target.value),required:!0,autoFocus:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"you@example.com"}),l&&i.jsx("p",{className:"text-red-600 text-sm mt-1",children:l})]}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50",children:f?"Checking...":"Continue"})]}),e===2&&!x&&i.jsxs("form",{onSubmit:M,className:"space-y-6",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Signed in as ",i.jsx("span",{className:"font-medium",children:s})," ",i.jsx("button",{type:"button",onClick:()=>{n(1),c(""),a(""),h("")},className:"text-blue-600 hover:underline ml-2",children:"Change"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),i.jsx("input",{type:v?"text":"password",id:"password",value:o,onChange:z=>a(z.target.value),required:!0,autoFocus:!0,className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password"}),i.jsx("button",{type:"button",onClick:()=>m(!v),className:"absolute top-10 right-4 text-gray-500",children:v?i.jsx(mr,{size:20}):i.jsx(gt,{size:20})}),u&&i.jsx("p",{className:"text-red-600 text-sm mt-1",children:u})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"button",onClick:()=>{C(!0),g(s||""),b(""),j("")},className:"text-blue-600 hover:underline text-sm",children:"Forgot password?"})}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50",children:f?"Signing in...":"Sign in"})]}),x&&i.jsxs("form",{onSubmit:W,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"resetEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter your email to reset password"}),i.jsx("input",{type:"email",id:"resetEmail",value:y,onChange:z=>g(z.target.value),required:!0,autoFocus:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"you@example.com"}),N&&i.jsx("p",{className:"text-red-600 text-sm mt-1",children:N}),_&&i.jsx("p",{className:"text-green-600 text-sm mt-1",children:_})]}),i.jsx("button",{type:"submit",disabled:k,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50",children:k?"Sending reset email...":"Send reset email"}),i.jsx("div",{className:"text-center text-sm text-gray-600",children:i.jsx("button",{type:"button",onClick:()=>{C(!1),j(""),b("")},className:"text-blue-600 hover:underline",children:"Back to login"})})]})]})]})},Ss={keyId:"rzp_test_5KAIiglEAjfDfA",keySecret:"ReTHyqWILzUD/spDCKvdHqGRW",currency:"INR",companyName:"Decor Drapes",description:"Payment for your order",image:"/logo.png",theme:{color:"#2563eb"}},nt=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),KT=async(t,e)=>{try{const n=await fetch("/api/create-razorpay-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t*100,currency:Ss.currency,receipt:e})});if(!n.ok)throw new Error("Failed to create Razorpay order");return await n.json()}catch(n){return console.error("Error creating Razorpay order:",n),{id:`order_${Date.now()}`,amount:t*100,currency:Ss.currency,receipt:e}}},QT=({product:t,onViewDetails:e})=>{const{addToCart:n}=hc(),s=r=>{r.stopPropagation(),n(t)};return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"aspect-w-1 aspect-h-1",children:i.jsx("img",{src:t.imageUrl||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg",alt:t.name,className:"w-full h-48 object-cover"})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),i.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:t.description}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("span",{className:"text-2xl font-bold text-blue-600",children:nt(t.price)}),i.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",t.stock]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(gt,{className:"w-4 h-4 mr-1"}),"Details"]}),i.jsxs("button",{onClick:s,disabled:t.stock===0,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(kf,{className:"w-4 h-4 mr-1"}),"Add to Cart"]})]})]})]})},YT=({product:t,isOpen:e,onClose:n})=>{const{addToCart:s}=hc();if(!e)return null;const r=()=>{s(t),n()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:t.name}),i.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(as,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsx("img",{src:t.imageUrl||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg",alt:t.name,className:"w-full h-64 object-cover rounded-lg"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-600",children:t.description})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-3xl font-bold text-blue-600",children:nt(t.price)}),i.jsxs("span",{className:"text-sm text-gray-500 ml-4",children:["Stock: ",t.stock]})]}),i.jsx("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:t.category})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsxs("button",{onClick:r,disabled:t.stock===0,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(kf,{className:"w-5 h-5 mr-2"}),"Add to Cart"]}),i.jsx(ae,{to:"/estimate",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium transition-colors text-center",onClick:n,children:"Get Estimate"})]})]})]})]})})},JT=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]),[r,o]=w.useState(null),[a,l]=w.useState("all"),[c,u]=w.useState(""),[h,f]=w.useState({min:0,max:1e4}),[d,v]=w.useState("newest"),[m,x]=w.useState(!1),[C,y]=w.useState(!0);w.useEffect(()=>{const j=D(O,"products"),k=D(O,"inventory"),T=Z(j,I=>{if(I.exists()){const S=I.val(),M=Object.keys(S).map(W=>({id:W,...S[W]}));e(M)}else e([])}),E=Z(k,I=>{if(I.exists()){const S=I.val(),M=Object.keys(S).map(W=>({id:W,...S[W]})).filter(W=>W.isActive&&W.currentStock>0);s(M)}else s([]);y(!1)});return()=>{T(),E()}},[]);const g=n.map(j=>({id:j.id,name:j.name,description:j.description,price:j.sellingPrice,category:j.category,imageUrl:j.imageUrl||"",stock:j.currentStock,createdAt:j.createdAt,updatedAt:j.lastUpdated})),_=[...t,...g],b=["all",...Array.from(new Set(_.map(j=>j.category)))],N=_.filter(j=>!(a!=="all"&&j.category!==a||c&&!j.name.toLowerCase().includes(c.toLowerCase())&&!j.description.toLowerCase().includes(c.toLowerCase())||j.price<h.min||j.price>h.max)).sort((j,k)=>{switch(d){case"name":return j.name.localeCompare(k.name);case"price":return j.price-k.price;case"newest":return new Date(k.createdAt).getTime()-new Date(j.createdAt).getTime();default:return 0}});return C?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Product Catalogue"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:j=>u(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(j=>i.jsx("button",{onClick:()=>l(j),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===j?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:j.charAt(0).toUpperCase()+j.slice(1)},j))}),i.jsxs("select",{value:d,onChange:j=>v(j.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"name",children:"Name A-Z"}),i.jsx("option",{value:"price",children:"Price Low to High"})]}),i.jsxs("button",{onClick:()=>x(!m),className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(IT,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),m&&i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: ",nt(h.min)," - ",nt(h.max)]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("input",{type:"number",placeholder:"Min",value:h.min,onChange:j=>f({...h,min:Number(j.target.value)}),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{children:"to"}),i.jsx("input",{type:"number",placeholder:"Max",value:h.max,onChange:j=>f({...h,max:Number(j.target.value)}),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:()=>{u(""),l("all"),f({min:0,max:1e4}),v("newest")},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Clear All Filters"})})]})})]})]}),N.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("p",{className:"text-xl text-gray-600",children:c||a!=="all"?"No products match your filters.":"No products found."}),(c||a!=="all")&&i.jsx("button",{onClick:()=>{u(""),l("all"),f({min:0,max:1e4})},className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Clear filters"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",N.length," of ",_.length," products"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map((j,k)=>i.jsx(QT,{product:j,onViewDetails:()=>o(j)},`${j.id}-${k}`))})]}),r&&i.jsx(YT,{product:r,isOpen:!!r,onClose:()=>o(null)})]})})},XT=()=>{const{cartItems:t,updateQuantity:e,removeFromCart:n,getTotalPrice:s,clearCart:r}=hc(),o=async()=>{try{const l=s(),c=`order_${Date.now()}`,u=await KT(l,c),h={key:Ss.keyId,amount:u.amount,currency:u.currency,name:Ss.companyName,description:Ss.description,order_id:u.id,image:Ss.image,theme:Ss.theme,handler:function(d){a(d)},prefill:{name:(currentUser==null?void 0:currentUser.displayName)||"Customer",email:(currentUser==null?void 0:currentUser.email)||"",contact:(currentUser==null?void 0:currentUser.phone)||""},modal:{ondismiss:function(){L.error("Payment cancelled")}}};new window.Razorpay(h).open()}catch(l){L.error("Failed to initiate payment"),console.error("Payment error:",l)}},a=async l=>{try{await processRazorpayPayment(l,`cart_${Date.now()}`);const c={userId:currentUser==null?void 0:currentUser.uid,items:t,total:s(),paymentId:l.razorpay_payment_id,orderId:l.razorpay_order_id,signature:l.razorpay_signature,status:"paid",createdAt:new Date().toISOString()},u=ref(database,"orders");await push(u,c),L.success("Payment successful! Order placed."),r()}catch(c){L.error("Payment verification failed"),console.error("Payment verification error:",c)}};return t.length===0?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx(mc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Start shopping to add items to your cart"}),i.jsx(ae,{to:"/catalogue",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Continue Shopping"})]})})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),i.jsx("button",{onClick:r,className:"text-red-600 hover:text-red-700 font-medium",children:"Clear Cart"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"p-6",children:t.map(l=>i.jsxs("div",{className:"flex items-center py-4 border-b border-gray-200 last:border-b-0",children:[i.jsx("img",{src:l.product.imageUrl||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg",alt:l.product.name,className:"w-16 h-16 object-cover rounded-lg mr-4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.product.name}),i.jsxs("p",{className:"text-gray-600",children:["$",l.product.price," each"]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>e(l.id,l.quantity-1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(cw,{className:"w-4 h-4"})}),i.jsx("span",{className:"text-lg font-medium w-8 text-center",children:l.quantity}),i.jsx("button",{onClick:()=>e(l.id,l.quantity+1),disabled:l.quantity>=l.product.stock,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:i.jsx(En,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"text-lg font-semibold text-gray-900 ml-6 w-20 text-right",children:nt(l.product.price*l.quantity)}),i.jsx("button",{onClick:()=>n(l.id),className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:i.jsx(It,{className:"w-4 h-4"})})]},l.id))}),i.jsxs("div",{className:"border-t border-gray-200 p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsxs("span",{className:"text-xl font-semibold",children:["Total: ",nt(s())]})}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(ae,{to:"/catalogue",className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium transition-colors text-center",children:"Continue Shopping"}),i.jsxs("button",{onClick:o,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:["Pay ",nt(s())]})]})]})]})]})})},ZT=()=>{const{currentUser:t,updateProfile:e}=dt(),[n,s]=w.useState(!1),[r,o]=w.useState(!1),[a,l]=w.useState({displayName:(t==null?void 0:t.displayName)||"",phone:(t==null?void 0:t.phone)||"",address:(t==null?void 0:t.address)||"",company:(t==null?void 0:t.company)||"",bio:(t==null?void 0:t.bio)||"",profileImage:null}),[c,u]=w.useState(null);if(!t)return i.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-600",children:"Please log in to view your profile."});const h=[t.displayName,t.phone,t.address,t.company,t.bio,t.profileImage||c],f=h.filter(Boolean).length,d=Math.round(f/h.length*100),v=C=>{var g;const y=(g=C.target.files)==null?void 0:g[0];if(y){l({...a,profileImage:y});const _=new FileReader;_.onloadend=()=>u(_.result),_.readAsDataURL(y)}},m=async C=>{C.preventDefault(),o(!0);try{await e(a.displayName,a.profileImage||void 0,{phone:a.phone,address:a.address,company:a.company,bio:a.bio}),s(!1),u(null),l({...a,profileImage:null})}catch(y){console.error("Error updating profile:",y)}finally{o(!1)}},x=()=>{s(!1),l({displayName:(t==null?void 0:t.displayName)||"",phone:(t==null?void 0:t.phone)||"",address:(t==null?void 0:t.address)||"",company:(t==null?void 0:t.company)||"",bio:(t==null?void 0:t.bio)||"",profileImage:null}),u(null)};return i.jsx("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 mr-4",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:["Profile Completion: ",d,"%"]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d}%`}})})]}),d<100&&!n&&i.jsx("button",{onClick:()=>s(!0),className:"text-sm text-blue-600 hover:underline font-medium",children:"Complete Now"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow flex flex-col md:flex-row items-center md:items-start md:space-x-6",children:[i.jsxs("div",{className:"relative",children:[t.profileImage||c?i.jsx("img",{src:c||t.profileImage,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border"}):i.jsx("div",{className:"w-28 h-28 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:i.jsx(Jt,{className:"w-10 h-10"})}),n&&i.jsxs("label",{className:"absolute bottom-0 right-0 bg-gray-800 p-2 rounded-full cursor-pointer",children:[i.jsx(lw,{className:"w-4 h-4 text-white"}),i.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})]})]}),i.jsxs("div",{className:"mt-4 md:mt-0 text-center md:text-left flex-1",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:t.displayName||"User Profile"}),i.jsx("p",{className:"text-sm text-gray-500",children:t.email}),i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-sm text-gray-600",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fo,{className:"w-4 h-4"})," ",t.role]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(NT,{className:"w-4 h-4"}),"Joined ",new Date(t.createdAt).toLocaleDateString()]})]})]}),!n&&i.jsxs("button",{onClick:()=>s(!0),className:"mt-4 md:mt-0 bg-gray-800 hover:bg-gray-700 text-white py-2 px-4 rounded-lg flex items-center gap-2",children:[i.jsx(ms,{className:"w-4 h-4"}),"Edit"]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),n?i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(da,{label:"Display Name",value:a.displayName,onChange:C=>l({...a,displayName:C})}),i.jsx(da,{label:"Phone",value:a.phone,onChange:C=>l({...a,phone:C})}),i.jsx(da,{label:"Company",value:a.company,onChange:C=>l({...a,company:C})}),i.jsx(da,{label:"Address",value:a.address,onChange:C=>l({...a,address:C})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),i.jsx("textarea",{rows:3,value:a.bio,onChange:C=>l({...a,bio:C.target.value}),className:"w-full border rounded-lg px-3 py-2 mt-1",placeholder:"Tell us something about yourself"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[i.jsxs("button",{type:"button",onClick:x,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg",children:[i.jsx(as,{className:"w-4 h-4 inline mr-1"})," Cancel"]}),i.jsx("button",{type:"submit",disabled:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:r?"Updating...":i.jsxs(i.Fragment,{children:[i.jsx(dw,{className:"w-4 h-4 inline mr-1"})," Save"]})})]})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700",children:[i.jsx(ua,{label:"Phone",icon:Ks,value:t.phone||""}),i.jsx(ua,{label:"Address",icon:jf,value:t.address||""}),i.jsx(ua,{label:"Company",icon:aw,value:t.company||""}),t.bio&&i.jsx("div",{className:"md:col-span-2",children:i.jsx(ua,{label:"About You",icon:Jt,value:t.bio,multiline:!0})})]})]})]})})},ua=({label:t,value:e,icon:n,multiline:s=!1})=>i.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-3 rounded-lg",children:[i.jsx(n,{className:"w-5 h-5 text-gray-500 mt-1"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:t}),i.jsx("p",{className:`text-sm font-medium ${s?"whitespace-pre-line":""}`,children:e||"Not provided"})]})]}),da=({label:t,value:e,onChange:n})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t}),i.jsx("input",{type:"text",value:e,onChange:s=>n(s.target.value),className:"w-full border px-3 py-2 mt-1 rounded-lg",placeholder:`Enter your ${t.toLowerCase()}`})]}),e4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState(null);w.useEffect(()=>{const o=D(O,"users"),a=Z(o,l=>{if(l.exists()){const c=l.val(),u=Object.keys(c).map(h=>({uid:h,...c[h]}));e(u)}});return()=>a()},[]);const r=async(o,a)=>{try{const l=t.find(c=>c.uid===o);if(l){const c=D(O,`users/${o}`);await fe(c,{...l,role:a}),L.success("User role updated successfully!")}}catch(l){L.error("Failed to update user role"),console.error("Error updating user role:",l)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(o=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:i.jsx(fw,{className:"w-5 h-5 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.displayName||o.email}),i.jsx("div",{className:"text-sm text-gray-500",children:o.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("select",{value:o.role,onChange:a=>r(o.uid,a.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 capitalize",children:[i.jsx("option",{value:"customer",children:"Customer"}),i.jsx("option",{value:"employee",children:"Employee"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"editor",children:"Editor"}),i.jsx("option",{value:"viewer",children:"Viewer"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(o.createdAt).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{onClick:()=>s(o),className:"text-blue-600 hover:text-blue-900 p-1",children:i.jsx(ms,{className:"w-4 h-4"})})})})]},o.uid))})]})})}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit User"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:n.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),i.jsxs("select",{value:n.role,onChange:o=>s({...n,role:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"customer",children:"Customer"}),i.jsx("option",{value:"employee",children:"Employee"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{onClick:()=>s(null),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>{r(n.uid,n.role),s(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Save"})]})]})]})})]})},t4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState(!1),[r,o]=w.useState(null),[a,l]=w.useState(!1),[c,u]=w.useState({name:"",description:"",price:"",category:"",stock:"",imageFile:null});w.useEffect(()=>{const m=D(O,"products"),x=Z(m,C=>{if(C.exists()){const y=C.val(),g=Object.keys(y).map(_=>({id:_,...y[_]}));e(g)}else e([])});return()=>x()},[]);const h=async m=>{m.preventDefault(),l(!0);try{let x="";c.imageFile&&(x=await El(c.imageFile));const C={name:c.name,description:c.description,price:parseFloat(c.price),category:c.category,stock:parseInt(c.stock),imageUrl:x||(r==null?void 0:r.imageUrl)||"",updatedAt:new Date().toISOString(),...r?{}:{createdAt:new Date().toISOString()}};if(r){const y=D(O,`products/${r.id}`);await fe(y,C),L.success("Product updated successfully!")}else{const y=D(O,"products");await ct(y,C),L.success("Product added successfully!")}v()}catch(x){L.error("Failed to save product"),console.error("Error saving product:",x)}finally{l(!1)}},f=m=>{o(m),u({name:m.name,description:m.description,price:m.price.toString(),category:m.category,stock:m.stock.toString(),imageFile:null}),s(!0)},d=async m=>{if(confirm("Are you sure you want to delete this product?"))try{const x=D(O,`products/${m}`);await yn(x),L.success("Product deleted successfully!")}catch(x){L.error("Failed to delete product"),console.error("Error deleting product:",x)}},v=()=>{u({name:"",description:"",price:"",category:"",stock:"",imageFile:null}),o(null),s(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),i.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:r?"Edit Product":"Add New Product"}),i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),i.jsx("input",{type:"text",required:!0,value:c.name,onChange:m=>u({...c,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{required:!0,value:c.description,onChange:m=>u({...c,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),i.jsx("input",{type:"number",step:"0.01",required:!0,value:c.price,onChange:m=>u({...c,price:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),i.jsx("input",{type:"number",required:!0,value:c.stock,onChange:m=>u({...c,stock:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),i.jsx("input",{type:"text",required:!0,value:c.category,onChange:m=>u({...c,category:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Image"}),i.jsx("input",{type:"file",accept:"image/*",onChange:m=>{var x;return u({...c,imageFile:((x=m.target.files)==null?void 0:x[0])||null})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:v,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:a?"Saving...":r?"Update":"Add"})]})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(m=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:m.imageUrl||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg",alt:m.name,className:"w-10 h-10 object-cover rounded-lg mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name}),i.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:m.description})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.category}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:nt(m.price)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.stock}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>f(m),className:"text-blue-600 hover:text-blue-900 p-1",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(m.id),className:"text-red-600 hover:text-red-900 p-1",children:i.jsx(It,{className:"w-4 h-4"})})]})})]},m.id))})]})})})]})},Fi={apiKey:"AIzaSyAcUPet5yafJOl1BacuBT9moyg_jd_291c",spreadsheetId:"1OLarWFbvQgw1u7bZczrcrol2CnL--1KPgreLf9DFGjY",range:"Sheet1!A1:Z1000",serviceAccountEmail:"your-service-account@project.iam.gserviceaccount.com",privateKey:"your-private-key-here"},n4=async()=>{try{const t=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Fi.spreadsheetId}/values/${Fi.range}?key=${Fi.apiKey}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const r=await t.json();throw console.error("Google Sheets API Error:",r),new Error(`Failed to fetch data from Google Sheets: ${t.status} ${t.statusText}`)}const n=(await t.json()).values;if(!n||n.length===0)return console.warn("No data found in Google Sheets"),[];const s=[];for(let r=1;r<n.length;r++){const o=n[r];if(!o||o.length===0)continue;const a={sku:o[0]||"",name:o[1]||"",description:o[2]||"",category:o[3]||"",unitType:o[4]||"piece",pricePerUnit:parseFloat(o[5])||0,costPrice:parseFloat(o[6])||0,sellingPrice:parseFloat(o[7])||0,currentStock:parseInt(o[8])||0,minimumStock:parseInt(o[9])||0,maximumStock:parseInt(o[10])||1e3,reorderLevel:parseInt(o[11])||10,location:o[12]||"",supplier:o[13]||"",barcode:o[14]||"",imageUrl:o[15]||"",groupTag:o[16]||"",width:parseFloat(o[17])||void 0,height:parseFloat(o[18])||void 0,unit:o[4]||"pcs"};a.sku&&a.name&&s.push(a)}return console.log(`Successfully fetched ${s.length} items from Google Sheets`),s}catch(t){throw console.error("Error fetching from Google Sheets:",t),t}},s4=async(t,e)=>{try{const n=[[t.sku,t.name,t.description,t.category,t.unitType,t.pricePerUnit,t.costPrice,t.sellingPrice,t.currentStock,t.minimumStock,t.maximumStock,t.reorderLevel,t.location,t.supplier,t.barcode||"",t.imageUrl||"",t.groupTag||"",t.width||"",t.height||""]],s=e?`Sheet1!A${e+1}:S${e+1}`:"Sheet1!A:S",r=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Fi.spreadsheetId}/values/${s}?valueInputOption=RAW`,{method:"PUT",headers:{Authorization:`Bearer ${await pw()}`,"Content-Type":"application/json"},body:JSON.stringify({values:n})});if(!r.ok)throw new Error(`Failed to update Google Sheets: ${r.status}`);return console.log("Successfully updated Google Sheets"),!0}catch(n){return console.error("Error updating Google Sheets:",n),!1}},r4=async t=>{try{const e=[[t.sku,t.name,t.description,t.category,t.unitType,t.pricePerUnit,t.costPrice,t.sellingPrice,t.currentStock,t.minimumStock,t.maximumStock,t.reorderLevel,t.location,t.supplier,t.barcode||"",t.imageUrl||"",t.groupTag||"",t.width||"",t.height||""]],n=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Fi.spreadsheetId}/values/Sheet1!A:S:append?valueInputOption=RAW`,{method:"POST",headers:{Authorization:`Bearer ${await pw()}`,"Content-Type":"application/json"},body:JSON.stringify({values:e})});if(!n.ok)throw new Error(`Failed to add to Google Sheets: ${n.status}`);return console.log("Successfully added to Google Sheets"),!0}catch(e){return console.error("Error adding to Google Sheets:",e),!1}};async function pw(){return"your-access-token"}const i4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]),[r,o]=w.useState([]),[a,l]=w.useState("items"),[c,u]=w.useState(!1),[h,f]=w.useState(null),[d,v]=w.useState(!1),[m,x]=w.useState(""),[C,y]=w.useState("all"),[g,_]=w.useState("all"),[b,N]=w.useState(!1),{currentUser:j}=dt(),[k,T]=w.useState({sku:"",name:"",description:"",category:"",unit:"pcs",unitType:"piece",costPrice:"",sellingPrice:"",pricePerUnit:"",currentStock:"",minimumStock:"",maximumStock:"",reorderLevel:"",location:"",supplier:"",barcode:"",imageUrl:"",groupTag:"",width:"",height:""});w.useEffect(()=>{const p=D(O,"inventory"),R=Z(p,Te=>{if(Te.exists()){const et=Te.val(),Oe=Object.keys(et).map(be=>({id:be,...et[be]}));e(Oe)}}),te=D(O,"inventoryTransactions"),se=Z(te,Te=>{if(Te.exists()){const et=Te.val(),Oe=Object.keys(et).map(be=>({id:be,...et[be]}));s(Oe.sort((be,Gt)=>new Date(Gt.performedAt).getTime()-new Date(be.performedAt).getTime()))}}),we=D(O,"inventoryGroups"),B=Z(we,Te=>{if(Te.exists()){const et=Te.val(),Oe=Object.keys(et).map(be=>({id:be,...et[be]}));o(Oe)}});return()=>{R(),se(),B()}},[]);const E=async()=>{N(!0);try{const p=await n4(),R=D(O,"inventory");for(const te of p){const se=t.filter(we=>we.sku===te.sku);if(se.length>0){const we=se[0],B=D(O,`inventory/${we.id}`);await fe(B,{...we,...te,lastUpdated:new Date().toISOString(),updatedBy:(j==null?void 0:j.email)||"admin",isActive:!0})}else{const we=ct(R),B=Object.fromEntries(Object.entries({...te,lastUpdated:new Date().toISOString(),updatedBy:(j==null?void 0:j.email)||"admin",createdAt:new Date().toISOString(),isActive:!0}).filter(([Te,et])=>et!==void 0));await fe(we,B)}}L.success(`Synced ${p.length} items from Google Sheets!`)}catch(p){L.error("Failed to sync from Google Sheets. Check your configuration."),console.error("Sync error:",p)}finally{N(!1)}},I=async p=>{try{const R={sku:p.sku,name:p.name,description:p.description,category:p.category,unitType:p.unitType||"piece",pricePerUnit:p.pricePerUnit||p.sellingPrice,costPrice:p.costPrice,sellingPrice:p.sellingPrice,currentStock:p.currentStock,minimumStock:p.minimumStock,maximumStock:p.maximumStock,reorderLevel:p.reorderLevel,location:p.location,supplier:p.supplier,barcode:p.barcode,imageUrl:p.imageUrl,groupTag:p.groupTag,width:p.width,height:p.height,unit:p.unit};await updateGoogleSheetsInventory(R),console.log("Successfully synced to Google Sheets")}catch(R){console.error("Failed to sync to Google Sheets:",R)}},S=async p=>{p.preventDefault(),v(!0);try{const R={sku:k.sku,name:k.name,description:k.description,category:k.category,unit:k.unit,unitType:k.unitType,costPrice:parseFloat(k.costPrice),sellingPrice:parseFloat(k.sellingPrice),pricePerUnit:parseFloat(k.pricePerUnit)||parseFloat(k.sellingPrice),currentStock:parseInt(k.currentStock),minimumStock:parseInt(k.minimumStock),maximumStock:parseInt(k.maximumStock),reorderLevel:parseInt(k.reorderLevel),location:k.location,supplier:k.supplier,barcode:k.barcode,lastUpdated:new Date().toISOString(),updatedBy:(j==null?void 0:j.email)||"admin",isActive:!0,imageUrl:k.imageUrl||"",groupTag:k.groupTag||"",width:parseFloat(k.width)||void 0,height:parseFloat(k.height)||void 0,...h?{}:{createdAt:new Date().toISOString()}};if(h){const te=D(O,`inventory/${h.id}`);await fe(te,R),await I({...h,...R}),L.success("Inventory item updated successfully!")}else{const te=D(O,"inventory"),se=ct(te);await fe(se,R),await I({id:se.key,...R}),L.success("Inventory item added successfully!")}z()}catch(R){L.error("Failed to save inventory item"),console.error("Error saving inventory item:",R)}finally{v(!1)}},M=p=>{var R,te;f(p),T({sku:p.sku,name:p.name,description:p.description,category:p.category,unit:p.unit,unitType:p.unitType||"piece",costPrice:p.costPrice.toString(),sellingPrice:p.sellingPrice.toString(),pricePerUnit:(p.pricePerUnit||p.sellingPrice).toString(),currentStock:p.currentStock.toString(),minimumStock:p.minimumStock.toString(),maximumStock:p.maximumStock.toString(),reorderLevel:p.reorderLevel.toString(),location:p.location,supplier:p.supplier,barcode:p.barcode||"",imageUrl:p.imageUrl||"",groupTag:p.groupTag||"",width:((R=p.width)==null?void 0:R.toString())||"",height:((te=p.height)==null?void 0:te.toString())||""}),u(!0)},W=async p=>{if(confirm("Are you sure you want to delete this inventory item?"))try{const R=D(O,`inventory/${p}`);await yn(R),L.success("Inventory item deleted successfully!")}catch(R){L.error("Failed to delete inventory item"),console.error("Error deleting inventory item:",R)}},z=()=>{T({sku:"",name:"",description:"",category:"",unit:"pcs",unitType:"piece",costPrice:"",sellingPrice:"",pricePerUnit:"",currentStock:"",minimumStock:"",maximumStock:"",reorderLevel:"",location:"",supplier:"",barcode:"",imageUrl:"",groupTag:"",width:"",height:""}),f(null),u(!1)},oe=()=>{const R=[["SKU","Name","Description","Category","Unit","Cost Price","Selling Price","Current Stock","Minimum Stock","Maximum Stock","Reorder Level","Location","Supplier","Barcode"].join(","),...t.map(B=>[B.sku,B.name,B.description,B.category,B.unit,B.costPrice,B.sellingPrice,B.currentStock,B.minimumStock,B.maximumStock,B.reorderLevel,B.location,B.supplier,B.barcode||""].join(","))].join(`
`),te=new Blob([R],{type:"text/csv"}),se=window.URL.createObjectURL(te),we=document.createElement("a");we.href=se,we.download="inventory.csv",we.click(),window.URL.revokeObjectURL(se)},ht=t.filter(p=>{const R=(p.name||"").toLowerCase().includes(m.toLowerCase())||(p.sku||"").toLowerCase().includes(m.toLowerCase()),te=C==="all"||p.category===C,se=g==="all"||p.groupTag===g;return R&&te&&se}),Se=Array.from(new Set(t.map(p=>p.category))),F=Array.from(new Set(t.map(p=>p.groupTag).filter(Boolean))),G=t.filter(p=>p.currentStock<=p.reorderLevel),q=[{id:"items",label:"Inventory Items",icon:Qt},{id:"transactions",label:"Transaction History",icon:ET},{id:"groups",label:"Inventory Groups",icon:yt}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:E,disabled:b,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(uw,{className:`w-4 h-4 mr-2 ${b?"animate-spin":""}`}),b?"Syncing...":"Sync from Google Sheets"]}),i.jsxs("a",{href:"https://docs.google.com/spreadsheets",target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(kT,{className:"w-4 h-4 mr-2"}),"Open Google Sheets"]}),i.jsxs("button",{onClick:oe,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(ST,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),i.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]}),G.length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Oi,{className:"w-5 h-5 text-yellow-600 mr-2"}),i.jsx("h3",{className:"text-lg font-medium text-yellow-800",children:"Low Stock Alert"})]}),i.jsxs("p",{className:"text-yellow-700 mt-1",children:[G.length," items are at or below reorder level"]})]}),i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("nav",{className:"flex space-x-8",children:q.map(p=>i.jsxs("button",{onClick:()=>l(p.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors flex items-center ${a===p.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(p.icon,{className:"w-4 h-4 mr-2"}),p.label]},p.id))})}),a==="items"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search by name or SKU...",value:m,onChange:p=>x(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("select",{value:C,onChange:p=>y(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Categories"}),Se.map(p=>i.jsx("option",{value:p,children:p},p))]}),i.jsxs("select",{value:g,onChange:p=>_(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Groups"}),F.map(p=>i.jsx("option",{value:p,children:p},p))]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Details"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pricing"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ht.map(p=>i.jsxs("tr",{className:p.currentStock<=p.reorderLevel?"bg-yellow-50":"",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name}),p.imageUrl&&i.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-12 h-12 object-cover rounded mt-2"}),i.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",p.sku]}),i.jsx("div",{className:"text-sm text-gray-500",children:p.category}),p.groupTag&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mt-1",children:p.groupTag})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsxs("div",{className:"text-sm text-gray-900",children:[p.currentStock," ",p.unit]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["Min: ",p.minimumStock," | Reorder: ",p.reorderLevel]}),p.width&&p.height&&i.jsxs("div",{className:"text-sm text-gray-500",children:["Dimensions: ",p.width,"  ",p.height," ",p.unitType]})]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsxs("div",{className:"text-sm text-gray-900",children:["",p.pricePerUnit||p.sellingPrice]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["per ",p.unitType||p.unit]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["Cost: ",p.costPrice]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.location}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>M(p),className:"text-blue-600 hover:text-blue-900 p-1",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>W(p.id),className:"text-red-600 hover:text-red-900 p-1",children:i.jsx(It,{className:"w-4 h-4"})})]})})]},p.id))})]})})})]}),a==="transactions"&&i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performed By"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(p=>{const R=t.find(te=>te.id===p.inventoryItemId);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(p.performedAt).toLocaleString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(R==null?void 0:R.name)||"Unknown Item"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.type==="purchase"?"bg-green-100 text-green-800":p.type==="sale"?"bg-blue-100 text-blue-800":p.type==="damage"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:p.type})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.jsxs("div",{className:"flex items-center",children:[p.type==="purchase"||p.type==="return"?i.jsx(Cf,{className:"w-4 h-4 text-green-600 mr-1"}):i.jsx(hw,{className:"w-4 h-4 text-red-600 mr-1"}),p.quantity]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.performedBy}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p.reason})]},p.id)})})]})})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"Edit Inventory Item":"Add New Inventory Item"}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),i.jsx("input",{type:"text",required:!0,value:k.sku,onChange:p=>T({...k,sku:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",required:!0,value:k.name,onChange:p=>T({...k,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:k.description,onChange:p=>T({...k,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),i.jsx("input",{type:"text",required:!0,value:k.category,onChange:p=>T({...k,category:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Type"}),i.jsxs("select",{value:k.unitType,onChange:p=>T({...k,unitType:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"piece",children:"Pieces"}),i.jsx("option",{value:"sqft",children:"Square Feet"}),i.jsx("option",{value:"meter",children:"Square Meter"}),i.jsx("option",{value:"kg",children:"Kilograms"}),i.jsx("option",{value:"liter",children:"Liters"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:k.location,onChange:p=>T({...k,location:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price ()"}),i.jsx("input",{type:"number",step:"0.01",value:k.costPrice,onChange:p=>T({...k,costPrice:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Unit () *"}),i.jsx("input",{type:"number",step:"0.01",required:!0,value:k.pricePerUnit,onChange:p=>T({...k,pricePerUnit:p.target.value,sellingPrice:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock *"}),i.jsx("input",{type:"number",required:!0,value:k.currentStock,onChange:p=>T({...k,currentStock:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Stock"}),i.jsx("input",{type:"number",value:k.minimumStock,onChange:p=>T({...k,minimumStock:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Stock"}),i.jsx("input",{type:"number",value:k.maximumStock,onChange:p=>T({...k,maximumStock:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Level"}),i.jsx("input",{type:"number",value:k.reorderLevel,onChange:p=>T({...k,reorderLevel:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier"}),i.jsx("input",{type:"text",value:k.supplier,onChange:p=>T({...k,supplier:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),i.jsx("input",{type:"text",value:k.barcode,onChange:p=>T({...k,barcode:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),i.jsx("input",{type:"url",value:k.imageUrl,onChange:p=>T({...k,imageUrl:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Tag"}),i.jsx("input",{type:"text",value:k.groupTag,onChange:p=>T({...k,groupTag:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Premium, Budget, Luxury"})]})]}),(k.unitType==="sqft"||k.unitType==="meter")&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Width (",k.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:k.width,onChange:p=>T({...k,width:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Width"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Height (",k.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:k.height,onChange:p=>T({...k,height:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Height"})]})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:z,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:d?"Saving...":h?"Update":"Add"})]})]})]})})]})},o4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState(null),[r,o]=w.useState("all"),[a,l]=w.useState(""),[c,u]=w.useState(!1);dt(),w.useEffect(()=>{const x=D(O,"contactMessages"),C=Z(x,y=>{if(y.exists()){const g=y.val(),_=Object.keys(g).map(b=>({id:b,...g[b]}));e(_.sort((b,N)=>new Date(N.createdAt).getTime()-new Date(b.createdAt).getTime()))}else e([])});return()=>C()},[]);const h=async x=>{try{const C=t.find(y=>y.id===x);if(C&&!C.isRead){const y=D(O,`contactMessages/${x}`);await fe(y,{...C,isRead:!0}),L.success("Message marked as read")}}catch(C){console.error("Error marking message as read:",C)}},f=async x=>{if(!a.trim()){L.error("Please enter a response");return}u(!0);try{const C=t.find(y=>y.id===x);if(C){const y=D(O,`contactMessages/${x}`);await fe(y,{...C,response:a,respondedAt:new Date().toISOString(),isRead:!0}),L.success("Response saved successfully!"),l(""),s(null)}}catch(C){L.error("Failed to save response"),console.error("Error saving response:",C)}finally{u(!1)}},d=async x=>{if(confirm("Are you sure you want to delete this message?"))try{const C=D(O,`contactMessages/${x}`);await fe(C,null),L.success("Message deleted successfully!")}catch(C){L.error("Failed to delete message"),console.error("Error deleting message:",C)}},v=t.filter(x=>r==="unread"?!x.isRead:r==="read"?x.isRead:!0),m=t.filter(x=>!x.isRead).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contact Messages"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["all","unread","read"].map(x=>i.jsxs("button",{onClick:()=>o(x),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r===x?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[x.charAt(0).toUpperCase()+x.slice(1),x==="unread"&&m>0&&i.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:m})]},x))})]}),i.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(x=>i.jsxs("tr",{className:x.isRead?"":"bg-blue-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[x.isRead?i.jsx(og,{className:"w-5 h-5 text-gray-400"}):i.jsx(xo,{className:"w-5 h-5 text-blue-600"}),x.response&&i.jsx(su,{className:"w-4 h-4 text-green-600 ml-2"})]})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name}),i.jsx("div",{className:"text-sm text-gray-500",children:x.email})]}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate max-w-xs",children:x.subject}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Il,{className:"w-4 h-4 mr-1"}),new Date(x.createdAt).toLocaleDateString()]})}),i.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>{s(x),h(x.id)},className:"text-blue-600 hover:text-blue-900 p-1",title:"View Message",children:i.jsx(gt,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(x.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Message",children:i.jsx(It,{className:"w-4 h-4"})})]})})]},x.id))})]})})}),i.jsx("div",{className:"md:hidden space-y-4",children:v.map(x=>i.jsxs("div",{className:`rounded-lg border shadow-sm p-4 ${x.isRead?"bg-white":"bg-blue-50"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold text-gray-800",children:x.name}),i.jsx("div",{className:"text-sm text-gray-500",children:x.email})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[x.isRead?i.jsx(og,{className:"w-5 h-5 text-gray-400"}):i.jsx(xo,{className:"w-5 h-5 text-blue-600"}),x.response&&i.jsx(su,{className:"w-4 h-4 text-green-600"})]})]}),i.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Subject:"})," ",x.subject]}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.jsx(Il,{className:"w-4 h-4 inline-block mr-1"}),new Date(x.createdAt).toLocaleDateString()]}),i.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{s(x),h(x.id)},className:"text-blue-600 hover:text-blue-800",children:i.jsx(gt,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>d(x.id),className:"text-red-600 hover:text-red-800",children:i.jsx(It,{className:"w-5 h-5"})})]})]},x.id))}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b p-6",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.subject}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["From: ",n.name," (",n.email,")"]}),i.jsx("p",{className:"text-sm text-gray-500",children:new Date(n.createdAt).toLocaleString()})]}),i.jsx("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Message"}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.message})})]}),n.response&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Previous Response"}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.response}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Responded on ",new Date(n.respondedAt).toLocaleString()]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.response?"Update Response":"Send Response"}),i.jsx("textarea",{value:a,onChange:x=>l(x.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type your response here..."})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:()=>s(null),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Close"}),i.jsx("button",{onClick:()=>f(n.id),disabled:c||!a.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center",children:c?"Saving...":i.jsxs(i.Fragment,{children:[i.jsx(su,{className:"w-4 h-4 mr-2"}),n.response?"Update Response":"Send Response"]})})]})]})]})})]})},a4=()=>{const[t,e]=w.useState("general"),[n,s]=w.useState([]),[r,o]=w.useState([]),[a,l]=w.useState(!1),[c,u]=w.useState(null),[h,f]=w.useState(!1),{currentUser:d}=dt(),[v,m]=w.useState({}),[x,C]=w.useState({name:"",position:"",bio:"",email:"",linkedin:"",twitter:"",imageFile:null,isActive:!0});w.useEffect(()=>{const I=D(O,"siteSettings"),S=Z(I,z=>{if(z.exists()){const oe=z.val(),ht=Object.keys(oe).map(Se=>({id:Se,...oe[Se]}));s(ht)}else y()}),M=D(O,"teamMembers"),W=Z(M,z=>{if(z.exists()){const oe=z.val(),ht=Object.keys(oe).map(Se=>({id:Se,...oe[Se]}));o(ht.sort((Se,F)=>Se.order-F.order))}});return()=>{S(),W()}},[]);const y=async()=>{const I=[{category:"general",key:"site_title",value:"Shop",type:"text",label:"Title"},{category:"general",key:"site_description",value:"Your trusted business partner",type:"textarea",label:"Tagline"},{category:"general",key:"site_logo",value:"",type:"image",label:"Site Logo"},{category:"general",key:"favicon",value:"",type:"image",label:"Favicon"},{category:"store",key:"store_name",value:"Shop",type:"text",label:"Store Name"},{category:"store",key:"store_tagline",value:"Quality products for your business",type:"text",label:"Store Tagline"},{category:"store",key:"store_hours",value:"Mon-Fri: 9AM-6PM, Sat: 10AM-4PM, Sun: Closed",type:"textarea",label:"Store Hours"},{category:"store",key:"store_address",value:"123 Business Street, City, State 12345",type:"textarea",label:"Store Address"},{category:"contact",key:"primary_email",value:"contact@shop.com",type:"email",label:"Primary Email"},{category:"contact",key:"support_email",value:"support@shop.com",type:"email",label:"Support Email"},{category:"contact",key:"primary_phone",value:"+1 (555) 123-4567",type:"text",label:"Primary Phone"},{category:"contact",key:"secondary_phone",value:"+1 (555) 987-6543",type:"text",label:"Secondary Phone"},{category:"social",key:"facebook_url",value:"",type:"url",label:"Facebook URL"},{category:"social",key:"twitter_url",value:"",type:"url",label:"Twitter URL"},{category:"social",key:"instagram_url",value:"",type:"url",label:"Instagram URL"},{category:"social",key:"linkedin_url",value:"",type:"url",label:"LinkedIn URL"},{category:"seo",key:"meta_keywords",value:"shop, business, products, quality",type:"textarea",label:"Meta Keywords"},{category:"seo",key:"meta_description",value:"Your trusted business partner providing premium products and exceptional service.",type:"textarea",label:"Meta Description"},{category:"seo",key:"google_analytics",value:"",type:"text",label:"Google Analytics ID"},{category:"general",key:"hero_image",value:"",type:"image",label:"Hero Section Image"},{category:"general",key:"hero_heading",value:"Build Your Dream Interior House",type:"text",label:"Hero Heading"},{category:"general",key:"hero_tagline",value:"Launch an elegant, highperformance ecommerce site in minutes. Free estimate, secure payments, and 24/7 support included.",type:"textarea",label:"Hero Tagline"}],S=D(O,"siteSettings");for(const M of I){const W=ct(S);await fe(W,{...M,updatedAt:new Date().toISOString(),updatedBy:(d==null?void 0:d.email)||"system"})}},g=async(I,S,M)=>{l(!0);try{let W=S;M&&(m(oe=>({...oe,[I]:!0})),W=await El(M));const z=n.find(oe=>oe.id===I);if(z){const oe=D(O,`siteSettings/${I}`);await fe(oe,{...z,value:W,updatedAt:new Date().toISOString(),updatedBy:(d==null?void 0:d.email)||"admin"}),L.success("Setting updated successfully!")}}catch(W){L.error("Failed to update setting"),console.error("Error updating setting:",W)}finally{M&&m(W=>({...W,[I]:!1})),l(!1)}},_=async I=>{I.preventDefault(),l(!0);try{let S=(c==null?void 0:c.image)||"";x.imageFile&&(S=await El(x.imageFile));const M={name:x.name,position:x.position,bio:x.bio,email:x.email,linkedin:x.linkedin,twitter:x.twitter,image:S,isActive:x.isActive,order:(c==null?void 0:c.order)||r.length+1,updatedAt:new Date().toISOString(),...c?{}:{createdAt:new Date().toISOString()}};if(c){const W=D(O,`teamMembers/${c.id}`);await fe(W,M),L.success("Team member updated successfully!")}else{const W=D(O,"teamMembers");await ct(W,M),L.success("Team member added successfully!")}N()}catch(S){L.error("Failed to save team member"),console.error("Error saving team member:",S)}finally{l(!1)}},b=async I=>{if(confirm("Are you sure you want to delete this team member?"))try{const S=D(O,`teamMembers/${I}`);await yn(S),L.success("Team member deleted successfully!")}catch(S){L.error("Failed to delete team member"),console.error("Error deleting team member:",S)}},N=()=>{C({name:"",position:"",bio:"",email:"",linkedin:"",twitter:"",imageFile:null,isActive:!0}),u(null),f(!1)},j=I=>{u(I),C({name:I.name,position:I.position,bio:I.bio,email:I.email||"",linkedin:I.linkedin||"",twitter:I.twitter||"",imageFile:null,isActive:I.isActive}),f(!0)},k=[{id:"general",label:"General",icon:rg},{id:"store",label:"Store Info",icon:MT},{id:"contact",label:"Contact",icon:Ks},{id:"social",label:"Social Media",icon:rg},{id:"seo",label:"SEO",icon:Sf},{id:"team",label:"Team",icon:yt}],T=I=>{switch(I.type){case"textarea":return i.jsx("textarea",{defaultValue:I.value,onBlur:S=>g(I.id,S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3});case"image":return i.jsxs("div",{className:"space-y-2",children:[I.value&&i.jsx("img",{src:I.value,alt:I.label,className:"w-32 h-32 object-cover rounded-lg border"}),i.jsxs("label",{htmlFor:`file-input-${I.id}`,className:`inline-flex items-center px-4 py-2 border rounded-md cursor-pointer 
          ${v[I.id]?"opacity-50 cursor-wait":"hover:bg-gray-100"}
        `,children:[v[I.id]?"Uploading":I.value?"Change Image":"Upload Image",i.jsx(UT,{className:"w-4 h-4 ml-2"})]}),i.jsx("input",{id:`file-input-${I.id}`,type:"file",accept:"image/*",className:"hidden",disabled:v[I.id],onChange:S=>{var W;const M=(W=S.target.files)==null?void 0:W[0];M&&g(I.id,I.value,M)}})]});case"boolean":return i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",defaultChecked:I.value==="true",onChange:S=>g(I.id,S.target.checked.toString()),className:"mr-2"}),"Enable"]});default:return i.jsx("input",{type:I.type,defaultValue:I.value,onBlur:S=>g(I.id,S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}},E=()=>{if(t==="team")return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Team Management"}),i.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(S=>i.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:S.image||"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg",alt:S.name,className:"w-20 h-20 rounded-full object-cover mx-auto mb-4"}),i.jsx("h4",{className:"text-lg font-semibold",children:S.name}),i.jsx("p",{className:"text-blue-600 font-medium",children:S.position}),i.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-3",children:S.bio}),i.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-2",children:[S.isActive?i.jsx(gt,{className:"w-4 h-4 text-green-600"}):i.jsx(mr,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:`text-sm ${S.isActive?"text-green-600":"text-gray-400"}`,children:S.isActive?"Active":"Inactive"})]}),i.jsxs("div",{className:"flex space-x-2 mt-4",children:[i.jsxs("button",{onClick:()=>j(S),className:"flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(ms,{className:"w-4 h-4 mr-1"}),"Edit"]}),i.jsxs("button",{onClick:()=>b(S.id),className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(It,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})},S.id))}),h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:c?"Edit Team Member":"Add Team Member"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[(x.imageFile||(c==null?void 0:c.image))&&i.jsx("img",{src:x.imageFile?URL.createObjectURL(x.imageFile):c==null?void 0:c.image,alt:"Preview",className:"w-16 h-16 rounded-full object-cover"}),i.jsxs("label",{className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer flex items-center",children:[i.jsx(lw,{className:"w-4 h-4 mr-2"}),"Choose Photo",i.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var M;return C({...x,imageFile:((M=S.target.files)==null?void 0:M[0])||null})},className:"hidden"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",required:!0,value:x.name,onChange:S=>C({...x,name:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),i.jsx("input",{type:"text",required:!0,value:x.position,onChange:S=>C({...x,position:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),i.jsx("textarea",{required:!0,value:x.bio,onChange:S=>C({...x,bio:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),i.jsx("input",{type:"email",value:x.email,onChange:S=>C({...x,email:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn URL (Optional)"}),i.jsx("input",{type:"url",value:x.linkedin,onChange:S=>C({...x,linkedin:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Twitter URL (Optional)"}),i.jsx("input",{type:"url",value:x.twitter,onChange:S=>C({...x,twitter:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:x.isActive,onChange:S=>C({...x,isActive:S.target.checked}),className:"mr-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active (visible on website)"})]})}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:a?"Saving...":c?"Update":"Add"})]})]})]})})]});const I=n.filter(S=>S.category===t);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[t," Settings"]}),i.jsx("div",{className:"grid gap-6",children:I.map(S=>i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:S.label}),S.description&&i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:S.description}),T(S)]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(S.updatedAt).toLocaleString()," by ",S.updatedBy]})]},S.id))})]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings Management"})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("nav",{className:"flex space-x-8 px-6",children:k.map(I=>i.jsxs("button",{onClick:()=>e(I.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors flex items-center ${t===I.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx(I.icon,{className:"w-4 h-4 mr-2"}),I.label]},I.id))})}),i.jsx("div",{className:"p-6",children:E()})]})]})},l4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]),[r,o]=w.useState([]),[a,l]=w.useState(!1),[c,u]=w.useState(null),[h,f]=w.useState(!1),[d,v]=w.useState("");dt();const[m,x]=w.useState({userId:"",employeeId:"",name:"",email:"",phone:"",department:"",position:"",assignedStockGroups:[],permissions:{canManageInventory:!0,canViewReports:!0,canProcessOrders:!1},isActive:!0});w.useEffect(()=>{const N=D(O,"employees"),j=Z(N,S=>{if(S.exists()){const M=S.val(),W=Object.keys(M).map(z=>({id:z,...M[z]}));e(W)}}),k=D(O,"stockGroups"),T=Z(k,S=>{if(S.exists()){const M=S.val(),W=Object.keys(M).map(z=>({id:z,...M[z]}));s(W)}}),E=D(O,"users"),I=Z(E,S=>{if(S.exists()){const M=S.val(),W=Object.keys(M).map(z=>({uid:z,...M[z]}));o(W.filter(z=>z.role==="employee"||z.role==="customer"))}});return()=>{j(),T(),I()}},[]);const C=async N=>{N.preventDefault(),f(!0);try{const j={...m,updatedAt:new Date().toISOString(),...c?{}:{createdAt:new Date().toISOString()}};if(c){const k=D(O,`employees/${c.id}`);await fe(k,j),L.success("Employee updated successfully!")}else{const k=D(O,"employees");await ct(k,j),L.success("Employee created successfully!")}_()}catch(j){L.error("Failed to save employee"),console.error("Error saving employee:",j)}finally{f(!1)}},y=N=>{u(N),x({userId:N.userId,employeeId:N.employeeId,name:N.name,email:N.email,phone:N.phone||"",department:N.department,position:N.position,assignedStockGroups:N.assignedStockGroups||[],permissions:N.permissions,isActive:N.isActive}),l(!0)},g=async N=>{if(confirm("Are you sure you want to delete this employee?"))try{const j=D(O,`employees/${N}`);await yn(j),L.success("Employee deleted successfully!")}catch(j){L.error("Failed to delete employee"),console.error("Error deleting employee:",j)}},_=()=>{x({userId:"",employeeId:"",name:"",email:"",phone:"",department:"",position:"",assignedStockGroups:[],permissions:{canManageInventory:!0,canViewReports:!0,canProcessOrders:!1},isActive:!0}),u(null),l(!1)},b=t.filter(N=>N.name.toLowerCase().includes(d.toLowerCase())||N.email.toLowerCase().includes(d.toLowerCase())||N.employeeId.toLowerCase().includes(d.toLowerCase()));return i.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"Employee Management"}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Employee"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search employees...",value:d,onChange:N=>v(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"block lg:hidden",children:i.jsx("div",{className:"divide-y divide-gray-200",children:b.map(N=>i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.name}),N.isActive?i.jsx(fw,{className:"w-4 h-4 text-green-600"}):i.jsx($T,{className:"w-4 h-4 text-red-600"})]}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(xo,{className:"w-4 h-4 mr-2"}),N.email]}),N.phone&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ks,{className:"w-4 h-4 mr-2"}),N.phone]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(aw,{className:"w-4 h-4 mr-2"}),N.position," - ",N.department]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Fo,{className:"w-4 h-4 mr-2"}),"ID: ",N.employeeId]})]})]}),i.jsxs("div",{className:"flex space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>y(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>g(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:i.jsx(It,{className:"w-4 h-4"})})]})]})},N.id))})}),i.jsx("div",{className:"hidden lg:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Groups"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(N=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),i.jsx("div",{className:"text-sm text-gray-500",children:N.email}),i.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",N.employeeId]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"text-sm text-gray-900",children:N.position}),i.jsx("div",{className:"text-sm text-gray-500",children:N.department})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:(N.assignedStockGroups||[]).map(j=>{const k=n.find(T=>T.id===j);return k?i.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:k.name},j):null})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.isActive?"Active":"Inactive"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>y(N),className:"text-blue-600 hover:text-blue-900 p-1",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>g(N.id),className:"text-red-600 hover:text-red-900 p-1",children:i.jsx(It,{className:"w-4 h-4"})})]})})]},N.id))})]})})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b p-4 lg:p-6",children:i.jsx("h3",{className:"text-lg lg:text-xl font-semibold",children:c?"Edit Employee":"Add New Employee"})}),i.jsxs("form",{onSubmit:C,className:"p-4 lg:p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User *"}),i.jsxs("select",{required:!0,value:m.userId,onChange:N=>{const j=r.find(k=>k.uid===N.target.value);x({...m,userId:N.target.value,name:(j==null?void 0:j.displayName)||(j==null?void 0:j.email.split("@")[0])||"",email:(j==null?void 0:j.email)||""})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Select a user"}),r.map(N=>i.jsx("option",{value:N.uid,children:N.displayName||N.email},N.uid))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID *"}),i.jsx("input",{type:"text",required:!0,value:m.employeeId,onChange:N=>x({...m,employeeId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"EMP001"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),i.jsx("input",{type:"text",required:!0,value:m.department,onChange:N=>x({...m,department:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Inventory Management"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position *"}),i.jsx("input",{type:"text",required:!0,value:m.position,onChange:N=>x({...m,position:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Stock Manager"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),i.jsx("input",{type:"tel",value:m.phone,onChange:N=>x({...m,phone:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+91 9876543210"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Stock Groups"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:n.map(N=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:(m.assignedStockGroups||[]).includes(N.id),onChange:j=>{j.target.checked?x({...m,assignedStockGroups:[...m.assignedStockGroups||[],N.id]}):x({...m,assignedStockGroups:(m.assignedStockGroups||[]).filter(k=>k!==N.id)})},className:"mr-2"}),i.jsx("span",{className:"text-sm",children:N.name})]},N.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.permissions.canManageInventory,onChange:N=>x({...m,permissions:{...m.permissions,canManageInventory:N.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can Manage Inventory"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.permissions.canViewReports,onChange:N=>x({...m,permissions:{...m.permissions,canViewReports:N.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can View Reports"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.permissions.canProcessOrders,onChange:N=>x({...m,permissions:{...m.permissions,canProcessOrders:N.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can Process Orders"})]})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.isActive,onChange:N=>x({...m,isActive:N.target.checked}),className:"mr-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Employee"})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:_,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:h?"Saving...":c?"Update":"Create"})]})]})]})})]})},c4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]),[r,o]=w.useState(!1),[a,l]=w.useState(null),[c,u]=w.useState(!1),[h,f]=w.useState(""),[d,v]=w.useState({name:"",description:"",categories:[],assignedEmployees:[],permissions:{canAdd:!0,canReduce:!0,canAdjust:!0,canViewReports:!0}});w.useEffect(()=>{const b=D(O,"stockGroups"),N=Z(b,T=>{if(T.exists()){const E=T.val(),I=Object.keys(E).map(S=>({id:S,...E[S],assignedEmployees:E[S].assignedEmployees||[],categories:E[S].categories||[]}));e(I)}}),j=D(O,"inventory"),k=Z(j,T=>{if(T.exists()){const E=T.val(),I=Object.keys(E).map(S=>({id:S,...E[S]}));s(I)}});return()=>{N(),k()}},[]);const m=async b=>{b.preventDefault(),u(!0);try{const N={...d,updatedAt:new Date().toISOString(),...a?{}:{createdAt:new Date().toISOString()}};if(a){const j=D(O,`stockGroups/${a.id}`);await fe(j,N),L.success("Stock group updated successfully!")}else{const j=D(O,"stockGroups");await ct(j,N),L.success("Stock group created successfully!")}y()}catch(N){L.error("Failed to save stock group"),console.error("Error saving stock group:",N)}finally{u(!1)}},x=b=>{l(b),v({name:b.name,description:b.description,categories:b.categories,assignedEmployees:b.assignedEmployees,permissions:b.permissions}),o(!0)},C=async b=>{if(confirm("Are you sure you want to delete this stock group?"))try{const N=D(O,`stockGroups/${b}`);await yn(N),L.success("Stock group deleted successfully!")}catch(N){L.error("Failed to delete stock group"),console.error("Error deleting stock group:",N)}},y=()=>{v({name:"",description:"",categories:[],assignedEmployees:[],permissions:{canAdd:!0,canReduce:!0,canAdjust:!0,canViewReports:!0}}),l(null),o(!1)},g=Array.from(new Set(n.map(b=>b.category))),_=t.filter(b=>b.name.toLowerCase().includes(h.toLowerCase())||b.description.toLowerCase().includes(h.toLowerCase()));return i.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"Stock Group Management"}),i.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Stock Group"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search stock groups...",value:h,onChange:b=>f(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:_.map(b=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 lg:p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:b.name}),i.jsx("p",{className:"text-gray-600 text-sm mb-3",children:b.description})]}),i.jsxs("div",{className:"flex space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>x(b),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>C(b.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:i.jsx(It,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categories"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:b.categories.map((N,j)=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:N},j))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"flex items-center",children:[b.permissions.canAdd?i.jsx(gt,{className:"w-3 h-3 text-green-600 mr-1"}):i.jsx(mr,{className:"w-3 h-3 text-gray-400 mr-1"}),i.jsx("span",{className:b.permissions.canAdd?"text-green-600":"text-gray-400",children:"Add Stock"})]}),i.jsxs("div",{className:"flex items-center",children:[b.permissions.canReduce?i.jsx(gt,{className:"w-3 h-3 text-green-600 mr-1"}):i.jsx(mr,{className:"w-3 h-3 text-gray-400 mr-1"}),i.jsx("span",{className:b.permissions.canReduce?"text-green-600":"text-gray-400",children:"Reduce Stock"})]}),i.jsxs("div",{className:"flex items-center",children:[b.permissions.canAdjust?i.jsx(gt,{className:"w-3 h-3 text-green-600 mr-1"}):i.jsx(mr,{className:"w-3 h-3 text-gray-400 mr-1"}),i.jsx("span",{className:b.permissions.canAdjust?"text-green-600":"text-gray-400",children:"Adjust Stock"})]}),i.jsxs("div",{className:"flex items-center",children:[b.permissions.canViewReports?i.jsx(gt,{className:"w-3 h-3 text-green-600 mr-1"}):i.jsx(mr,{className:"w-3 h-3 text-gray-400 mr-1"}),i.jsx("span",{className:b.permissions.canViewReports?"text-green-600":"text-gray-400",children:"View Reports"})]})]})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(yt,{className:"w-4 h-4 mr-1"}),b.assignedEmployees.length," employees assigned"]})]})]},b.id))}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b p-4 lg:p-6",children:i.jsx("h3",{className:"text-lg lg:text-xl font-semibold",children:a?"Edit Stock Group":"Add New Stock Group"})}),i.jsxs("form",{onSubmit:m,className:"p-4 lg:p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name *"}),i.jsx("input",{type:"text",required:!0,value:d.name,onChange:b=>v({...d,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Electronics, Clothing, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:d.description,onChange:b=>v({...d,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe this stock group..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:g.map(b=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.categories.includes(b),onChange:N=>{N.target.checked?v({...d,categories:[...d.categories,b]}):v({...d,categories:d.categories.filter(j=>j!==b)})},className:"mr-2"}),i.jsx("span",{className:"text-sm",children:b})]},b))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.canAdd,onChange:b=>v({...d,permissions:{...d.permissions,canAdd:b.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can Add Stock"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.canReduce,onChange:b=>v({...d,permissions:{...d.permissions,canReduce:b.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can Reduce Stock"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.canAdjust,onChange:b=>v({...d,permissions:{...d.permissions,canAdjust:b.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can Adjust Stock"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.canViewReports,onChange:b=>v({...d,permissions:{...d.permissions,canViewReports:b.target.checked}}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Can View Reports"})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:y,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:c,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:c?"Saving...":a?"Update":"Create"})]})]})]})})]})},u4=()=>{const[t,e]=w.useState("overview"),[n,s]=w.useState([]),[r,o]=w.useState([]),[a,l]=w.useState([]),[c,u]=w.useState(null),[h,f]=w.useState(""),[d,v]=w.useState(!1),[m,x]=w.useState(!1),[C,y]=w.useState(!1),[g,_]=w.useState(null),[b,N]=w.useState(!1),{currentUser:j}=dt(),[k,T]=w.useState({type:"adjustment",quantity:"",reason:"",reference:"",notes:""}),[E,I]=w.useState({toUserId:"",subject:"",content:""}),[S,M]=w.useState({sku:"",name:"",description:"",category:"",unitType:"piece",pricePerUnit:"",costPrice:"",sellingPrice:"",currentStock:"",minimumStock:"",reorderLevel:"",location:"",supplier:"",imageUrl:"",groupTag:"",width:"",height:""});w.useEffect(()=>{if(!j)return;const p=D(O,"employees"),R=Z(p,Oe=>{if(Oe.exists()){const be=Oe.val(),Gt=Object.values(be).find(Me=>Me.userId===j.uid);u(Gt)}}),te=D(O,"inventory"),se=Z(te,Oe=>{var be;if(Oe.exists()){const Gt=Oe.val();let Zr=Object.keys(Gt).map(Uo=>({id:Uo,...Gt[Uo]})).filter(Uo=>Uo.isActive);(be=c==null?void 0:c.assignedStockGroups)!=null&&be.length,s(Zr)}}),we=D(O,"inventoryTransactions"),B=Z(we,Oe=>{if(Oe.exists()){const be=Oe.val(),Gt=Object.keys(be).map(Me=>({id:Me,...be[Me]})).filter(Me=>Me.performedBy===(j==null?void 0:j.email)).sort((Me,Zr)=>new Date(Zr.performedAt).getTime()-new Date(Me.performedAt).getTime());o(Gt)}}),Te=D(O,"messages"),et=Z(Te,Oe=>{if(Oe.exists()){const be=Oe.val(),Gt=Object.keys(be).map(Me=>({id:Me,...be[Me]})).filter(Me=>Me.toUserId===(j==null?void 0:j.uid)||Me.fromUserId===(j==null?void 0:j.uid)).sort((Me,Zr)=>new Date(Zr.createdAt).getTime()-new Date(Me.createdAt).getTime());l(Gt)}});return()=>{R(),se(),B(),et()}},[j,c==null?void 0:c.assignedStockGroups]);const W=async p=>{if(p.preventDefault(),!!g){N(!0);try{const R=parseInt(k.quantity),se=["purchase","return"].includes(k.type)?g.currentStock+R:g.currentStock-R;if(se<0){L.error("Insufficient stock for this operation");return}const we=D(O,"inventoryTransactions");await ct(we,{inventoryItemId:g.id,type:k.type,quantity:R,previousStock:g.currentStock,newStock:se,reason:k.reason,reference:k.reference,notes:k.notes,performedBy:(j==null?void 0:j.email)||"employee",performedAt:new Date().toISOString()});const B={...g,currentStock:se,lastUpdated:new Date().toISOString(),updatedBy:(j==null?void 0:j.email)||"employee"},Te=D(O,`inventory/${g.id}`);await fe(Te,B);try{await s4({sku:B.sku,name:B.name,description:B.description,category:B.category,unitType:B.unitType||"piece",pricePerUnit:B.pricePerUnit||B.sellingPrice,costPrice:B.costPrice,sellingPrice:B.sellingPrice,currentStock:B.currentStock,minimumStock:B.minimumStock,maximumStock:B.maximumStock,reorderLevel:B.reorderLevel,location:B.location,supplier:B.supplier,barcode:B.barcode,imageUrl:B.imageUrl,groupTag:B.groupTag,width:B.width,height:B.height,unit:B.unit})}catch(et){console.warn("Failed to sync to Google Sheets:",et)}L.success("Stock updated successfully!"),v(!1),T({type:"adjustment",quantity:"",reason:"",reference:"",notes:""}),_(null)}catch(R){L.error("Failed to update stock"),console.error("Error updating stock:",R)}finally{N(!1)}}},z=async p=>{p.preventDefault(),N(!0);try{const R={sku:S.sku,name:S.name,description:S.description,category:S.category,unit:S.unitType,unitType:S.unitType,costPrice:parseFloat(S.costPrice),sellingPrice:parseFloat(S.sellingPrice),pricePerUnit:parseFloat(S.pricePerUnit)||parseFloat(S.sellingPrice),currentStock:parseInt(S.currentStock),minimumStock:parseInt(S.minimumStock),maximumStock:1e3,reorderLevel:parseInt(S.reorderLevel),location:S.location,supplier:S.supplier,imageUrl:S.imageUrl,groupTag:S.groupTag,width:parseFloat(S.width)||void 0,height:parseFloat(S.height)||void 0,lastUpdated:new Date().toISOString(),updatedBy:(j==null?void 0:j.email)||"employee",createdAt:new Date().toISOString(),isActive:!0},te=D(O,"inventory"),se=ct(te);await fe(se,R);try{await r4({sku:R.sku,name:R.name,description:R.description,category:R.category,unitType:R.unitType,pricePerUnit:R.pricePerUnit,costPrice:R.costPrice,sellingPrice:R.sellingPrice,currentStock:R.currentStock,minimumStock:R.minimumStock,maximumStock:R.maximumStock,reorderLevel:R.reorderLevel,location:R.location,supplier:R.supplier,barcode:"",imageUrl:R.imageUrl,groupTag:R.groupTag,width:R.width,height:R.height,unit:R.unit})}catch(we){console.warn("Failed to sync to Google Sheets:",we)}L.success("Item added successfully!"),y(!1),M({sku:"",name:"",description:"",category:"",unitType:"piece",pricePerUnit:"",costPrice:"",sellingPrice:"",currentStock:"",minimumStock:"",reorderLevel:"",location:"",supplier:"",imageUrl:"",groupTag:"",width:"",height:""})}catch(R){L.error("Failed to add item"),console.error("Error adding item:",R)}finally{N(!1)}},oe=async p=>{p.preventDefault(),N(!0);try{const R=D(O,"messages");await ct(R,{fromUserId:(j==null?void 0:j.uid)||"",toUserId:"admin",subject:E.subject,content:E.content,isRead:!1,createdAt:new Date().toISOString()}),L.success("Message sent successfully!"),x(!1),I({toUserId:"",subject:"",content:""})}catch(R){L.error("Failed to send message"),console.error("Error sending message:",R)}finally{N(!1)}},ht=n.filter(p=>p.name.toLowerCase().includes(h.toLowerCase())||p.sku.toLowerCase().includes(h.toLowerCase())),Se=n.filter(p=>p.currentStock<=p.reorderLevel),F=r.filter(p=>new Date(p.performedAt).toDateString()===new Date().toDateString()),G=[{id:"overview",label:"Overview",icon:Mi},{id:"inventory",label:"Inventory",icon:Qt},{id:"messages",label:"Messages",icon:pr},{id:"profile",label:"Profile",icon:Jt}],q=()=>{switch(t){case"overview":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Today's Transactions"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900",children:F.length})]}),i.jsx(Mi,{className:"w-8 h-8 text-blue-600"})]})}),i.jsx("div",{className:"bg-yellow-50 p-6 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Low Stock Items"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:Se.length})]}),i.jsx(Oi,{className:"w-8 h-8 text-yellow-600"})]})}),i.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Managed Items"}),i.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.length})]}),i.jsx(Qt,{className:"w-8 h-8 text-green-600"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Transactions"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date & Time"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.slice(0,10).map(p=>{const R=n.find(te=>te.id===p.inventoryItemId);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(p.performedAt).toLocaleString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(R==null?void 0:R.name)||"Unknown Item"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.type==="purchase"?"bg-green-100 text-green-800":p.type==="sale"?"bg-blue-100 text-blue-800":p.type==="damage"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:p.type})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.jsxs("div",{className:"flex items-center",children:[["purchase","return"].includes(p.type)?i.jsx(Cf,{className:"w-4 h-4 text-green-600 mr-1"}):i.jsx(hw,{className:"w-4 h-4 text-red-600 mr-1"}),p.quantity]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p.reason})]},p.id)})})]})})]})]});case"inventory":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Inventory Management"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>y(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Item"]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search items...",value:h,onChange:p=>f(p.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),Se.length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Oi,{className:"w-5 h-5 text-yellow-600 mr-2"}),i.jsx("h4",{className:"text-lg font-medium text-yellow-800",children:"Low Stock Alert"})]}),i.jsxs("p",{className:"text-yellow-700 mt-1",children:[Se.length," items need attention"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ht.map(p=>i.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 ${p.currentStock<=p.reorderLevel?"border-l-4 border-yellow-500":""}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:p.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",p.sku]}),i.jsx("p",{className:"text-sm text-gray-500",children:p.category}),p.groupTag&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mt-1",children:p.groupTag})]}),p.imageUrl&&i.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-16 h-16 object-cover rounded-lg ml-4"}),p.currentStock<=p.reorderLevel&&i.jsx(Oi,{className:"w-5 h-5 text-yellow-500 ml-2"})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Current Stock:"}),i.jsxs("span",{className:"text-sm font-medium",children:[p.currentStock," ",p.unit]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Reorder Level:"}),i.jsxs("span",{className:"text-sm",children:[p.reorderLevel," ",p.unit]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:["Price per ",p.unitType,":"]}),i.jsxs("span",{className:"text-sm font-medium",children:["",p.pricePerUnit||p.sellingPrice]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Location:"}),i.jsx("span",{className:"text-sm",children:p.location})]}),p.width&&p.height&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Dimensions:"}),i.jsxs("span",{className:"text-sm",children:[p.width,"  ",p.height," ",p.unitType]})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>{_(p),T({...k,type:"purchase"}),v(!0)},className:"flex-1 bg-green-100 hover:bg-green-200 text-green-700 py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(En,{className:"w-4 h-4 mr-1"}),"Add"]}),i.jsxs("button",{onClick:()=>{_(p),T({...k,type:"sale"}),v(!0)},className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 py-2 px-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[i.jsx(cw,{className:"w-4 h-4 mr-1"}),"Reduce"]})]})]},p.id))})]});case"messages":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Messages"}),i.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(fc,{className:"w-4 h-4 mr-2"}),"New Message"]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md",children:a.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(pr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),i.jsx("p",{className:"text-gray-600",children:"Start a conversation with your team"})]}):i.jsx("div",{className:"divide-y divide-gray-200",children:a.map(p=>i.jsx("div",{className:"p-6 hover:bg-gray-50",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900",children:p.subject}),!p.isRead&&p.toUserId===(j==null?void 0:j.uid)&&i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"New"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.content}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.createdAt).toLocaleString()})]}),i.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:i.jsx(gt,{className:"w-4 h-4"})})]})},p.id))})})]});case"profile":return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"My Profile"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:(c==null?void 0:c.name)||(j==null?void 0:j.displayName)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:(j==null?void 0:j.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),i.jsx("input",{type:"text",value:(c==null?void 0:c.employeeId)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),i.jsx("input",{type:"text",value:(c==null?void 0:c.department)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),i.jsx("input",{type:"text",value:(c==null?void 0:c.position)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]})]});default:return null}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row",children:[i.jsxs("div",{className:"w-full lg:w-64 bg-white shadow-lg",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Employee Dashboard"}),i.jsx("p",{className:"text-sm text-gray-600",children:(c==null?void 0:c.name)||(j==null?void 0:j.email)}),i.jsx("p",{className:"text-xs text-gray-500",children:c==null?void 0:c.position})]}),i.jsx("nav",{className:"p-4",children:G.map(p=>i.jsxs("button",{onClick:()=>e(p.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg mb-2 transition-colors ${t===p.id?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(p.icon,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block",children:p.label})]},p.id))})]}),i.jsxs("div",{className:"flex-1 p-4 lg:p-8",children:[i.jsx("div",{className:"mb-6",children:i.jsx("h1",{className:"text-3xl font-bold text-gray-900 capitalize",children:t})}),q()]})]}),d&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Stock Audit - ",g.name]}),i.jsxs("form",{onSubmit:W,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),i.jsxs("select",{value:k.type,onChange:p=>T({...k,type:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"purchase",children:"Purchase/Received"}),i.jsx("option",{value:"sale",children:"Sale/Issued"}),i.jsx("option",{value:"adjustment",children:"Stock Adjustment"}),i.jsx("option",{value:"damage",children:"Damage/Loss"}),i.jsx("option",{value:"return",children:"Return"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),i.jsx("input",{type:"number",required:!0,min:"1",value:k.quantity,onChange:p=>T({...k,quantity:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Current stock: ",g.currentStock," ",g.unit]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason *"}),i.jsx("input",{type:"text",required:!0,value:k.reason,onChange:p=>T({...k,reason:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Customer order, Damaged goods, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference (Optional)"}),i.jsx("input",{type:"text",value:k.reference,onChange:p=>T({...k,reference:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Order number, invoice, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),i.jsx("textarea",{value:k.notes,onChange:p=>T({...k,notes:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{v(!1),_(null),T({type:"adjustment",quantity:"",reason:"",reference:"",notes:""})},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:b?"Processing...":"Update Stock"})]})]})]})}),C&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Inventory Item"}),i.jsxs("form",{onSubmit:z,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),i.jsx("input",{type:"text",required:!0,value:S.sku,onChange:p=>M({...S,sku:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",required:!0,value:S.name,onChange:p=>M({...S,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:S.description,onChange:p=>M({...S,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),i.jsx("input",{type:"text",required:!0,value:S.category,onChange:p=>M({...S,category:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Type"}),i.jsxs("select",{value:S.unitType,onChange:p=>M({...S,unitType:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"piece",children:"Pieces"}),i.jsx("option",{value:"sqft",children:"Square Feet"}),i.jsx("option",{value:"meter",children:"Square Meter"}),i.jsx("option",{value:"kg",children:"Kilograms"}),i.jsx("option",{value:"liter",children:"Liters"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:S.location,onChange:p=>M({...S,location:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price ()"}),i.jsx("input",{type:"number",step:"0.01",value:S.costPrice,onChange:p=>M({...S,costPrice:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Unit () *"}),i.jsx("input",{type:"number",step:"0.01",required:!0,value:S.pricePerUnit,onChange:p=>M({...S,pricePerUnit:p.target.value,sellingPrice:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock *"}),i.jsx("input",{type:"number",required:!0,value:S.currentStock,onChange:p=>M({...S,currentStock:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Stock"}),i.jsx("input",{type:"number",value:S.minimumStock,onChange:p=>M({...S,minimumStock:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Level"}),i.jsx("input",{type:"number",value:S.reorderLevel,onChange:p=>M({...S,reorderLevel:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier"}),i.jsx("input",{type:"text",value:S.supplier,onChange:p=>M({...S,supplier:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Tag"}),i.jsx("input",{type:"text",value:S.groupTag,onChange:p=>M({...S,groupTag:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Premium, Budget, Luxury"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),i.jsx("input",{type:"url",value:S.imageUrl,onChange:p=>M({...S,imageUrl:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),(S.unitType==="sqft"||S.unitType==="meter")&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Width (",S.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:S.width,onChange:p=>M({...S,width:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Height (",S.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:S.height,onChange:p=>M({...S,height:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center",children:b?i.jsxs(i.Fragment,{children:[i.jsx(uw,{className:"w-4 h-4 mr-2 animate-spin"}),"Adding..."]}):i.jsxs(i.Fragment,{children:[i.jsx(dw,{className:"w-4 h-4 mr-2"}),"Add Item"]})})]})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Send Message to Admin"}),i.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),i.jsx("input",{type:"text",required:!0,value:E.subject,onChange:p=>I({...E,subject:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),i.jsx("textarea",{required:!0,rows:4,value:E.content,onChange:p=>I({...E,content:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:b?"Sending...":"Send Message"})]})]})]})})]})},d4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState("all"),[r,o]=w.useState(null),{currentUser:a}=dt();w.useEffect(()=>{const d=D(O,"testimonials"),v=Z(d,m=>{if(m.exists()){const x=m.val(),C=Object.keys(x).map(y=>({id:y,...x[y]}));e(C.sort((y,g)=>new Date(g.createdAt).getTime()-new Date(y.createdAt).getTime()))}else e([])});return()=>v()},[]);const l=async d=>{const v=t.find(m=>m.id===d);if(v)try{await fe(D(O,`testimonials/${d}`),{...v,isApproved:!0,approvedAt:new Date().toISOString(),approvedBy:(a==null?void 0:a.email)||"admin"}),L.success("Testimonial approved successfully!")}catch{L.error("Failed to approve testimonial")}},c=async d=>{const v=t.find(m=>m.id===d);if(v)try{await fe(D(O,`testimonials/${d}`),{...v,isApproved:!1}),L.success("Testimonial rejected")}catch{L.error("Failed to reject testimonial")}},u=async d=>{if(confirm("Are you sure you want to delete this testimonial?"))try{await yn(D(O,`testimonials/${d}`)),L.success("Deleted testimonial")}catch{L.error("Failed to delete testimonial")}},h=t.filter(d=>n==="pending"?!d.isApproved:n==="approved"?d.isApproved:!0),f=d=>i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:d?"Approved":"Pending"});return i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 flex-wrap",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Testimonial Management"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","approved"].map(d=>i.jsxs("button",{onClick:()=>s(d),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.charAt(0).toUpperCase()+d.slice(1),d==="pending"&&i.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:t.filter(v=>!v.isApproved).length})]},d))})]}),i.jsx("div",{className:"hidden sm:block",children:i.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"min-w-full table-auto text-sm divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Review"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rating"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(d=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"flex items-center",children:[d.userImage?i.jsx("img",{src:d.userImage,className:"w-10 h-10 rounded-full object-cover mr-3"}):i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:i.jsx(Jt,{className:"w-5 h-5 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.userName}),i.jsx("div",{className:"text-sm text-gray-500",children:d.userEmail})]})]})}),i.jsxs("td",{className:"px-4 py-4 max-w-xs truncate",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.title}),i.jsx("div",{className:"text-sm text-gray-500 truncate",children:d.content})]}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("div",{className:"flex items-center",children:[...Array(d.rating)].map((v,m)=>i.jsx(os,{className:"w-4 h-4 text-yellow-400 fill-current"},m))})}),i.jsx("td",{className:"px-4 py-4",children:f(d.isApproved)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500",children:new Date(d.createdAt).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>o(d),className:"text-blue-600 hover:text-blue-900 p-1",children:i.jsx(gt,{className:"w-4 h-4"})}),d.isApproved?i.jsx("button",{onClick:()=>c(d.id),className:"text-yellow-600 hover:text-yellow-900 p-1",children:i.jsx(as,{className:"w-4 h-4"})}):i.jsx("button",{onClick:()=>l(d.id),className:"text-green-600 hover:text-green-900 p-1",children:i.jsx(sg,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>u(d.id),className:"text-red-600 hover:text-red-900 p-1",children:i.jsx(It,{className:"w-4 h-4"})})]})})]},d.id))})]})})}),i.jsx("div",{className:"sm:hidden grid gap-4",children:h.map(d=>i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[d.userImage?i.jsx("img",{src:d.userImage,className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:i.jsx(Jt,{className:"w-5 h-5 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:d.userName}),i.jsx("div",{className:"text-sm text-gray-500",children:d.userEmail})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:d.title}),i.jsx("p",{className:"text-sm text-gray-600",children:d.content})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[[...Array(d.rating)].map((v,m)=>i.jsx(os,{className:"w-4 h-4 text-yellow-400 fill-current"},m)),i.jsxs("span",{className:"text-sm text-gray-600",children:[d.rating,"/5"]})]}),i.jsx("div",{className:"text-sm",children:f(d.isApproved)}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Submitted: ",new Date(d.createdAt).toLocaleDateString()]}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[i.jsxs("button",{onClick:()=>o(d),className:"text-blue-600 hover:underline text-sm flex items-center gap-1",children:[i.jsx(gt,{className:"w-4 h-4"})," View"]}),d.isApproved?i.jsxs("button",{onClick:()=>c(d.id),className:"text-yellow-600 hover:underline text-sm flex items-center gap-1",children:[i.jsx(as,{className:"w-4 h-4"})," Reject"]}):i.jsxs("button",{onClick:()=>l(d.id),className:"text-green-600 hover:underline text-sm flex items-center gap-1",children:[i.jsx(sg,{className:"w-4 h-4"})," Approve"]}),i.jsxs("button",{onClick:()=>u(d.id),className:"text-red-600 hover:underline text-sm flex items-center gap-1",children:[i.jsx(It,{className:"w-4 h-4"})," Delete"]})]})]},d.id))}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full p-6 relative",children:[i.jsx("button",{onClick:()=>o(null),className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",children:i.jsx(as,{className:"w-5 h-5"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[r.userImage?i.jsx("img",{src:r.userImage,className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:i.jsx(Jt,{className:"w-6 h-6 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:r.userName}),i.jsx("p",{className:"text-sm text-gray-500",children:r.userEmail})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-medium",children:r.title}),i.jsx("p",{className:"text-gray-600 text-sm",children:r.content})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[[...Array(r.rating)].map((d,v)=>i.jsx(os,{className:"w-4 h-4 text-yellow-400 fill-current"},v)),i.jsxs("span",{className:"text-sm text-gray-600",children:[r.rating,"/5"]})]}),i.jsx("div",{children:f(r.isApproved)}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Submitted: ",new Date(r.createdAt).toLocaleString()]}),r.approvedAt&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Approved by: ",r.approvedBy," on ",new Date(r.approvedAt).toLocaleString()]})]})]})})]})},h4=()=>{const{currentUser:t}=dt(),[e,n]=w.useState("overview"),[s,r]=w.useState(!1),[o,a]=w.useState({totalUsers:0,totalProducts:0,totalInventory:0,unreadMessages:0,lowStockItems:0,totalOrders:0});if((t==null?void 0:t.role)==="employee")return i.jsx(u4,{});if((t==null?void 0:t.role)!=="admin")return i.jsx(Zu,{to:"/",replace:!0});w.useEffect(()=>((()=>{const h=D(O,"users");Z(h,m=>{const x=m.val();a(C=>({...C,totalUsers:x?Object.keys(x).length:0}))});const f=D(O,"products");Z(f,m=>{const x=m.val();a(C=>({...C,totalProducts:x?Object.keys(x).length:0}))});const d=D(O,"inventory");Z(d,m=>{const x=m.val();let C=0,y=0;x&&Object.values(x).forEach(g=>{C++,g.currentStock<=g.minStock&&y++}),a(g=>({...g,totalInventory:C,lowStockItems:y}))});const v=D(O,"contactMessages");Z(v,m=>{const x=m.val();let C=0;x&&Object.values(x).forEach(y=>{y.isRead||C++}),a(y=>({...y,unreadMessages:C}))})})(),()=>{la(D(O,"users")),la(D(O,"products")),la(D(O,"inventory")),la(D(O,"contactMessages"))}),[]);const l=[{id:"overview",label:"Overview",icon:Mi},{id:"users",label:"Users",icon:yt},{id:"products",label:"Products",icon:Qt},{id:"inventory",label:"Inventory",icon:Qt},{id:"employees",label:"Employees",icon:yt},{id:"testimonials",label:"Testimonials",icon:pr},{id:"stock-groups",label:"Stock Groups",icon:Qt},{id:"messages",label:"Messages",icon:pr,badge:o.unreadMessages},{id:"settings",label:"Settings",icon:Sf}],c=()=>{switch(e){case"overview":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ng,{className:"w-5 h-5 text-gray-500"}),o.unreadMessages>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:o.unreadMessages})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>n("users"),role:"button",tabIndex:0,onKeyDown:u=>{u.key==="Enter"&&n("users")},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalUsers})]}),i.jsx(yt,{className:"w-8 h-8 text-blue-500"})]}),i.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[i.jsx(Cf,{className:"w-4 h-4 mr-1"}),"Active users"]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>n("products"),role:"button",tabIndex:0,onKeyDown:u=>{u.key==="Enter"&&n("products")},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalProducts})]}),i.jsx(Qt,{className:"w-8 h-8 text-green-500"})]}),i.jsxs("div",{className:"mt-2 flex items-center text-sm text-blue-600",children:[i.jsx(Qt,{className:"w-4 h-4 mr-1"}),"In catalog"]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>n("inventory"),role:"button",tabIndex:0,onKeyDown:u=>{u.key==="Enter"&&n("inventory")},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inventory Items"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalInventory})]}),i.jsx(Qt,{className:"w-8 h-8 text-purple-500"})]}),i.jsxs("div",{className:"mt-2 flex items-center text-sm text-purple-600",children:[i.jsx(Mi,{className:"w-4 h-4 mr-1"}),"Total items"]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>n("messages"),role:"button",tabIndex:0,onKeyDown:u=>{u.key==="Enter"&&n("messages")},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Messages"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.unreadMessages})]}),i.jsx(pr,{className:"w-8 h-8 text-orange-500"})]}),i.jsxs("div",{className:"mt-2 flex items-center text-sm text-orange-600",children:[i.jsx(ng,{className:"w-4 h-4 mr-1"}),"Unread"]})]})]}),o.lowStockItems>0&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Oi,{className:"w-5 h-5 text-yellow-600 mr-2"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Low Stock Alert"}),i.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[o.lowStockItems," items are running low on stock. Check inventory for details."]})]})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>n("products"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-500 mr-3"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Manage Products"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Add or edit products"})]})]}),i.jsxs("button",{onClick:()=>n("inventory"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(Mi,{className:"w-6 h-6 text-green-500 mr-3"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Check Inventory"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Monitor stock levels"})]})]}),i.jsxs("button",{onClick:()=>n("messages"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(pr,{className:"w-6 h-6 text-orange-500 mr-3"}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"View Messages"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Customer inquiries"})]})]})]})]})]});case"users":return i.jsx(e4,{});case"products":return i.jsx(t4,{});case"inventory":return i.jsx(i4,{});case"employees":return i.jsx(l4,{});case"stock-groups":return i.jsx(c4,{});case"messages":return i.jsx(o4,{});case"testimonials":return i.jsx(d4,{});case"settings":return i.jsx(a4,{});default:return i.jsx("div",{children:"Select a tab"})}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),i.jsxs("div",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[i.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"}),i.jsx("button",{onClick:()=>r(!1),className:"lg:hidden p-2 rounded-md hover:bg-gray-100",children:i.jsx(as,{className:"w-5 h-5"})})]}),i.jsx("nav",{className:"mt-6 px-3",children:l.map(u=>{const h=u.icon;return i.jsxs("button",{onClick:()=>{n(u.id),r(!1)},className:`
                  w-full flex items-center justify-between px-3 py-2 mb-1 text-left rounded-lg transition-colors
                  ${e===u.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-100"}
                `,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(h,{className:"w-5 h-5 mr-3"}),i.jsx("span",{className:"font-medium",children:u.label})]}),u.badge&&u.badge>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:u.badge})]},u.id)})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"bg-white shadow-sm border-b h-16 flex items-center justify-between px-6",children:[i.jsx("button",{onClick:()=>r(!0),className:"lg:hidden p-2 rounded-md hover:bg-gray-100",children:i.jsx(OT,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome back, ",(t==null?void 0:t.displayName)||(t==null?void 0:t.email)]})})]}),i.jsx("main",{className:"flex-1 overflow-auto p-6",children:c()})]})]})},f4=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]);w.useEffect(()=>{const o=D(O,"siteSettings"),a=Z(o,u=>{if(u.exists()){const h=u.val(),f=Object.keys(h).map(d=>({id:d,...h[d]}));e(f)}}),l=D(O,"teamMembers"),c=Z(l,u=>{if(u.exists()){const h=u.val(),f=Object.keys(h).map(d=>({id:d,...h[d]})).filter(d=>d.isActive).sort((d,v)=>d.order-v.order);s(f)}});return()=>{a(),c()}},[]);const r=o=>{const a=t.find(l=>l.key===o);return(a==null?void 0:a.value)||""};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:["About ",r("store_name")||"Our Shop"]}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:r("site_description")||"We are a passionate team dedicated to providing high-quality products and exceptional customer service."})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-16",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Our Story"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Founded with a vision to make quality products accessible to everyone, our shop has been serving customers with dedication and excellence for years."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We believe in building lasting relationships with our customers by providing not just products, but complete solutions that meet their needs."}),i.jsx("p",{className:"text-gray-600",children:"Our commitment to quality, innovation, and customer satisfaction drives everything we do."})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg p-8 text-white",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Why Choose Us?"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx(Nf,{className:"w-5 h-5 mr-2"}),"Quality Guarantee"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx(ig,{className:"w-5 h-5 mr-2"}),"Customer First Approach"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx(ag,{className:"w-5 h-5 mr-2"}),"Competitive Pricing"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx(yt,{className:"w-5 h-5 mr-2"}),"Expert Support Team"]})]})]})]}),i.jsxs("div",{className:"mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-12",children:"Our Values"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ag,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Excellence"}),i.jsx("p",{className:"text-gray-600",children:"We strive for excellence in every product we offer and every service we provide."})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ig,{className:"w-8 h-8 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Integrity"}),i.jsx("p",{className:"text-gray-600",children:"Honesty and transparency are at the core of all our business relationships."})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(yt,{className:"w-8 h-8 text-purple-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Community"}),i.jsx("p",{className:"text-gray-600",children:"We believe in building strong relationships and giving back to our community."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-12",children:"Meet Our Team"}),n.length>0?i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(o=>i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:o.image||"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg",alt:o.name,className:"w-32 h-32 rounded-full object-cover mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),i.jsx("p",{className:"text-blue-600 font-medium mb-3",children:o.position}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:o.bio}),(o.email||o.linkedin||o.twitter)&&i.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[o.email&&i.jsx("a",{href:`mailto:${o.email}`,className:"text-gray-400 hover:text-blue-600 transition-colors",children:i.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[i.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),i.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),o.linkedin&&i.jsx("a",{href:o.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-600 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z",clipRule:"evenodd"})})}),o.twitter&&i.jsx("a",{href:o.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-600 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84"})})})]})]},o.id))}):i.jsx("p",{className:"text-center text-gray-600 max-w-2xl mx-auto",children:"Our dedicated team of professionals is here to help you find exactly what you need. With years of experience and a passion for customer service, we're committed to your satisfaction."})]})]})})},m4=()=>{const[t,e]=w.useState({name:"",email:"",subject:"",message:""}),[n,s]=w.useState(!1),[r,o]=w.useState([]);w.useEffect(()=>{const u=D(O,"siteSettings"),h=Z(u,f=>{if(f.exists()){const d=f.val(),v=Object.keys(d).map(m=>({id:m,...d[m]}));o(v)}});return()=>h()},[]);const a=u=>{const h=r.find(f=>f.key===u);return(h==null?void 0:h.value)||""},l=async u=>{u.preventDefault(),s(!0);try{const h=D(O,"contactMessages");await ct(h,{...t,isRead:!1,createdAt:new Date().toISOString()}),L.success("Message sent successfully! We'll get back to you soon."),e({name:"",email:"",subject:"",message:""})}catch(h){L.error("Failed to send message. Please try again."),console.error("Error sending contact message:",h)}finally{s(!1)}},c=u=>{e({...t,[u.target.name]:u.target.value})};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contact Us"}),i.jsx("p",{className:"text-xl text-gray-600",children:"We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Get in Touch"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(xo,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email"}),i.jsx("p",{className:"text-gray-600",children:a("primary_email")||"contact@shop.com"}),i.jsx("p",{className:"text-gray-600",children:a("support_email")||"support@shop.com"})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Ks,{className:"w-5 h-5 text-green-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Phone"}),i.jsx("p",{className:"text-gray-600",children:a("primary_phone")||"+1 (555) 123-4567"}),i.jsx("p",{className:"text-gray-600",children:a("secondary_phone")||"+1 (555) 987-6543"})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"shrink-0 w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:i.jsx(jf,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Address"}),(a("store_address")||`123 Business Street
City, State 12345`).split(`
`).map((u,h)=>i.jsx("p",{className:"text-gray-600",children:u},h))]})]})]}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Business Hours"}),i.jsx("div",{className:"space-y-2 text-sm text-gray-600",children:(a("store_hours")||"Mon-Fri: 9AM-6PM, Sat: 10AM-4PM, Sun: Closed").split(",").map((u,h)=>i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:u.split(":")[0].trim()}),i.jsx("span",{children:u.split(":")[1].trim()})]},h))})]})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),i.jsxs("form",{onSubmit:l,className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:t.name,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:t.email,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your.email@example.com"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),i.jsx("input",{type:"text",id:"subject",name:"subject",required:!0,value:t.subject,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What is this about?"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),i.jsx("textarea",{id:"message",name:"message",required:!0,rows:6,value:t.message,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us more about your inquiry..."})]}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center",children:n?"Sending...":i.jsxs(i.Fragment,{children:["Send Message",i.jsx(fc,{className:"w-4 h-4 ml-2"})]})})]})]})})]})]})})},p4=()=>{const{currentUser:t}=dt(),[e,n]=w.useState([]),[s,r]=w.useState(""),[o,a]=w.useState(!1),[l,c]=w.useState([]),[u,h]=w.useState({name:"",email:"",phone:"",description:"",notes:""}),[f,d]=w.useState(!1);w.useState({}),Rw.useEffect(()=>{const E=D(O,"inventory"),I=Z(E,S=>{if(S.exists()){const M=S.val(),W=Object.keys(M).map(z=>({id:z,...M[z]})).filter(z=>z.isActive&&z.currentStock>0);n(W)}});return()=>I()},[]);const v=e.filter(E=>E.name.toLowerCase().includes(s.toLowerCase())||E.sku.toLowerCase().includes(s.toLowerCase())||E.category.toLowerCase().includes(s.toLowerCase())),m=E=>{if(l.find(S=>S.inventoryItemId===E.id))c(l.map(S=>S.inventoryItemId===E.id?{...S,quantity:S.quantity+1,total:x(S,S.quantity+1)}:S));else{const S={id:Date.now().toString(),inventoryItemId:E.id,name:E.name,description:E.description,quantity:1,unitPrice:E.sellingPrice,pricePerUnit:E.pricePerUnit||E.sellingPrice,unitType:E.unitType||"piece",width:E.width,height:E.height,area:E.width&&E.height?E.width*E.height:void 0,total:x({pricePerUnit:E.pricePerUnit||E.sellingPrice,unitType:E.unitType||"piece",width:E.width,height:E.height},1)};c([...l,S])}a(!1),r("")},x=(E,I,S,M)=>{const W=S||E.width||1,z=M||E.height||1;if(E.unitType==="sqft"||E.unitType==="meter"){const oe=W*z;return I*oe*E.pricePerUnit}else return I*E.unitPrice},C=(E,I,S)=>{c(l.map(M=>M.id===E?{...M,width:I,height:S,area:I*S,total:x(M,M.quantity,I,S)}:M))},y=(E,I)=>{I<=0?c(l.filter(S=>S.id!==E)):c(l.map(S=>S.id===E?{...S,quantity:I,total:x(S,I)}:S))},g=E=>{c(l.filter(I=>I.id!==E))},_=()=>{const E=l.reduce((M,W)=>M+W.total,0),I=E*.18,S=E+I;return{subtotal:E,tax:I,total:S}},b=async E=>{if(E.preventDefault(),l.length===0){L.error("Please add at least one item to the quotation");return}if(!t){L.error("Please login to submit a quotation request");return}d(!0);try{const{subtotal:I,tax:S,total:M}=_(),W={customerName:u.name,customerEmail:u.email,customerPhone:u.phone,description:u.description,items:l,subtotal:I,tax:S,discount:0,total:M,status:"draft",validUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString(),notes:u.notes,createdBy:t.uid,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),paymentStatus:"pending"},z=D(O,"quotations");await ct(z,W),L.success("Quotation request sent successfully! We'll contact you within 24 hours."),h({name:"",email:"",phone:"",description:"",notes:""}),c([])}catch(I){L.error("Failed to send quotation request"),console.error("Error submitting quotation:",I)}finally{d(!1)}},N=E=>{h({...u,[E.target.name]:E.target.value})},{subtotal:j,tax:k,total:T}=_();return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(bT,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Get Your Estimate"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Select products from our inventory and we'll provide you with a detailed quotation within 24 hours."})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[i.jsxs("form",{onSubmit:b,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:u.name,onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),i.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:u.email,onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your.email@example.com"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+91 9876543210"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Products"}),i.jsxs("button",{type:"button",onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[i.jsx(En,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),l.length>0?i.jsxs("div",{className:"space-y-4",children:[l.map(E=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:E.name}),i.jsx("p",{className:"text-sm text-gray-600",children:E.description}),i.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[nt(E.pricePerUnit)," per ",E.unitType]}),(E.unitType==="sqft"||E.unitType==="meter")&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs text-gray-500",children:["Width (",E.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:E.width||"",onChange:I=>C(E.id,parseFloat(I.target.value)||0,E.height||0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Width"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs text-gray-500",children:["Height (",E.unitType==="sqft"?"ft":"m",")"]}),i.jsx("input",{type:"number",step:"0.1",value:E.height||"",onChange:I=>C(E.id,E.width||0,parseFloat(I.target.value)||0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Height"})]})]}),E.area&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Area: ",E.area.toFixed(2)," ",E.unitType]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>y(E.id,E.quantity-1),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center",children:"-"}),i.jsx("span",{className:"w-12 text-center font-medium",children:E.quantity}),i.jsx("button",{type:"button",onClick:()=>y(E.id,E.quantity+1),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center",children:"+"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium text-gray-900",children:nt(E.total)}),E.area&&i.jsxs("p",{className:"text-xs text-gray-500",children:[E.quantity,"  ",E.area.toFixed(2)," ",E.unitType]})]}),i.jsx("button",{type:"button",onClick:()=>g(E.id),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(It,{className:"w-4 h-4"})})]})]},E.id)),i.jsxs("div",{className:"border-t pt-4 space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:nt(j)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax (18% GST):"}),i.jsx("span",{children:nt(k)})]}),i.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:nt(T)})]})]})]}):i.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:i.jsx("p",{className:"text-gray-600",children:'No products selected. Click "Add Product" to get started.'})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Description"}),i.jsx("textarea",{id:"description",name:"description",rows:4,value:u.budget,onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your requirements, timeline, or any special instructions..."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),i.jsx("textarea",{id:"notes",name:"notes",rows:4,value:u.notes,onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any additional information or special requests..."})]})]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center",children:f?"Sending Quotation Request...":i.jsxs(i.Fragment,{children:["Send Quotation Request",i.jsx(fc,{className:"w-4 h-4 ml-2"})]})})})]}),i.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What happens next?"}),i.jsxs("ul",{className:"text-blue-800 text-sm space-y-1",children:[i.jsx("li",{children:" We'll review your request within 24 hours"}),i.jsx("li",{children:" Our team will contact you to discuss details"}),i.jsx("li",{children:" You'll receive a detailed quotation with pricing"}),i.jsx("li",{children:" We'll schedule a consultation if needed"}),i.jsx("li",{children:" Payment can be processed directly from the quotation"})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Select Products"}),i.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search products...",value:s,onChange:E=>r(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:i.jsxs("div",{className:"space-y-3",children:[v.map(E=>i.jsxs("div",{onClick:()=>m(E),className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:E.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[E.category,"  SKU: ",E.sku]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Stock: ",E.currentStock," ",E.unit]}),E.imageUrl&&i.jsx("img",{src:E.imageUrl,alt:E.name,className:"w-16 h-16 object-cover rounded mt-2"}),E.groupTag&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mt-1",children:E.groupTag})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium text-blue-600",children:nt(E.pricePerUnit||E.sellingPrice)}),i.jsxs("p",{className:"text-sm text-gray-500",children:["per ",E.unitType||E.unit]}),E.width&&E.height&&i.jsxs("p",{className:"text-xs text-gray-500",children:[E.width,"  ",E.height," ",E.unitType]})]})]},E.id)),v.length===0&&i.jsx("p",{className:"text-center text-gray-600 py-8",children:"No products found"})]})})]})})]})})},g4=()=>i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Fo,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Privacy Policy"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-8",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("p",{className:"text-gray-600 mb-4",children:[i.jsx("strong",{children:"Effective Date:"})," January 1, 2025"]}),i.jsxs("p",{className:"text-gray-600",children:[i.jsx("strong",{children:"Last Updated:"})," January 1, 2025"]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(gt,{className:"w-6 h-6 text-blue-600 mr-3"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Information We Collect"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We collect information you provide directly to us, such as when you create an account, make a purchase, or contact us for support."}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Personal information (name, email address, phone number)"}),i.jsx("li",{children:"Account credentials and preferences"}),i.jsx("li",{children:"Purchase history and transaction data"}),i.jsx("li",{children:"Communication preferences"}),i.jsx("li",{children:"Technical information about your device and browser"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(yt,{className:"w-6 h-6 text-green-600 mr-3"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"How We Use Your Information"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We use the information we collect to provide, maintain, and improve our services."}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Process and fulfill your orders"}),i.jsx("li",{children:"Provide customer support"}),i.jsx("li",{children:"Send important updates about your account or orders"}),i.jsx("li",{children:"Improve our products and services"}),i.jsx("li",{children:"Detect and prevent fraud"}),i.jsx("li",{children:"Comply with legal obligations"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(LT,{className:"w-6 h-6 text-purple-600 mr-3"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Information Sharing"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except in the following circumstances:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Service providers who assist us in operating our business"}),i.jsx("li",{children:"Legal requirements or to protect our rights"}),i.jsx("li",{children:"Business transfers (mergers, acquisitions)"}),i.jsx("li",{children:"With your explicit consent"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Data Security"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. This includes:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Encryption of sensitive data"}),i.jsx("li",{children:"Regular security assessments"}),i.jsx("li",{children:"Access controls and authentication"}),i.jsx("li",{children:"Secure data storage and transmission"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your Rights"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"You have certain rights regarding your personal information:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Access and review your personal information"}),i.jsx("li",{children:"Correct or update your information"}),i.jsx("li",{children:"Delete your account and personal information"}),i.jsx("li",{children:"Opt-out of marketing communications"}),i.jsx("li",{children:"Data portability"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Cookies and Tracking"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"We use cookies and similar technologies to enhance your experience on our website. These technologies help us:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 ml-4",children:[i.jsx("li",{children:"Remember your preferences and settings"}),i.jsx("li",{children:"Understand how you use our website"}),i.jsx("li",{children:"Improve our services"}),i.jsx("li",{children:"Provide personalized content"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Contact Us"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"If you have any questions about this Privacy Policy or our data practices, please contact us:"}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsxs("p",{className:"text-gray-600",children:[i.jsx("strong",{children:"Email:"})," privacy@shop.com",i.jsx("br",{}),i.jsx("strong",{children:"Phone:"})," +1 (555) 123-4567",i.jsx("br",{}),i.jsx("strong",{children:"Address:"})," 123 Business Street, City, State 12345"]})})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Changes to This Policy"}),i.jsx("p",{className:"text-gray-600",children:'We may update this Privacy Policy from time to time. We will notify you of any significant changes by posting the new policy on this page and updating the "Last Updated" date. Your continued use of our services after any changes constitutes acceptance of the updated policy.'})]})]})})]})}),x4=()=>{const{settings:t,get:e}=mw();return w.useEffect(()=>{if(!t)return;const n=e("favicon");if(n){const s=document.getElementById("dynamic-favicon");s&&(s.href=n)}},[t,e]),null};function y4(){const t=Tn(),e=["/login","/signup"].includes(t.pathname);return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!e&&i.jsx(zT,{}),i.jsx("main",{children:i.jsxs(Ab,{children:[i.jsx(Pt,{path:"/",element:i.jsx(VT,{})}),i.jsx(Pt,{path:"/login",element:i.jsx(qT,{})}),i.jsx(Pt,{path:"/catalogue",element:i.jsx(JT,{})}),i.jsx(Pt,{path:"/about",element:i.jsx(f4,{})}),i.jsx(Pt,{path:"/contact",element:i.jsx(m4,{})}),i.jsx(Pt,{path:"/estimate",element:i.jsx(p4,{})}),i.jsx(Pt,{path:"/privacy",element:i.jsx(g4,{})}),i.jsx(Pt,{path:"/cart",element:i.jsx(ru,{children:i.jsx(XT,{})})}),i.jsx(Pt,{path:"/profile",element:i.jsx(ru,{children:i.jsx(ZT,{})})}),i.jsx(Pt,{path:"/admin",element:i.jsx(ru,{children:i.jsx(h4,{})})})]})}),!e&&i.jsx(BT,{}),i.jsx(tj,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"}}})]})}function v4(){return i.jsxs(yT,{children:[i.jsx(x4,{}),i.jsx(vT,{children:i.jsx(nN,{children:i.jsx(y4,{})})})]})}wy(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(v4,{})}));
